          try {
            (function(){
              var exports=exports||{};!function(e){exports.qs=e()}(function(){return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t){"use strict";var n=e("./stringify"),i=e("./parse");t.exports={stringify:n,parse:i}},{"./parse":2,"./stringify":3}],2:[function(e,t){"use strict";var n=e("./utils"),i=Object.prototype.hasOwnProperty,r={delimiter:"&",depth:5,arrayLimit:20,parameterLimit:1e3,strictNullHandling:!1,plainObjects:!1,allowPrototypes:!1,allowDots:!1,decoder:n.decode},o=function(e,t){for(var n={},r=e.split(t.delimiter,t.parameterLimit===1/0?void 0:t.parameterLimit),o=0;o<r.length;++o){var s,a,u=r[o],l=u.indexOf("]=")===-1?u.indexOf("="):u.indexOf("]=")+1;l===-1?(s=t.decoder(u),a=t.strictNullHandling?null:""):(s=t.decoder(u.slice(0,l)),a=t.decoder(u.slice(l+1))),i.call(n,s)?n[s]=[].concat(n[s]).concat(a):n[s]=a}return n},s=function e(t,n,i){if(!t.length)return n;var r,o=t.shift();if("[]"===o)r=[],r=r.concat(e(t,n,i));else{r=i.plainObjects?Object.create(null):{};var s="["===o[0]&&"]"===o[o.length-1]?o.slice(1,o.length-1):o,a=parseInt(s,10);!isNaN(a)&&o!==s&&String(a)===s&&a>=0&&i.parseArrays&&a<=i.arrayLimit?(r=[],r[a]=e(t,n,i)):r[s]=e(t,n,i)}return r},a=function(e,t,n){if(e){var r=n.allowDots?e.replace(/\.([^\.\[]+)/g,"[$1]"):e,o=/^([^\[\]]*)/,a=/(\[[^\[\]]*\])/g,u=o.exec(r),l=[];if(u[1]){if(!n.plainObjects&&i.call(Object.prototype,u[1])&&!n.allowPrototypes)return;l.push(u[1])}for(var c=0;null!==(u=a.exec(r))&&c<n.depth;)c+=1,(n.plainObjects||!i.call(Object.prototype,u[1].replace(/\[|\]/g,""))||n.allowPrototypes)&&l.push(u[1]);return u&&l.push("["+r.slice(u.index)+"]"),s(l,t,n)}};t.exports=function(e,t){var i=t||{};if(null!==i.decoder&&void 0!==i.decoder&&"function"!=typeof i.decoder)throw new TypeError("Decoder has to be a function.");if(i.delimiter="string"==typeof i.delimiter||n.isRegExp(i.delimiter)?i.delimiter:r.delimiter,i.depth="number"==typeof i.depth?i.depth:r.depth,i.arrayLimit="number"==typeof i.arrayLimit?i.arrayLimit:r.arrayLimit,i.parseArrays=i.parseArrays!==!1,i.decoder="function"==typeof i.decoder?i.decoder:r.decoder,i.allowDots="boolean"==typeof i.allowDots?i.allowDots:r.allowDots,i.plainObjects="boolean"==typeof i.plainObjects?i.plainObjects:r.plainObjects,i.allowPrototypes="boolean"==typeof i.allowPrototypes?i.allowPrototypes:r.allowPrototypes,i.parameterLimit="number"==typeof i.parameterLimit?i.parameterLimit:r.parameterLimit,i.strictNullHandling="boolean"==typeof i.strictNullHandling?i.strictNullHandling:r.strictNullHandling,""===e||null===e||"undefined"==typeof e)return i.plainObjects?Object.create(null):{};for(var s="string"==typeof e?o(e,i):e,u=i.plainObjects?Object.create(null):{},l=Object.keys(s),c=0;c<l.length;++c){var d=l[c],h=a(d,s[d],i);u=n.merge(u,h,i)}return n.compact(u)}},{"./utils":4}],3:[function(e,t){"use strict";var n=e("./utils"),i={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},r={delimiter:"&",strictNullHandling:!1,skipNulls:!1,encode:!0,encoder:n.encode},o=function e(t,i,r,o,s,a,u,l,c){var d=t;if("function"==typeof u)d=u(i,d);else if(d instanceof Date)d=d.toISOString();else if(null===d){if(o)return a?a(i):i;d=""}if("string"==typeof d||"number"==typeof d||"boolean"==typeof d||n.isBuffer(d))return a?[a(i)+"="+a(d)]:[i+"="+String(d)];var h=[];if("undefined"==typeof d)return h;var p;if(Array.isArray(u))p=u;else{var f=Object.keys(d);p=l?f.sort(l):f}for(var m=0;m<p.length;++m){var g=p[m];s&&null===d[g]||(h=Array.isArray(d)?h.concat(e(d[g],r(i,g),r,o,s,a,u,l,c)):h.concat(e(d[g],i+(c?"."+g:"["+g+"]"),r,o,s,a,u,l,c)))}return h};t.exports=function(e,t){var n,s,a=e,u=t||{},l="undefined"==typeof u.delimiter?r.delimiter:u.delimiter,c="boolean"==typeof u.strictNullHandling?u.strictNullHandling:r.strictNullHandling,d="boolean"==typeof u.skipNulls?u.skipNulls:r.skipNulls,h="boolean"==typeof u.encode?u.encode:r.encode,p=h?"function"==typeof u.encoder?u.encoder:r.encoder:null,f="function"==typeof u.sort?u.sort:null,m="undefined"!=typeof u.allowDots&&u.allowDots;if(null!==u.encoder&&void 0!==u.encoder&&"function"!=typeof u.encoder)throw new TypeError("Encoder has to be a function.");"function"==typeof u.filter?(s=u.filter,a=s("",a)):Array.isArray(u.filter)&&(n=s=u.filter);var g=[];if("object"!=typeof a||null===a)return"";var y;y=u.arrayFormat in i?u.arrayFormat:"indices"in u?u.indices?"indices":"repeat":"indices";var v=i[y];n||(n=Object.keys(a)),f&&n.sort(f);for(var _=0;_<n.length;++_){var b=n[_];d&&null===a[b]||(g=g.concat(o(a[b],b,v,c,d,p,s,f,m)))}return g.join(l)}},{"./utils":4}],4:[function(e,t,n){"use strict";var i=function(){for(var e=new Array(256),t=0;t<256;++t)e[t]="%"+((t<16?"0":"")+t.toString(16)).toUpperCase();return e}();n.arrayToObject=function(e,t){for(var n=t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!=typeof e[i]&&(n[i]=e[i]);return n},n.merge=function(e,t,i){if(!t)return e;if("object"!=typeof t){if(Array.isArray(e))e.push(t);else{if("object"!=typeof e)return[e,t];e[t]=!0}return e}if("object"!=typeof e)return[e].concat(t);var r=e;return Array.isArray(e)&&!Array.isArray(t)&&(r=n.arrayToObject(e,i)),Object.keys(t).reduce(function(e,r){var o=t[r];return Object.prototype.hasOwnProperty.call(e,r)?e[r]=n.merge(e[r],o,i):e[r]=o,e},r)},n.decode=function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},n.encode=function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),n="",r=0;r<t.length;++r){var o=t.charCodeAt(r);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=t.charAt(r):o<128?n+=i[o]:o<2048?n+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?n+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(r+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(r)),n+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return n},n.compact=function(e,t){if("object"!=typeof e||null===e)return e;var i=t||[],r=i.indexOf(e);if(r!==-1)return i[r];if(i.push(e),Array.isArray(e)){for(var o=[],s=0;s<e.length;++s)e[s]&&"object"==typeof e[s]?o.push(n.compact(e[s],i)):"undefined"!=typeof e[s]&&o.push(e[s]);return o}for(var a=Object.keys(e),u=0;u<a.length;++u){var l=a[u];e[l]=n.compact(e[l],i)}return e},n.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},n.isBuffer=function(e){return null!==e&&"undefined"!=typeof e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))}},{}]},{},[1])(1)}),function(e){var t=function(){"use strict";function e(t,n,i,r){function s(t,i){if(null===t)return null;if(0===i)return t;var a,d;if("object"!=typeof t)return t;if(e.__isArray(t))a=[];else if(e.__isRegExp(t))a=new RegExp(t.source,o(t)),t.lastIndex&&(a.lastIndex=t.lastIndex);else if(e.__isDate(t))a=new Date(t.getTime());else{if(c&&Buffer.isBuffer(t))return a=new Buffer(t.length),t.copy(a),a;"undefined"==typeof r?(d=Object.getPrototypeOf(t),a=Object.create(d)):(a=Object.create(r),d=r)}if(n){var h=u.indexOf(t);if(h!=-1)return l[h];u.push(t),l.push(a)}for(var p in t){var f;d&&(f=Object.getOwnPropertyDescriptor(d,p)),f&&null==f.set||(a[p]=s(t[p],i-1))}return a}var a;"object"==typeof n&&(i=n.depth,r=n.prototype,a=n.filter,n=n.circular);var u=[],l=[],c="undefined"!=typeof Buffer;return"undefined"==typeof n&&(n=!0),"undefined"==typeof i&&(i=1/0),s(t,i)}function t(e){return Object.prototype.toString.call(e)}function n(e){return"object"==typeof e&&"[object Date]"===t(e)}function i(e){return"object"==typeof e&&"[object Array]"===t(e)}function r(e){return"object"==typeof e&&"[object RegExp]"===t(e)}function o(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return e.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},e.__objToStr=t,e.__isDate=n,e.__isArray=i,e.__isRegExp=r,e.__getRegExpFlags=o,e}();e.clone=t}("object"==typeof exports?exports:this),function(e){exports.topdomain=e()}(function(){return function e(t,n,i){function r(s,a){if(!n[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){"use strict";function i(e){for(var t=n.cookie,i=n.levels(e),r=0;r<i.length;++r){var o="__tld__",s=i[r],a={domain:"."+s};if(t(o,1,a),t(o))return t(o,null,a),s}return""}var r=e("component-url").parse,o=e("component-cookie");i.levels=function(e){var t=r(e).hostname,n=t.split("."),i=n[n.length-1],o=[];if(4===n.length&&i===parseInt(i,10))return o;if(n.length<=1)return o;for(var s=n.length-2;s>=0;--s)o.push(n.slice(s).join("."));return o},i.cookie=o,n=t.exports=i},{"component-cookie":2,"component-url":3}],2:[function(e,t){function n(e,t,n){n=n||{};var i=s(e)+"="+s(t);null==t&&(n.maxage=-1),n.maxage&&(n.expires=new Date(+new Date+n.maxage)),n.path&&(i+="; path="+n.path),n.domain&&(i+="; domain="+n.domain),n.expires&&(i+="; expires="+n.expires.toUTCString()),n.secure&&(i+="; secure"),document.cookie=i}function i(){var e;try{e=document.cookie}catch(e){return"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e.stack||e),{}}return o(e)}function r(e){return i()[e]}function o(e){var t,n={},i=e.split(/ *; */);if(""==i[0])return n;for(var r=0;r<i.length;++r)t=i[r].split("="),n[a(t[0])]=a(t[1]);return n}function s(e){try{return encodeURIComponent(e)}catch(e){}}function a(e){try{return decodeURIComponent(e)}catch(e){}}t.exports=function(e,t,o){switch(arguments.length){case 3:case 2:return n(e,t,o);case 1:return r(e);default:return i()}}},{}],3:[function(e,t,n){function i(e){switch(e){case"http:":return 80;case"https:":return 443;default:return location.port}}n.parse=function(e){var t=document.createElement("a");return t.href=e,{href:t.href,host:t.host||location.host,port:"0"===t.port||""===t.port?i(t.protocol):t.port,hash:t.hash,hostname:t.hostname||location.hostname,pathname:"/"!=t.pathname.charAt(0)?"/"+t.pathname:t.pathname,protocol:t.protocol&&":"!=t.protocol?t.protocol:location.protocol,search:t.search,query:t.search.slice(1)}},n.isAbsolute=function(e){return 0==e.indexOf("//")||!!~e.indexOf("://")},n.isRelative=function(e){return!n.isAbsolute(e)},n.isCrossDomain=function(e){e=n.parse(e);var t=n.parse(t.href);return e.hostname!==t.hostname||e.port!==t.port||e.protocol!==t.protocol}},{}]},{},[1])(1)}),function(){exports.utils={timeout:function(e,t){return setTimeout(t,e)},getCurrentTimestamp:function(){return(new Date).getTime()},sampleArray:function(e){return e[Math.floor(Math.random()*e.length)]},shuffleArray:function(e){var t,n,i,r,o,s;if(e.length>1){for(s=[],t=i=r=e.length-1;r<=1?i<=1:i>=1;t=r<=1?++i:--i)n=Math.floor(Math.random()*(t+1)),s.push((o=[e[n],e[t]],e[t]=o[0],e[n]=o[1],o));return s}},buildLogger:function(e,t){var n,i,r,o;i={silent:0,error:1,warn:2,info:3,debug:4},r={level:t||"warn"},n=function(t,n){return r[t]=function(){var o,s;if(n<=i[r.level]){o=Array.prototype.slice.apply(arguments),i[r.level]>3&&"performance"in window&&"now"in window.performance&&o.unshift("+"+Math.round(performance.now())+"ms"),o.unshift(e);try{return"undefined"!=typeof console&&null!==console&&null!=(s=console[t])?s.apply(console,o):void 0}catch(e){return console.log(t+" "+o.join(", "))}}}};for(t in i)o=i[t],n(t,o);return r},ajaxSimpleCors:function(e){var t,n,i,r;return t=e.body||{},i=(e.method||"GET").toUpperCase(),n="GET"===i||"POST"===i?i:(t._method=i,"POST"),r=new XMLHttpRequest,r.open(n,e.url,e.async),r.withCredentials=!!e.withCredentials,r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.setRequestHeader("Accept","application/json"),e.callback&&(r.onload=function(){var t;return t=JSON.parse(r.responseText),t.redirect_url?exports.utils.ajaxSimpleCors({url:t.redirect_url,callback:e.callback,withCredentials:e.withCredentials}):e.callback(t)}),"GET"!==n?r.send(exports.qs.stringify(t)):r.send()}}}.call(this),function(e){!function(t){e.Cookies=t()}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(e){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(s={});for(var u=document.cookie?document.cookie.split("; "):[],l=/(%[0-9A-Z]{2})+/g,c=0;c<u.length;c++){var d=u[c].split("="),h=d[0].replace(l,decodeURIComponent),p=d.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{if(p=n.read?n.read(p,h):n(p,h)||p.replace(l,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===h){s=p;break}t||(s[h]=p)}catch(e){}}return s}}return i.set=i,i.get=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})})}("object"==typeof exports?exports:this),!function(e,t){exports[e]=t()}("domready",function(e){function t(e){for(p=1;e=i.shift();)e()}var n,i=[],r=!1,o=document,s=o.documentElement,a=s.doScroll,u="DOMContentLoaded",l="addEventListener",c="onreadystatechange",d="readyState",h=a?/^loaded|^c/:/^loaded|c/,p=h.test(o[d]);return o[l]&&o[l](u,n=function(){o.removeEventListener(u,n,r),t()},r),a&&o.attachEvent(c,n=function(){/^c/.test(o[d])&&(o.detachEvent(c,n),t())}),e=a?function(t){self!=top?p?t():i.push(t):function(){try{s.doScroll("left")}catch(n){return setTimeout(function(){e(t)},50)}t()}()}:function(e){p?e():i.push(e)}}),function(e){var t=0,n=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||function(e){var n=(new Date).getTime(),i=Math.max(0,16-(n-t)),r=setTimeout(function(){e(n+i)},i);return t=n+i,r};e.requestAnimationFrame=function(e,t){return n.call(window,e,t)}}("object"==typeof exports?exports:this),function(e){var t="addEventListener"in window?"addEventListener":"attachEvent",n=function(e){return"addEventListener"===e?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(t);e.addEventListener=n}("object"==typeof exports?exports:this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};exports.DomHelpers=function(){function t(t){this.reverseChildren=e(this.reverseChildren,this),this.detectOrientation=e(this.detectOrientation,this),this.calcScreenHeight=e(this.calcScreenHeight,this),this.calcWindowWidth=e(this.calcWindowWidth,this),this.calcWindowHeight=e(this.calcWindowHeight,this),this.bindEvent=e(this.bindEvent,this),this._getInitialStyleFloat=e(this._getInitialStyleFloat,this),this.translateY=e(this.translateY,this),this.transition=e(this.transition,this),this.setOpacity=e(this.setOpacity,this),this.clearInlineStyle=e(this.clearInlineStyle,this),this.setStyle=e(this.setStyle,this),this.getComputedStyle=e(this.getComputedStyle,this),this.config=t}return t.prototype.getComputedStyle=function(e,t){return this.config.BROWSER_SUPPORT.features.getComputedStyle?getComputedStyle(e,null).getPropertyValue(t):e.currentStyle[t]},t.prototype.setStyle=function(e,t,n){return e.style.setProperty(t,n,"important")},t.prototype.clearInlineStyle=function(e,t){return e.style.removeProperty(t)},t.prototype.setOpacity=function(e,t){return this.setStyle(e,"opacity",t)},t.prototype.transition=function(e,t){if(this.config.BROWSER_SUPPORT.features.transition)return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(e,"transition",t):this.setStyle(e,"transition",t.replace(/transform/g,"bottom"))},t.prototype.translateY=function(e,t){var n;return this.config.BROWSER_SUPPORT.features.transform?this.setStyle(e,"transform","translate3d(0, "+t+"px, 0)"):(n=this._getInitialStyleFloat(e,"bottom"),"static"===this.getComputedStyle(e,"position")&&this.setStyle(e,"position","relative"),this.setStyle(e,"bottom",-t+n+"px"))},t.prototype._getInitialStyleFloat=function(e,t){var n;return(n=e.getAttribute("data-initial-"+t))?parseFloat(n,10):(n=parseFloat(this.getComputedStyle(e,t),10)||0,e.setAttribute("data-initial-"+t,n),n)},t.prototype.bindEvent=function(e,t,n){return exports.addEventListener(e,t,n)},t.prototype.calcWindowHeight=function(){return innerHeight},t.prototype.calcWindowWidth=function(){return innerWidth},t.prototype.calcScreenHeight=function(){return"portrait"===this.detectOrientation()?Math.max(screen.availHeight,screen.availWidth):Math.min(screen.availHeight,screen.availWidth)},t.prototype.detectOrientation=function(){return this.calcWindowHeight()>this.calcWindowWidth()?"portrait":"landscape"},t.prototype.reverseChildren=function(e){var t,n,i,r;for(r=[],n=t=0,i=e.childNodes.length-1;0<=i?t<=i:t>=i;n=0<=i?++t:--t)r.push(e.insertBefore(e.childNodes[n],e.firstChild));return r},t}()}.call(this),function(){var e=Date.now||function(){return(new Date).getTime()},t=function(t,n,i){var r,o,s,a=null,u=0;i||(i={});var l=function(){u=i.leading===!1?0:e(),a=null,s=t.apply(r,o),a||(r=o=null)};return function(){var c=e();u||i.leading!==!1||(u=c);var d=n-(c-u);return r=this,o=arguments,d<=0||d>n?(a&&(clearTimeout(a),a=null),u=c,s=t.apply(r,o),a||(r=o=null)):a||i.trailing===!1||(a=setTimeout(l,d)),s}};exports.throttle=t}(),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};exports.TypingIndicator=function(){function t(t,n){this._bindTypingEvents=e(this._bindTypingEvents,this),this._handleWebSocketMessage=e(this._handleWebSocketMessage,this);var i;i=t.BROWSER_SUPPORT.features.webSocket&&t.BROWSER_SUPPORT.features.cors&&t.BROWSER_SUPPORT.features.json,i&&(this.$el=n.$el,this.config=t,this.pusherData=JSON.parse(this.$el.getAttribute("data-pusher")),this.ws=new WebSocket("wss://ws.pusherapp.com/app/"+this.pusherData.public_key+"?protocol=6"),this.ws.onmessage=this._handleWebSocketMessage)}return t.prototype._handleWebSocketMessage=function(e){var t;return t=JSON.parse(e.data),"string"==typeof t.data&&(t.data=JSON.parse(t.data)),"pusher_internal:subscription_succeeded"===t.event?this._bindTypingEvents():"pusher:connection_established"===t.event?exports.utils.ajaxSimpleCors({method:"POST",url:this.pusherData.auth_url,withCredentials:/^staging/.test(this.config.ENV),body:{survey_request_token:this.pusherData.survey_request_token,socket_id:t.data.socket_id,channel_name:this.pusherData.channel_name},callback:function(e){return function(t){var n;return n={event:"pusher:subscribe",data:{auth:t.auth,channel:e.pusherData.channel_name}},e.ws.send(JSON.stringify(n))}}(this)}):void 0},t.prototype._bindTypingEvents=function(){var e,t,n,i;return i=0,n=1e3,e=function(e){return function(){var t;if(!(i>=n))return t={event:"client-typing",channel:e.pusherData.channel_name,data:{survey_request_token:e.pusherData.survey_request_token}},e.ws.send(JSON.stringify(t)),i+=1}}(this),t=exports.throttle(e,2e3),exports.addEventListener(this.$el,"input",t)},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};exports.DisplayStrategy=function(){function t(t,n){this._setupTypingIndicator=e(this._setupTypingIndicator,this),this._disableMask=e(this._disableMask,this),this._resizeMask=e(this._resizeMask,this),this._computeMaskHeight=e(this._computeMaskHeight,this),this._setupMask=e(this._setupMask,this),this._pseudoBlurCommentBox=e(this._pseudoBlurCommentBox,this),this._pseudoFocusCommentBox=e(this._pseudoFocusCommentBox,this),this._setupEventHandlers=e(this._setupEventHandlers,this),this._injectThankYouTemplate=e(this._injectThankYouTemplate,this),this._confirmationText=e(this._confirmationText,this),this._clearScore=e(this._clearScore,this),this._setScore=e(this._setScore,this),this._getScore=e(this._getScore,this),this._measure=e(this._measure,this),this._injectTemplate=e(this._injectTemplate,this),this._remove=e(this._remove,this),this._getTemplate=e(this._getTemplate,this),this.toggleStateForPreview=e(this.toggleStateForPreview,this);var i;this.config=t,this.opts=n,(i=this.opts).offsets||(i.offsets={}),this.timingFactor=1,this.transitionDuration=.5*this.timingFactor,this.transitionEasing="cubic-bezier(0.32, 0.6, 0.08, 1.00)",this.dom=new exports.DomHelpers(this.config),this.state="initial"}return t.prototype.toggleStateForPreview=function(e,t,n){var i,r,o;if(null==n&&(n={}),i=e.slice(),r=this.state.slice(),i!==r)switch(this.config.LOGGER.debug("Toggling '"+r+"' -> '"+i+"'."),this.score&&(t=this.score),o=r+" -> "+i){case"toast -> question":return this._showQuestion();case"toast -> comment":return this._showComment(t);case"question -> toast":return this._hideQuestion();case"question -> comment":return this._showComment(t);case"comment -> question":return n.disableClearScoreOnHideComment||this._clearScore(),this._showQuestion();case"comment -> toast":return n.disableClearScoreOnHideComment||this._clearScore(),this._hideComment();default:return this.config.LOGGER.error("Cannot toggle '"+r+"' -> '"+i+"'.")}},t.prototype._getTemplate=function(e){var t;return t=function(t){return function(n){return t.token=n.token,e(n)}}(this),this.config.SURVEY_TEMPLATE?t(this.config.SURVEY_TEMPLATE):(this.config.TELEMETRY.instrument("GET_TEMPLATE_START",{token:this.opts.params._delighted_survey_request_token}),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.SURVEY_URL,body:this.opts.params,withCredentials:/^staging/.test(this.config.ENV),callback:function(e){return function(n){return n.abort?(e.config.TELEMETRY.instrument("GET_TEMPLATE_ABORT",{reason:n.reason}),e.config.LOGGER.warn("Survey cancelled because "+n.reason+"."),null!=n.last_surveyed_timestamp?e.config.STATE_MANAGER.setLastSurveyedTimestamp(1e3*n.last_surveyed_timestamp,{token:n.last_surveyed_token}):void 0):(e.config.TELEMETRY.instrument("GET_TEMPLATE_OK",{token:n.token}),t(n))}}(this)}))},t.prototype._remove=function(){if(this.$root)return exports.requestAnimationFrame(function(e){return function(){return exports.utils.timeout(1e3*e.transitionDuration,function(){return e.$root.parentNode.removeChild(e.$root),e.$root=null})}}(this))},t.prototype._injectTemplate=function(e){var t;return document.body.insertAdjacentHTML("beforeend",e.html),this.$root=document.querySelector("#delighted-web-"+e.id),this.$survey=this.$root.querySelector(".delighted-web-survey"),this.$surveyInner=this.$root.querySelector(".delighted-web-survey-inner"),this.$surveyPowered=this.$root.querySelector(".delighted-web-survey-powered"),this.$surveyClose=this.$root.querySelector(".delighted-web-survey-close"),this.$stepQuestion=this.$root.querySelector(".delighted-web-step-question"),this.$stepComment=this.$root.querySelector(".delighted-web-step-comment"),this.$stepThanks=this.$root.querySelector(".delighted-web-step-thanks"),t=this.$root.querySelector(".delighted-web-label-comment").getAttribute("data-text"),this._confirmationTextByScore=JSON.parse(t),this._setupMask()},t.prototype._measure=function(){return this.heightSurvey=this.$survey.offsetHeight,this.heightStepQuestion=this.$stepQuestion.offsetHeight,this.heightStepComment=this.$stepComment.offsetHeight,this.heightStepThanks=this.$stepThanks.offsetHeight},t.prototype._getScore=function(e){return{text:e.innerText,number:parseInt(e.getAttribute("data-score"),10)}},t.prototype._setScore=function(e){var t,n,i,r,o;if(e){for(this.score=e,o=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),n=0,i=o.length;n<i;n++)t=o[n],e.number===this._getScore(t).number?(t.classList.remove("delighted-web-is-inactive"),t.classList.add("delighted-web-is-active")):(t.classList.add("delighted-web-is-inactive"),t.classList.remove("delighted-web-is-active"));return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.add("delighted-web-is-active"),this.$stepComment.querySelector(".delighted-web-label-comment").innerText=this._confirmationText(e),(r=this.$surveyPowered.getAttribute("data-url-tail"))?this.$surveyPowered.href=r:void 0}},t.prototype._clearScore=function(){var e,t,n,i;for(this.score=null,i=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),t=0,n=i.length;t<n;t++)e=i[t],e.classList.remove("delighted-web-is-inactive"),e.classList.remove("delighted-web-is-active");return this.$stepQuestion.querySelector(".delighted-web-question-score-numbers").classList.remove("delighted-web-is-active")},t.prototype._confirmationText=function(e){return this._confirmationTextByScore[e.number]},t.prototype._injectThankYouTemplate=function(e){return this.$stepThanks.innerHTML=e,this._measure()},t.prototype._setupEventHandlers=function(){var e,t,n,i,r;for(r=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),t=function(e){return function(t){return e.dom.bindEvent(t,"click",function(n){var i,r,o;return n.preventDefault(),r=e._getScore(t),o=t.getAttribute("data-url"),exports.utils.ajaxSimpleCors({url:o,withCredentials:/^staging/.test(e.config.ENV),callback:function(t){if("thanks"!==e.state)return e._injectThankYouTemplate(t.thank_you_html)}}),e.$stepComment.querySelector(".delighted-web-comment").action=o,e._showComment(r),"function"==typeof(i=e.opts).onRespond&&i.onRespond({token:e.token,score:r.number}),exports.utils.timeout(e.transitionDuration,e._setupTypingIndicator)})}}(this),n=0,i=r.length;n<i;n++)e=r[n],t(e);return this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment"),"submit",function(e){return function(t){var n,i,r,o,s,a,u;for(t.preventDefault(),i=t.target,o={},u=i.querySelectorAll("input, textarea"),s=0,a=u.length;s<a;s++)n=u[s],o[n.name]=n.value;return exports.utils.ajaxSimpleCors({method:"PUT",url:i.action,body:o,withCredentials:/^staging/.test(e.config.ENV)}),e._showThanks(),"function"==typeof(r=e.opts).onComment?r.onComment({token:e.token}):void 0}}(this)),this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment-box"),"focus",this._pseudoFocusCommentBox),this.dom.bindEvent(this.$stepComment.querySelector(".delighted-web-comment-box"),"blur",this._pseudoBlurCommentBox),this.dom.bindEvent(this.$surveyClose,"click",function(e){return function(){return e.hide({source:"close"})}}(this))},t.prototype._pseudoFocusCommentBox=function(){return this.$stepComment.querySelector(".delighted-web-comment-box").classList.add("delighted-web-is-focus")},t.prototype._pseudoBlurCommentBox=function(){return this.$stepComment.querySelector(".delighted-web-comment-box").classList.remove("delighted-web-is-focus")},t.prototype._setupMask=function(){return null!=this.opts.offsets.bottom&&this.opts.offsets.bottom>0?this.dom.setStyle(this.$root,"bottom",this.opts.offsets.bottom+"px"):this.dom.setStyle(this.$root,"overflow","visible")},t.prototype._computeMaskHeight=function(e){return e+16},t.prototype._resizeMask=function(e,t){var n,i,r,o;return null==t&&(t=!0),i=this.$root.offsetHeight,n=this._computeMaskHeight(e),r=n>i,o=function(e){return function(){return e.dom.setStyle(e.$root,"height",n+"px"),e._measure()}}(this),r||!t?o():exports.utils.timeout(1e3*this.transitionDuration,o)},t.prototype._disableMask=function(){return this.dom.setStyle(this.$root,"height","auto"),this.dom.setStyle(this.$root,"overflow","visible"),this.dom.setStyle(this.$root,"bottom",0)},t.prototype._setupTypingIndicator=function(){if(!this.hasSetupTypingIndicator)return this.hasSetupTypingIndicator=!0,new exports.TypingIndicator(this.config,{$el:this.$stepComment.querySelector(".delighted-web-comment-box")})},t}()}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;exports.DisplayStrategyDesktop=function(n){function i(){this._autoSizeQuestionLabel=e(this._autoSizeQuestionLabel,this),this._animateBtns=e(this._animateBtns,this),this._resetBtnsAnimation=e(this._resetBtnsAnimation,this),this._setupEventHandlers=e(this._setupEventHandlers,this),this._injectTemplate=e(this._injectTemplate,this),this._showThanks=e(this._showThanks,this),this._hideComment=e(this._hideComment,this),this._showComment=e(this._showComment,this),this._showQuestion=e(this._showQuestion,this),this.hide=e(this.hide,this),this.show=e(this.show,this),i.__super__.constructor.apply(this,arguments),this.autoHideDelay=2*this.timingFactor,this.opacityTransitionDuration=.15*this.timingFactor,this.opacityTransitionEasing="ease-in-out"}return t(i,n),i.prototype.show=function(){return this._getTemplate(function(e){return function(t){return e._injectTemplate(t),e._measure(),e._setupEventHandlers(),e._showQuestion()}}(this))},i.prototype.hide=function(e){return null==e&&(e={}),this.state="hidden",exports.requestAnimationFrame(function(t){return function(){return t.dom.setOpacity(t.$survey,1),exports.requestAnimationFrame(function(){var n;return t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s, opacity "+t.opacityTransitionDuration+"s "+t.opacityTransitionEasing+" "+(t.transitionDuration-t.opacityTransitionDuration)/5+"s"),t.dom.setOpacity(t.$survey,0),t.dom.translateY(t.$survey,t.heightSurvey),t._remove(),"function"==typeof(n=t.opts).onHide?n.onHide({token:t.token,source:e.source}):void 0})}}(this))},i.prototype._showQuestion=function(e){return"comment"===this.state?void this._hideComment():(this.state="question",exports.requestAnimationFrame(function(t){return function(){return t.$stepQuestion.classList.add("delighted-web-is-shown"),t._autoSizeQuestionLabel(),t._measure(),t.dom.setStyle(t.$root,"visibility","visible"),t.dom.transition(t.$survey,"none"),t.dom.translateY(t.$survey,t.heightSurvey),exports.requestAnimationFrame(function(){var n;return t.opts.disableShowAnimations||t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.setOpacity(t.$survey,1),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion)),t._resizeMask(t.heightStepQuestion),t.opts.disableShowAnimations||t._animateBtns(),"function"==typeof(n=t.opts).onShow&&n.onShow({token:t.token}),"function"==typeof e?e():void 0})}}(this)))},i.prototype._showComment=function(e){return this.state="comment",exports.requestAnimationFrame(function(t){return function(){var n,i;return t._setScore(e),t.opts.disableShowCommentAnimations||t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey-t.heightStepQuestion-t.heightStepComment),t.opts.disableShowCommentAnimations||t.dom.transition(t.$surveyPowered,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$surveyPowered,-(t.heightSurvey-t.heightStepQuestion-t.heightStepComment)),t._resizeMask(t.heightStepQuestion+t.heightStepComment),i=t.opts.disableShowCommentAnimations?0:1e3*t.transitionDuration,exports.utils.timeout(i,function(){return t.$stepComment.querySelector(".delighted-web-comment-box").focus()}),t._pseudoFocusCommentBox(),"function"==typeof(n=t.opts).onShowComment?n.onShowComment():void 0}}(this))},i.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="question",exports.requestAnimationFrame(function(e){return function(){return e.$stepComment.querySelector(".delighted-web-comment-box").blur(),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion),e.dom.transition(e.$surveyPowered,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion)),
e._resizeMask(e.heightStepQuestion)}}(this)))},i.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(e){return function(){var t,n;return e.dom.setOpacity(e.$stepQuestion,1),e.dom.setOpacity(e.$stepComment,1),e.dom.setOpacity(e.$stepThanks,0),t=e.$stepThanks.querySelector(".delighted-web-thanks"),n=t.classList.contains("delighted-web-thanks-custom"),e.dom.setStyle(t,"display","block"),e._measure(),e.dom.transition(e.$survey,"none"),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepQuestion-e.heightStepComment),e.dom.transition(e.$surveyPowered,"none"),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepQuestion-e.heightStepComment)),n||(e.dom.setOpacity(e.$surveyPowered,1),e.dom.setOpacity(e.$surveyClose,1)),exports.requestAnimationFrame(function(){if(e.dom.transition(e.$stepQuestion,"opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" 0s"),e.dom.setOpacity(e.$stepQuestion,0),e.dom.transition(e.$stepComment,"opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" 0s"),e.dom.setOpacity(e.$stepComment,0),e.dom.transition(e.$stepThanks,"opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" 0s"),e.dom.setOpacity(e.$stepThanks,1),e.dom.translateY(e.$stepThanks,-(e.heightStepQuestion+e.heightStepComment)),e.dom.transition(e.$survey,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$survey,e.heightSurvey-e.heightStepThanks),e.dom.transition(e.$surveyPowered,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$surveyPowered,-(e.heightSurvey-e.heightStepThanks)),e._resizeMask(e.heightSurvey-e.heightStepQuestion-e.heightStepComment),!n)return e.dom.transition(e.$surveyPowered,"opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" 0s"),e.dom.setOpacity(e.$surveyPowered,0),e.dom.transition(e.$surveyClose,"opacity "+e.opacityTransitionDuration+"s "+e.opacityTransitionEasing+" 0s"),e.dom.setOpacity(e.$surveyClose,0),exports.utils.timeout(1e3*(e.transitionDuration+e.autoHideDelay),function(){return e.hide({source:"auto_hide"})})})}}(this))},i.prototype._injectTemplate=function(){return i.__super__._injectTemplate.apply(this,arguments),this.dom.setStyle(this.$survey,"display","block"),this.$root.classList.add("delighted-web-desktop")},i.prototype._setupEventHandlers=function(){var e,t;return i.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$root.querySelector(".delighted-web-label-question"),"click",function(e){return function(){return exports.requestAnimationFrame(function(){return e._resetBtnsAnimation(),exports.requestAnimationFrame(function(){return e._animateBtns()})})}}(this)),e=this.$stepComment.querySelector(".delighted-web-comment-box"),t=this.$root.querySelector(".delighted-web-label-comment"),this.dom.bindEvent(e,"input",function(n){return function(){var i;return i=""===e.value?"block":"none",n.dom.setStyle(t,"display",i)}}(this))},i.prototype._resetBtnsAnimation=function(){var e,t,n,i,r,o,s;if(this.config.BROWSER_SUPPORT.features.animation){for(t=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),n=t.length,s=[],r=i=0,o=t.length;i<o;r=++i)e=t[r],s.push(this.dom.setStyle(e,"animation","none"));return s}},i.prototype._animateBtns=function(){var e,t,n,i,r,o,s,a,u,l;if(this.config.BROWSER_SUPPORT.features.animation){for(t=this.$stepQuestion.querySelectorAll(".delighted-web-question-score-number"),i=t.length,n=this.opts.buttonAnimationDirection,r=(.65*this.transitionDuration).toFixed(3),l=[],s=o=0,a=t.length;o<a;s=++o)e=t[s],u=n>0?s:i-s,l.push(this.dom.setStyle(e,"animation","delighted-web-btn-anim "+r+"s linear "+(u*r/(i-1)).toFixed(3)+"s 1 normal both"));return l}},i.prototype._autoSizeQuestionLabel=function(){var e,t,n,i;return n=this.$root.querySelector(".delighted-web-question .delighted-web-column"),e=this.$root.querySelector(".delighted-web-label-question"),t=e.cloneNode(!0),this.dom.setStyle(t,"position","absolute"),this.dom.setStyle(t,"white-space","nowrap"),this.dom.setStyle(t,"opacity","0"),e.parentNode.appendChild(t),i=t.offsetWidth,e.parentNode.removeChild(t),i<650?this.dom.setStyle(n,"max-width","none"):this.dom.clearInlineStyle(n,"max-width")},i}(exports.DisplayStrategy)}.call(this),function(){var e,t,n,i=function(e,t){return function(){return e.apply(t,arguments)}};e=0,t=1,n=function(){function n(){this.disengage=i(this.disengage,this),this.engage=i(this.engage,this),this.inferState=i(this.inferState,this),this.isEngaged=!1,this.originals={}}return n.prototype.inferState=function(n){return n.config.BROWSER_SUPPORT.platform.isIos&&n.windowHeight<.94*n.availHeight?e:t},n.prototype.engage=function(e){var n;if(!this.isEngaged)return n=e===t?"100px":"101vh",this.originals.bodyHeight=document.body.style.height,this.originals.bodyOverflow=document.body.style.overflow,document.body.style.height=n,document.body.style.overflow="hidden",this.originals.htmlHeight=document.documentElement.style.height,this.originals.htmlOverflow=document.documentElement.style.overflow,document.documentElement.style.height=n,document.documentElement.style.overflow="hidden",this.originals.windowScrollX=scrollX,this.originals.windowScrollY=scrollY,window.scrollX=0,window.scrollY=0,this.isEngaged=!0},n.prototype.disengage=function(){if(this.isEngaged)return document.body.style.height=this.originals.bodyHeight,document.body.style.overflow=this.originals.bodyOverflow,document.documentElement.style.height=this.originals.htmlHeight,document.documentElement.style.overflow=this.originals.htmlOverflow,scrollTo(this.originals.windowScrollX,this.originals.windowScrollY),this.isEngaged=!1},n}(),exports.ScrollLock=new n}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}},t=function(e,t){function i(){this.constructor=e}for(var r in t)n.call(t,r)&&(e[r]=t[r]);return i.prototype=t.prototype,e.prototype=new i,e.__super__=t.prototype,e},n={}.hasOwnProperty;exports.DisplayStrategyTouch=function(n){function i(){this._optimizeCommentBoxHeight=e(this._optimizeCommentBoxHeight,this),this._computeMaskHeight=e(this._computeMaskHeight,this),this._inferScrollState=e(this._inferScrollState,this),this._setupEventHandlers=e(this._setupEventHandlers,this),this._measure=e(this._measure,this),this._injectTemplate=e(this._injectTemplate,this),this._hideToast=e(this._hideToast,this),this._showThanks=e(this._showThanks,this),this._hideComment=e(this._hideComment,this),this._showComment=e(this._showComment,this),this._hideQuestion=e(this._hideQuestion,this),this._showQuestion=e(this._showQuestion,this),this._showSurvey=e(this._showSurvey,this),this._hideSurvey=e(this._hideSurvey,this),this._showToast=e(this._showToast,this),this.hide=e(this.hide,this),this.show=e(this.show,this),i.__super__.constructor.apply(this,arguments),this.autoHideDelay=1.5*this.timingFactor}return t(i,n),i.prototype.show=function(){return this._getTemplate(function(e){return function(t){return e._injectTemplate(t),e._measure(),e._setupEventHandlers(),e._showToast()}}(this))},i.prototype.hide=function(e){return null==e&&(e={}),this.state="hidden",exports.requestAnimationFrame(function(t){return function(){var n;return t.opts.disableScrollLock||exports.ScrollLock.disengage(),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey),t._remove(),"function"==typeof(n=t.opts).onHide?n.onHide({token:t.token,source:e.source}):void 0}}(this))},i.prototype._showToast=function(){return this.state="toast",exports.requestAnimationFrame(function(e){return function(){return e.dom.setStyle(e.$root,"visibility","visible"),e.dom.translateY(e.$toast,e.heightToast),exports.requestAnimationFrame(function(){var t;return e.opts.disableShowAnimations||e.dom.transition(e.$toast,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$toast,0),e._resizeMask(e.heightToast),"function"==typeof(t=e.opts).onShow?t.onShow({token:e.token}):void 0})}}(this))},i.prototype._hideSurvey=function(e){return window.clearTimeout(this.showSurveyTimeout),this.surveyShowing=!1,exports.requestAnimationFrame(function(t){return function(){return t.dom.setStyle(t.$toast,"display","block"),t.dom.translateY(t.$toast,0),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,t.heightSurvey),t._resizeMask(t.heightToast),"function"==typeof e?e():void 0}}(this))},i.prototype._showSurvey=function(e){return this.surveyShowing?"function"==typeof e?e():void 0:(this.surveyShowing=!0,exports.requestAnimationFrame(function(t){return function(){var n;return n=t._inferScrollState(),t.dom.setStyle(t.$survey,"display","block"),t._measure(),t.dom.transition(t.$toast,"none"),t.dom.translateY(t.$toast,0),t.dom.transition(t.$survey,"none"),t.dom.translateY(t.$survey,t.heightSurvey),exports.requestAnimationFrame(function(){var i;return t.dom.transition(t.$toast,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$toast,t.heightToast),t.dom.transition(t.$survey,"transform "+t.transitionDuration+"s "+t.transitionEasing+" 0s"),t.dom.translateY(t.$survey,0),t._disableMask(),i=1e3*t.transitionDuration,t.showSurveyTimeout=exports.utils.timeout(i,function(){return t.opts.disableScrollLock||exports.ScrollLock.engage(n),t.dom.setStyle(t.$toast,"display","none"),"function"==typeof e?e():void 0})})}}(this)))},i.prototype._showQuestion=function(e){return this.state="question",exports.requestAnimationFrame(function(t){return function(){return t.$surveyInner.classList.add("delighted-web-is-questioning"),t.$surveyInner.classList.remove("delighted-web-is-commenting"),t.$surveyInner.classList.remove("delighted-web-is-thanking"),t.$stepQuestion.classList.add("delighted-web-is-shown"),t.$stepComment.classList.remove("delighted-web-is-shown"),t.$stepThanks.classList.remove("delighted-web-is-shown"),t.dom.setStyle(t.$stepQuestion,"display","flex"),t.dom.setStyle(t.$stepComment,"display","none"),t.dom.setStyle(t.$stepThanks,"display","none"),t._showSurvey(e)}}(this))},i.prototype._hideQuestion=function(){return"question"!==this.state?void this.config.LOGGER.error("Must be in 'question' state to hide question (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(e){return function(){return e.$surveyInner.classList.remove("delighted-web-is-questioning"),e.$surveyInner.classList.remove("delighted-web-is-commenting"),e.$surveyInner.classList.remove("delighted-web-is-thanking"),e.$stepQuestion.classList.remove("delighted-web-is-shown"),e.$stepComment.classList.remove("delighted-web-is-shown"),e.$stepThanks.classList.remove("delighted-web-is-shown"),e.dom.setStyle(e.$stepQuestion,"display","none"),e.dom.setStyle(e.$stepComment,"display","none"),e.dom.setStyle(e.$stepThanks,"display","none")}}(this)))},i.prototype._showComment=function(e){return this.state="comment",this._setScore(e),this._optimizeCommentBoxHeight(),this.dom.setStyle(this.$stepQuestion,"display","none"),this.dom.setStyle(this.$stepComment,"display","block"),this.dom.setStyle(this.$stepThanks,"display","none"),this._measure(),this.$surveyInner.classList.remove("delighted-web-is-questioning"),this.$surveyInner.classList.add("delighted-web-is-commenting"),this.$surveyInner.classList.remove("delighted-web-is-thanking"),this.$stepComment.querySelector(".delighted-web-comment-box").focus(),this._showSurvey(this.opts.onShowComment)},i.prototype._hideComment=function(){return"comment"!==this.state?void this.config.LOGGER.error("Must be in 'comment' state to hide comment (was '"+this.state+"')."):(this.state="toast",this._hideSurvey(function(e){return function(){return e.$surveyInner.classList.remove("delighted-web-is-questioning"),e.$surveyInner.classList.remove("delighted-web-is-commenting"),e.$surveyInner.classList.remove("delighted-web-is-thanking"),e.$stepQuestion.classList.remove("delighted-web-is-shown"),e.$stepComment.classList.remove("delighted-web-is-shown"),e.$stepThanks.classList.remove("delighted-web-is-shown"),e.dom.setStyle(e.$stepQuestion,"display","none"),e.dom.setStyle(e.$stepComment,"display","none"),e.dom.setStyle(e.$stepThanks,"display","none")}}(this)))},i.prototype._showThanks=function(){return this.state="thanks",exports.requestAnimationFrame(function(e){return function(){var t,n;if(e.dom.setStyle(e.$stepQuestion,"display","none"),e.dom.setStyle(e.$stepComment,"display","none"),e.dom.setStyle(e.$stepThanks,"display","flex"),e.$surveyInner.classList.remove("delighted-web-is-commenting"),e.$surveyInner.classList.add("delighted-web-is-thanking"),t=e.$stepThanks.querySelector(".delighted-web-thanks"),n=t.classList.contains("delighted-web-thanks-custom"),e.dom.setStyle(t,"display","block"),e._measure(),!n)return e.dom.setOpacity(e.$surveyClose,1),exports.requestAnimationFrame(function(){return e.dom.transition(e.$surveyClose,"opacity "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.setOpacity(e.$surveyClose,0),exports.utils.timeout(1e3*(e.transitionDuration+e.autoHideDelay),function(){return e.hide({source:"auto_hide"})})})}}(this))},i.prototype._hideToast=function(){return this.state="initial",exports.requestAnimationFrame(function(e){return function(){return e.dom.transition(e.$toast,"transform "+e.transitionDuration+"s "+e.transitionEasing+" 0s"),e.dom.translateY(e.$toast,e.heightToast)}}(this))},i.prototype._injectTemplate=function(){return i.__super__._injectTemplate.apply(this,arguments),this.$toast=this.$root.querySelector(".delighted-web-toast"),this.$toastClose=this.$root.querySelector(".delighted-web-toast-close"),this.dom.setStyle(this.$toast,"display","block"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyInner,"margin-top",this.opts.offsets.top+"px"),this.opts.offsets.top&&this.dom.setStyle(this.$surveyClose,"margin-top",this.opts.offsets.top+"px"),"asc"===this.opts.mobileScoreOrdering&&this.dom.reverseChildren(this.$root.querySelector(".delighted-web-question-score-numbers")),this.$root.classList.add("delighted-web-touch")},i.prototype._measure=function(){return i.__super__._measure.apply(this,arguments),this.widthToast=this.$toast.offsetWidth,this.widthToastClose=this.$toastClose.offsetWidth,this.heightToast=this.$toast.offsetHeight},i.prototype._setupEventHandlers=function(){return i.__super__._setupEventHandlers.apply(this,arguments),this.dom.bindEvent(this.$toast,"click",function(e){return function(t){var n;return e._measure(),t.clientX<e.widthToast-e.widthToastClose?e._showQuestion():(e._hideToast(),e._remove(),"function"==typeof(n=e.opts).onHide?n.onHide({token:e.token,source:"toast_close"}):void 0)}}(this)),this.dom.bindEvent(window,"orientationchange",function(e){return function(){return e._optimizeCommentBoxHeight()}}(this)),this.dom.bindEvent(window,"resize",this._optimizeCommentBoxHeight())},i.prototype._inferScrollState=function(){return exports.ScrollLock.inferState({config:this.config,windowHeight:this.dom.calcWindowHeight(),availHeight:this.dom.calcScreenHeight()})},i.prototype._computeMaskHeight=function(){return i.__super__._computeMaskHeight.apply(this,arguments)-50},i.prototype._optimizeCommentBoxHeight=function(){var e;return e=function(e){return function(){var t,n,i,r,o,s,a,u,l,c,d,h;return t=24,l=6,d=e.dom.calcWindowHeight(),h=e.dom.calcWindowWidth(),u=2*t,n=6*t,a=10*t,i=e.config.BROWSER_SUPPORT.platform.isIpad,r=e.config.BROWSER_SUPPORT.platform.isIphone,o=e.config.BROWSER_SUPPORT.platform.isIpod,s="portrait"===e.dom.detectOrientation(),c=i?s?Math.floor(.4*d):Math.floor(.2*d):r||o?s?Math.floor(.3*d):Math.floor(.1*d):n,c-=c%t,Math.min(a,Math.max(u,c))+2*l}}(this),this.dom.setStyle(this.$stepComment.querySelector(".delighted-web-comment-box"),"height",e()+"px")},i}(exports.DisplayStrategy)}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this.updateSurveyTemplate=t(this.updateSurveyTemplate,this),this.toggleStateForPreview=t(this.toggleStateForPreview,this),this.displayStrategy=e}return e.prototype.toggleStateForPreview=function(e,t,n){return null==n&&(n={}),this.displayStrategy.toggleStateForPreview(e,t,n)},e.prototype.updateSurveyTemplate=function(e){return this.displayStrategy.config.SURVEY_TEMPLATE=e},e}(),exports.showSurvey=function(t,n,i){var r,o,s,a,u,l,c;return t.LOGGER.info("Survey showing."),r=null,c=function(e,n){var i;return i=exports.clone(n||{}),t.PREVIEW_MODE&&(i.displayStrategy=r),"function"==typeof e?e(i):void 0},u=function(e){return t.LOGGER.info("Survey shown."),t.STATE_MANAGER.getLastSurveyedToken()!==e.token&&t.STATE_MANAGER.setLastSurveyedTimestamp(exports.utils.getCurrentTimestamp(),{token:e.token}),t.TELEMETRY.instrument("SURVEY_SHOWN"),c(i.onShow)},l=function(){return t.LOGGER.debug("Survey shown comment."),t.TELEMETRY.instrument("SURVEY_SHOWN_COMMENT"),c(i.onShowComment)},a=function(e){return t.LOGGER.debug("Survey responded."),t.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:e.token}),t.TELEMETRY.instrument("SURVEY_RESPONDED",{score:e.score}),c(i.onRespond,{score:e.score})},o=function(){return t.LOGGER.debug("Survey commented."),t.TELEMETRY.instrument("SURVEY_COMMENTED"),c(i.onComment)},s=function(e){return t.LOGGER.info("Survey hidden."),"toast_close"!==e.source&&"close"!==e.source||t.STATE_MANAGER.setLastRespondedTimestamp(exports.utils.getCurrentTimestamp(),{token:e.token}),t.TELEMETRY.instrument("SURVEY_HIDDEN",{source:e.source}),t.TELEMETRY.flush(),c(i.onHide)},exports.domready(function(){var c,d,h;return d={params:n,onShow:u,onShowComment:l,onRespond:a,onComment:o,onHide:s,buttonAnimationDirection:i.buttonAnimationDirection,disableShowAnimations:i.disableShowAnimations,disableShowCommentAnimations:i.disableShowCommentAnimations,disableScrollLock:i.disableScrollLock,offsets:i.offsets,mobileScoreOrdering:i.mobileScoreOrdering},h="touch"===t.FORCE_DISPLAY_STRATEGY||t.BROWSER_SUPPORT.platform.isTouch,c=h?new exports.DisplayStrategyTouch(t,d):new exports.DisplayStrategyDesktop(t,d),r=new e(c),c.show()})}}.call(this),function(e,t){var n=e.parse,i=[1,4,5,6,7,10,11],r=function(r){var o,s,a=0;if(s=/^(\d{4}|[+\-]\d{6})(?:-(\d{2})(?:-(\d{2}))?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(?:\.(\d{3}))?)?(?:(Z)|([+\-])(\d{2})(?::(\d{2}))?)?)?$/.exec(r)){for(var u,l=0;u=i[l];++l)s[u]=+s[u]||0;s[2]=(+s[2]||1)-1,s[3]=+s[3]||1,"Z"!==s[8]&&s[9]!==t&&(a=60*s[10]+s[11],"+"===s[9]&&(a=0-a)),o=e.UTC(s[1],s[2],s[3],s[4],s[5]+a,s[6],s[7])}else o=n?n(r):NaN;return o};exports.iso8601={parse:r}}(Date),function(){exports.generateProperties=function(e,t,n){var i,r,o,s,a,u,l;return u=exports.clone(t.properties||{}),i=function(t){var n,i;return i=t.timeSinceFirstSeen,n=i>1e3*e.RETURN_DELAY,e.LOGGER.debug("Returning visitor:",n,"(~"+i+" ms since first seen)"),n},l=e.PREFIX_PROPERTIES?"Delighted ":"",null==u[r=l+"Page"]&&(u[r]=document.title),null==u[o=l+"Page URL"]&&(u[o]=location.href),null==u[s=l+"Referrer URL"]&&(u[s]=document.referrer),i(n)&&null==u[a=l+"Visitor Type"]&&(u[a]="Returning"),u._delighted_user_agent=navigator.userAgent,e.IS_TEST&&(u._delighted_test="1"),n.token&&(u._delighted_survey_request_token=n.token),u}}.call(this),function(){exports.checkSurveyEligibility=function(e,t){var n,i,r,o,s,a,u,l,c,d,h,p,f,m,g,y,v,_,b;return e.TELEMETRY.instrument("CHECKING_ELIGIBILITY"),n=exports.utils.getCurrentTimestamp(),o=function(e,t){var n,i;return n=null!=e.createdAt&&exports.iso8601.parse(e.createdAt),i="number"==typeof n&&!isNaN(n),i?Math.min(n,t):t},r=function(t,n){var i,r,o,s;o=exports.generateProperties(e,t,n),r={};for(i in o)s=o[i],r[i]=s;return t.email&&(r.email=t.email),t.name&&(r.name=t.name),r},_=function(e){return Math.random()<=e.sampleFactor},s=1e3*t.initialDelay,y=t.recurringPeriod?1e3*t.recurringPeriod:e.NEVER_FUTURE_TIMESTAMP,d=1e3*t.minSurveyInterval,h=1e3*t.minTimeForDisplay,i=e.STATE_MANAGER.getSetFirstSeenTimestamp(n),a=o(t,i),l=e.STATE_MANAGER.getLastSurveyedTimestamp()||e.NEVER_PAST_TIMESTAMP,c=e.STATE_MANAGER.getLastSurveyedToken(),u=e.STATE_MANAGER.getLastRespondedTimestamp()||e.NEVER_PAST_TIMESTAMP,b=n-i,m=t.forceDisplay?n:(p=Math.max(l,a),f=l>e.NEVER_PAST_TIMESTAMP?y:s,p+f),m=Math.max(m,l+d),e.TELEMETRY.instrument("ELIGIBILITY_TIMESTAMPS",{firstSeenTimestamp:i,initialTimestamp:a,lastSurveyTimestamp:l,nextSurveyTimestamp:m}),v=delighted.wasEligible?{isEligible:!1,reason:"person has already been surveyed during this session"}:"m5KZudle4UrncwrN"===e.WRITE_KEY&&!t.disableScrollLock&&/file/.test(location.protocol)?{isEligible:!1,reason:"configuration is unsupported"}:e.IS_TEST?{isEligible:!0,reason:"test mode is enabled",params:r(t,{timeSinceFirstSeen:b}),delay:0}:n-l<h&&u<l&&c?{isEligible:!0,isRedisplay:!0,reason:"person has an active survey (valid for another "+Math.round(Math.max(0,h-n+l)/1e3)+" seconds)",params:r(t,{timeSinceFirstSeen:b,token:c}),delay:0}:m<=n?_(t)?e.PLAN_LIMIT_EXHAUSTED?{isEligible:!1,reason:"although person is eligible, and was sampled (rate: "+100*t.sampleFactor+"%), plan survey limit is exhausted",exhausted:!0}:{isEligible:!0,reason:"person is eligible, and was sampled (rate: "+100*t.sampleFactor+"%)",params:r(t,{timeSinceFirstSeen:b}),delay:1e3*t.minTimeOnPage}:{isEligible:!1,reason:"although person is eligible, they were not sampled (rate: "+100*t.sampleFactor+"%)"}:(g=m>=e.NEVER_FUTURE_TIMESTAMP?"person has already been surveyed and recurring surveys are not configured":"person is not eligible until "+new Date(m),{isEligible:!1,reason:g}),v.isEligible&&(delighted.wasEligible=!0),v}}.call(this),function(){var e=new RegExp("bot|crawl|spider|borg|yahoo|slurp|archiver|netresearch|lycos|scooter  |altavista|teoma|oegp|charlotte|http client|htdig|ichiro|mogimogi|larbin|pompos|scrubby  |searchsight|semanticdiscovery|snappy|speedy|voila|vortex|voyager|zao|zeal|dataparksearch  |findlinks|yottaamonitor|browsermob|httpmonitor|bingpreview|pagepeeker|webthumb|url2png|zooshot  |gomeza|google sketchup|read later|pingdom|facebook|rackspace|scan|link|ezine|preview  |dig|tarantula|urllib|jakarta|wget|rget|monitor|libwww|moozilla|seer|spice|snoopy|feedfetcher  |google wireless transcoder|curl|wordpress|java|netfront|archive|xenu|feed|appmanager|covario  |perl|host|lwp|page speed|ptst|digext|nutch|sleuth|yottaamonitor","i");exports.isBot=function(t){return e.test(t)}}(),function(e,t,n){function i(e,t){return typeof e===t}function r(){var e,t,n,r,o,s,a;for(var u in y)if(y.hasOwnProperty(u)){if(e=[],t=y[u],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(r=i(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)s=e[o],a=s.split("."),1===a.length?_[a[0]]=r:(!_[a[0]]||_[a[0]]instanceof Boolean||(_[a[0]]=new Boolean(_[a[0]])),_[a[0]][a[1]]=r),w.push((r?"":"no-")+a.join("-"))}}function o(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):C?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function s(){var e=t.body;return e||(e=o(C?"svg":"body"),e.fake=!0),e}function a(e,n,i,r){var a,u,l,c,d="modernizr",h=o("div"),p=s();if(parseInt(i,10))for(;i--;)l=o("div"),l.id=r?r[i]:d+(i+1),h.appendChild(l);return a=o("style"),a.type="text/css",a.id="s"+d,(p.fake?p:h).appendChild(a),p.appendChild(h),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(t.createTextNode(e)),h.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",c=T.style.overflow,T.style.overflow="hidden",T.appendChild(p)),u=n(h,e),p.fake?(p.parentNode.removeChild(p),T.style.overflow=c,T.offsetHeight):h.parentNode.removeChild(h),!!u}function u(e,t){return!!~(""+e).indexOf(t)}function l(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function c(e,t){return function(){return e.apply(t,arguments)}}function d(e,t,n){var r;for(var o in e)if(e[o]in t)return n===!1?e[o]:(r=t[e[o]],i(r,"function")?c(r,n||t):r);return!1}function h(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function p(t,i){var r=t.length;if("CSS"in e&&"supports"in e.CSS){for(;r--;)if(e.CSS.supports(h(t[r]),i))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];r--;)o.push("("+h(t[r])+":"+i+")");return o=o.join(" or "),a("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function f(e,t,r,s){function a(){d&&(delete A.style,delete A.modElem)}if(s=!i(s,"undefined")&&s,!i(r,"undefined")){var c=p(e,r);if(!i(c,"undefined"))return c}for(var d,h,f,m,g,y=["modernizr","tspan","samp"];!A.style&&y.length;)d=!0,A.modElem=o(y.shift()),A.style=A.modElem.style;for(f=e.length,h=0;h<f;h++)if(m=e[h],g=A.style[m],u(m,"-")&&(m=l(m)),A.style[m]!==n){if(s||i(r,"undefined"))return a(),"pfx"!=t||m;try{A.style[m]=r}catch(e){}if(A.style[m]!=g)return a(),"pfx"!=t||m}return a(),!1}function m(e,t,n,r,o){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+E.join(s+" ")+s).split(" ");return i(t,"string")||i(t,"undefined")?f(a,t,r,o):(a=(e+" "+P.join(s+" ")+s).split(" "),d(a,t,n))}function g(e,t,i){return m(e,n,n,t,i)}var y=[],v={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){y.push({name:e,fn:t,options:n})},addAsyncTest:function(e){y.push({name:null,fn:e})}},_=function(){};_.prototype=v,_=new _,_.addTest("cookies",function(){try{t.cookie="cookietest=1";var e=t.cookie.indexOf("cookietest=")!=-1;return t.cookie="cookietest=1; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch(e){return!1}}),_.addTest("cors","XMLHttpRequest"in e&&"withCredentials"in new XMLHttpRequest),_.addTest("json","JSON"in e&&"parse"in JSON&&"stringify"in JSON),_.addTest("queryselector","querySelector"in t&&"querySelectorAll"in t);var b=!1;try{b="WebSocket"in e&&2===e.WebSocket.CLOSING}catch(e){}_.addTest("websockets",b);var w=[],x=v._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];v._prefixes=x;var T=t.documentElement,k="CSS"in e&&"supports"in e.CSS,S="supportsCSS"in e;_.addTest("supports",k||S);var C="svg"===T.nodeName.toLowerCase(),M=function(){function e(e,t){var r;return!!e&&(t&&"string"!=typeof t||(t=o(t||"div")),e="on"+e,r=e in t,!r&&i&&(t.setAttribute||(t=o("div")),t.setAttribute(e,""),r="function"==typeof t[e],t[e]!==n&&(t[e]=n),t.removeAttribute(e)),r)}var i=!("onblur"in t.documentElement);return e}();v.hasEvent=M;var L=v.testStyles=a;_.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var i=["@media (",x.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");L(i,function(e){n=9===e.offsetTop})}return n}),_.addTest("oninput",function(){var n,i=o("input");if(i.setAttribute("oninput","return"),M("oninput",T)||"function"==typeof i.oninput)return!0;try{var r=t.createEvent("KeyboardEvent");n=!1;var s=function(e){n=!0,e.preventDefault(),e.stopPropagation()};r.initKeyEvent("keypress",!0,!0,e,!1,!1,!1,!1,0,"e".charCodeAt(0)),T.appendChild(i),i.addEventListener("input",s,!1),i.focus(),i.dispatchEvent(r),i.removeEventListener("input",s,!1),T.removeChild(i)}catch(e){n=!1}return n});var D="Moz O ms Webkit",E=v._config.usePrefixes?D.split(" "):[];v._cssomPrefixes=E;var P=v._config.usePrefixes?D.toLowerCase().split(" "):[];v._domPrefixes=P;var N={elem:o("modernizr")};_._q.push(function(){delete N.elem});var A={style:N.elem.style};_._q.unshift(function(){delete A.style}),v.testAllProps=m,v.testAllProps=g,_.addTest("cssanimations",g("animationName","a",!0)),_.addTest("csstransitions",g("transition","all",!0)),_.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=_._config.usePrefixes;if(e&&(!t||"webkitPerspective"in T.style)){var n,i="#modernizr{width:0;height:0}";_.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",L(i+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),r(),delete v.addTest,delete v.addAsyncTest;for(var j=0;j<_._q.length;j++)_._q[j]();exports.Modernizr=_}(window,document),function(){exports.detectBrowserSupport=function(){var e,t,n,i,r,o;return e=document.createElement("div"),t=document.createElement("textarea"),o=navigator.userAgent,i=/PhantomJS/.test(window.navigator.userAgent),n={cookies:exports.Modernizr.cookies,animation:exports.Modernizr.cssanimations,transition:exports.Modernizr.csstransitions,transform:exports.Modernizr.csstransforms3d,getComputedStyle:!!("getComputedStyle"in window),cors:exports.Modernizr.cors,json:exports.Modernizr.json,webSocket:exports.Modernizr.websockets,inputEvent:exports.Modernizr.oninput||!!("oninput"in t),querySelector:exports.Modernizr.queryselector,styleRemoveProperty:!!("removeProperty"in e.style)},r={isBot:exports.isBot(o),isTouch:exports.Modernizr.touchevents&&!i,isIos:/(iPad|iPod|iPhone)/.test(o),isIpad:/iPad/.test(o),isIpod:/iPod/.test(o),isIphone:/iPhone/.test(o)},{features:n,platform:r}}}.call(this),function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};exports.Telemetry=function(){function t(t){this._addEventListeners=e(this._addEventListeners,this),this.flush=e(this.flush,this),this.instrument=e(this.instrument,this),this.config=t,this.dom=new exports.DomHelpers(t),this.dataSetId=Math.random().toString(16).substring(2),this.data={dataSetId:this.dataSetId,telemetryVersion:n,events:[]},this._addEventListeners(),this.config.LOGGER.debug("Telemetry init.")}var n;return n=2,t.prototype.instrument=function(e,t){var n;return null==t&&(t={}),n=exports.clone(t),n.name=e,n.timestamp=(new Date).getTime(),n.treatments=this.config.EXPERIMENTS.treatments,this.data.events.push(n),"SURVEY_SHOWN"===e&&(this.shouldAutoFlushOnWindowUnload=!0),this.config.LOGGER.debug("Telemetry instrument:",e,n)},t.prototype.flush=function(){if(this.config.TELEMETRY_URL&&this.data.events.length>0)return this.config.LOGGER.debug("Telemetry flush:",this.data),exports.utils.ajaxSimpleCors({method:"POST",url:this.config.TELEMETRY_URL,body:{data:this.data},withCredentials:/^staging/.test(this.config.ENV),callback:function(e){return function(){return e.config.LOGGER.debug("Telemetry flushed.")}}(this)})},t.prototype._addEventListeners=function(){return this.dom.bindEvent(window,"beforeunload",function(e){return function(){e.instrument("WINDOW_BEFORE_UNLOAD"),e.shouldAutoFlushOnWindowUnload&&e.flush()}}(this))},t}()}.call(this),function(){var e,t=function(e,t){return function(){return e.apply(t,arguments)}};e=function(){function e(e){this._deserializeTimestampCookieValue=t(this._deserializeTimestampCookieValue,this),this._serializeTimestampCookieValue=t(this._serializeTimestampCookieValue,this),this._writeTimestampCookie=t(this._writeTimestampCookie,this),this._readTimestampCookie=t(this._readTimestampCookie,this),this.setLastRespondedTimestamp=t(this.setLastRespondedTimestamp,this),this.getLastRespondedTimestamp=t(this.getLastRespondedTimestamp,this),this.setLastSurveyedTimestamp=t(this.setLastSurveyedTimestamp,this),this.getLastSurveyedToken=t(this.getLastSurveyedToken,this),this.getLastSurveyedTimestamp=t(this.getLastSurveyedTimestamp,this),this.getSetFirstSeenTimestamp=t(this.getSetFirstSeenTimestamp,this),this.setFirstSeenTimestamp=t(this.setFirstSeenTimestamp,this),this.getFirstSeenTimestamp=t(this.getFirstSeenTimestamp,this),this.config=e}return e.prototype.getFirstSeenTimestamp=function(){var e;return e=this._readTimestampCookie(this.config.COOKIE_FIRST_SEEN_TIMESTAMP),null!=e?e.timestamp:void 0},e.prototype.setFirstSeenTimestamp=function(e,t){return this._writeTimestampCookie({name:this.config.COOKIE_FIRST_SEEN_TIMESTAMP,timestamp:e,metadata:t,expires:this.config.COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS}),e},e.prototype.getSetFirstSeenTimestamp=function(e,t){return this.getFirstSeenTimestamp()||this.setFirstSeenTimestamp(e,t)},e.prototype.getLastSurveyedTimestamp=function(){var e;return e=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=e?e.timestamp:void 0},e.prototype.getLastSurveyedToken=function(){var e;return e=this._readTimestampCookie(this.config.COOKIE_LAST_SURVEYED_TIMESTAMP),null!=e?e.metadata.token:void 0},e.prototype.setLastSurveyedTimestamp=function(e,t){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP,timestamp:e,metadata:t,expires:this.config.COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS}),e},e.prototype.getLastRespondedTimestamp=function(){var e;return e=this._readTimestampCookie(this.config.COOKIE_LAST_RESPONDED_TIMESTAMP),
null!=e?e.timestamp:void 0},e.prototype.setLastRespondedTimestamp=function(e,t){return this._writeTimestampCookie({name:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP,timestamp:e,metadata:t,expires:this.config.COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS}),e},e.prototype._readTimestampCookie=function(e){var t;if(t=exports.Cookies.get(e),null!=t)return this._deserializeTimestampCookieValue(t)},e.prototype._writeTimestampCookie=function(e){var t;return t=this._serializeTimestampCookieValue(e.timestamp,e.metadata),exports.Cookies.set(e.name,t,{expires:e.expires,domain:this.config.COOKIE_DOMAIN})},e.prototype._serializeTimestampCookieValue=function(e,t){return[e.toString(),JSON.stringify(t||{})].join(":")},e.prototype._deserializeTimestampCookieValue=function(e){var t,n,i;return n=e.split(":"),i=n.shift(),t=n.join(":")||"{}",{timestamp:new Date(parseInt(i,10)).getTime(),metadata:JSON.parse(t)}},e}(),exports.StateManager=e}.call(this),function(){var e;e=function(){function e(e,t){null==t&&(t={}),this.config=e,this.treatments=t.treatments||{}}return e}(),exports.Experiments=e}.call(this),function(){exports.loadDelightedLibrary=function(e){var t,n,i,r,o,s,a,u,l,c;if(n=window[e.NAME],!n.isInitialized){if(n.isInitialized=!0,u=exports.qs.parse(location.search.substring(1)),e.IS_TEST=n.isTest||/test/.test(u.delighted)||new RegExp(e.COOKIE_IS_TEST+"=1").test(document.cookie),e.IS_DEBUG=n.isDebug||/debug/.test(u.delighted)||new RegExp(e.COOKIE_IS_DEBUG+"=1").test(document.cookie),/touch/.test(u.delighted)&&(e.FORCE_DISPLAY_STRATEGY="touch"),e.COOKIE_DOMAIN="."+exports.topdomain(location.href),"."===e.COOKIE_DOMAIN&&(e.COOKIE_DOMAIN=null),a=n.logLevel||e.LOG_LEVEL||(e.IS_DEBUG?"debug":"info"),e.LOGGER=exports.utils.buildLogger("[Delighted]",a),e.LOGGER.debug("Configuration:",e),!e.IS_TEST&&!e.ACTIVE)return void e.LOGGER.warn('Currently turned off. To turn it on, sign in to Delighted, go to Settings > Integrations > Web and click "Turn on". If you turned it on recently, you may need to wait a few minutes.');if(e.BROWSER_SUPPORT=exports.detectBrowserSupport(),e.LOGGER.debug("Browser support:",e.BROWSER_SUPPORT),o=!e.BROWSER_SUPPORT.platform.isBot&&e.BROWSER_SUPPORT.features.querySelector&&e.BROWSER_SUPPORT.features.styleRemoveProperty&&e.BROWSER_SUPPORT.features.json&&e.BROWSER_SUPPORT.features.cors&&e.BROWSER_SUPPORT.features.inputEvent&&e.BROWSER_SUPPORT.features.cookies,e.EXPERIMENTS=new exports.Experiments(e,{treatments:exports.clone(e.OVERRIDE_EXPERIMENT_TREATMENTS||{})}),e.TELEMETRY=new exports.Telemetry(e),e.TELEMETRY.instrument("TELEMETRY_INIT",{browserSupport:e.BROWSER_SUPPORT,cookieDomain:e.COOKIE_DOMAIN,isTest:e.IS_TEST,isDebug:e.IS_DEBUG,logLevel:a}),!o)return void e.LOGGER.warn("Unsupported browser.");if(!e.IS_TEST&&!e.ENABLE_TOUCH_PLATFORMS&&e.BROWSER_SUPPORT.platform.isTouch)return void e.LOGGER.warn("Touch platforms not enabled.");for(e.STATE_MANAGER=new exports.StateManager(e),n.survey=function(t){var n;return e.LOGGER.debug("Survey called."),e.TELEMETRY.instrument("SURVEY_CALLED"),t=exports.clone(t||{}),null==t.initialDelay&&(t.initialDelay=e.DEFAULT_INITIAL_DELAY),null==t.recurringPeriod&&(t.recurringPeriod=e.DEFAULT_RECURRING_PERIOD),null==t.forceDisplay&&(t.forceDisplay=e.DEFAULT_FORCE_DISPLAY),null==t.minTimeOnPage&&(t.minTimeOnPage=e.DEFAULT_MIN_TIME_ON_PAGE),null==t.minTimeForDisplay&&(t.minTimeForDisplay=e.DEFAULT_MIN_TIME_FOR_DISPLAY),null==t.minSurveyInterval&&(t.minSurveyInterval=e.DEFAULT_MIN_SURVEY_INTERVAL),null==t.sampleFactor&&(t.sampleFactor=e.DEFAULT_SAMPLE_FACTOR),null==t.buttonAnimationDirection&&(t.buttonAnimationDirection="stars_five"===e.DEFAULT_SURVEY_TYPE.id?1:-1),null==t.disableShowAnimations&&(t.disableShowAnimations=!1),null==t.disableShowCommentAnimations&&(t.disableShowCommentAnimations=!1),null==t.disableScrollLock&&(t.disableScrollLock=!1),null==t.offsets&&(t.offsets={}),"m5KZudle4UrncwrN"===e.WRITE_KEY&&/file/.test(location.protocol)&&(t.initialDelay=e.DEFAULT_INITIAL_DELAY,t.forceDisplay=e.DEFAULT_FORCE_DISPLAY,t.minTimeOnPage=60),n=exports.checkSurveyEligibility(e,t),e.LOGGER.debug("Survey options:",t),e.LOGGER.debug("Survey eligibility:",n),e.TELEMETRY.instrument("ELIGIBILITY_RESULT",{inputOpts:t,eligibility:n}),n.isEligible?(e.LOGGER.info("Survey will show because "+n.reason+"..."),exports.utils.timeout(n.delay,function(){return exports.showSurvey(e,n.params,{onShow:t.onShow,onShowComment:t.onShowComment,onRespond:t.onRespond,onComment:t.onComment,onHide:t.onHide,buttonAnimationDirection:t.buttonAnimationDirection,disableShowAnimations:t.disableShowAnimations||n.isRedisplay,disableShowCommentAnimations:t.disableShowCommentAnimations,disableScrollLock:t.disableScrollLock,offsets:t.offsets,mobileScoreOrdering:t.mobileScoreOrdering})})):e.LOGGER.info("Survey not shown because "+n.reason+".")},n.reset=function(){return e.LOGGER.debug("Reset called."),e.TELEMETRY.instrument("RESET_CALLED"),exports.Cookies.remove(e.COOKIE_FIRST_SEEN_TIMESTAMP,{domain:e.COOKIE_DOMAIN}),exports.Cookies.remove(e.COOKIE_LAST_SURVEYED_TIMESTAMP,{domain:e.COOKIE_DOMAIN})},(e.IS_TEST||/reset/.test(u.delighted))&&n.reset(),c=[],r=0,s=n.length;r<s;r++)l=n[r],i=l[0],t=l[1],e.LOGGER.debug("Dequeued:",i,t),c.push(n[i].apply(n,t));return c}}}.call(this);
              exports.loadDelightedLibrary({"ENV":"production","ACTIVE":true,"LOG_LEVEL":null,"NAME":"delighted","WRITE_KEY":"Dk30CC86ba0nATlK","PREVIEW_MODE":false,"DEFAULT_SURVEY_TYPE":{"id":"nps","human_name_short":"NPS","aggregate_score_name_short":"NPS","aggregate_score_range":[-100,100],"groups":[{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","smiley_name":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters","baked_score":false,"color_bg":"#bed900","color_fg":"#a1b800"},{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","smiley_name":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives","baked_score":false,"color_bg":"#e0e0d9","color_fg":"#90908f"},{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"}],"groups_by_score":{"9":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","smiley_name":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters","baked_score":false,"color_bg":"#bed900","color_fg":"#a1b800"},"10":{"id":"promoter","id_pluralized":"promoters","id_dasherized":"promoter","smiley_name":"promoter","scores_gte":9,"scores_lte":10,"human_name":"promoter","human_name_pluralized":"promoters","human_name_titleized":"Promoter","human_name_titleized_pluralized":"Promoters","baked_score":false,"color_bg":"#bed900","color_fg":"#a1b800"},"7":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","smiley_name":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives","baked_score":false,"color_bg":"#e0e0d9","color_fg":"#90908f"},"8":{"id":"passive","id_pluralized":"passives","id_dasherized":"passive","smiley_name":"passive","scores_gte":7,"scores_lte":8,"human_name":"passive","human_name_pluralized":"passives","human_name_titleized":"Passive","human_name_titleized_pluralized":"Passives","baked_score":false,"color_bg":"#e0e0d9","color_fg":"#90908f"},"0":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"1":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"2":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"3":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"4":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"5":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"},"6":{"id":"detractor","id_pluralized":"detractors","id_dasherized":"detractor","smiley_name":"detractor","scores_gte":0,"scores_lte":6,"human_name":"detractor","human_name_pluralized":"detractors","human_name_titleized":"Detractor","human_name_titleized_pluralized":"Detractors","baked_score":false,"color_bg":"#e43300","color_fg":"#e43300"}},"chart_y_tick_values":[-100,-50,0,50,100],"chart_y_domain":[-125,125]},"DEFAULT_INITIAL_DELAY":21600,"DEFAULT_RECURRING_PERIOD":null,"DEFAULT_FORCE_DISPLAY":false,"DEFAULT_MIN_TIME_ON_PAGE":2,"DEFAULT_MIN_TIME_FOR_DISPLAY":120,"DEFAULT_MIN_SURVEY_INTERVAL":2592000,"DEFAULT_SAMPLE_FACTOR":1.0,"PLAN_LIMIT_EXHAUSTED":false,"ENABLE_TOUCH_PLATFORMS":false,"OVERRIDE_EXPERIMENT_TREATMENTS":{},"COOKIE_LAST_SURVEYED_TIMESTAMP":"_delighted_lst","COOKIE_LAST_SURVEYED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_LAST_RESPONDED_TIMESTAMP":"_delighted_lrt","COOKIE_LAST_RESPONDED_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_FIRST_SEEN_TIMESTAMP":"_delighted_fst","COOKIE_FIRST_SEEN_TIMESTAMP_EXPIRY_DAYS":3650,"COOKIE_IS_TEST":"_delighted_tst","COOKIE_IS_DEBUG":"_delighted_dbg","NEVER_FUTURE_TIMESTAMP":4618380874000,"NEVER_PAST_TIMESTAMP":-1693048870000,"RETURN_DELAY":21600,"PREFIX_PROPERTIES":true,"SURVEY_URL":"https://web.delighted.com/t/X8vifTMw","TELEMETRY_URL":"https://web.delighted.com/integrations/web/v1/telemetry/Dk30CC86ba0nATlK"});
            })();
          } catch(e) {
            if (console && console.error) { // :ALLOW_CONSOLE:
              var message;
              try { message = (e && e.message) || String(e); } catch(e) {};
              console.log("[Delighted] Error loading: ", message); // :ALLOW_CONSOLE:
            }
          }
