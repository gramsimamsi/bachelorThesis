(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"./node_modules/@babel/runtime/helpers/construct.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js");function o(t,n,a){return!function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?e.exports=o=function(e,t,n){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return n&&r(a,n.prototype),a}:e.exports=o=Reflect.construct,o.apply(null,arguments)}e.exports=o},"./node_modules/@babel/runtime/helpers/isNativeFunction.js":function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},"./node_modules/@babel/runtime/helpers/wrapNativeSuper.js":function(e,t,n){var r=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),o=n("./node_modules/@babel/runtime/helpers/setPrototypeOf.js"),a=n("./node_modules/@babel/runtime/helpers/isNativeFunction.js"),i=n("./node_modules/@babel/runtime/helpers/construct.js");function s(t){var n="function"==typeof Map?new Map:void 0;return e.exports=s=function(e){if(null===e||!a(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(e))return n.get(e);n.set(e,t)}function t(){return i(e,arguments,r(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),o(t,e)},s(t)}e.exports=s},"./node_modules/serialize-javascript/index.js":function(e,t,n){"use strict";var r=Math.floor(1099511627776*Math.random()).toString(16),o=new RegExp('"@__(F|R|D)-'+r+'-(\\d+)__@"',"g"),a=/\{\s*\[native code\]\s*\}/g,i=/function.*?\(/,s=/[<>\/\u2028\u2029]/g,l=["*","async"],c={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\u2028":"\\u2028","\u2029":"\\u2029"};function u(e){return c[e]}e.exports=function(e,t){t||(t={}),"number"!=typeof t&&"string"!=typeof t||(t={space:t});var n,c=[],m=[],d=[];return"string"!=typeof(n=t.isJSON&&!t.space?JSON.stringify(e):JSON.stringify(e,t.isJSON?null:function(e,t){if(!t)return t;var n=this[e],o=typeof n;if("object"===o){if(n instanceof RegExp)return"@__R-"+r+"-"+(m.push(n)-1)+"__@";if(n instanceof Date)return"@__D-"+r+"-"+(d.push(n)-1)+"__@"}return"function"===o?"@__F-"+r+"-"+(c.push(n)-1)+"__@":t},t.space))?String(n):(!0!==t.unsafe&&(n=n.replace(s,u)),0===c.length&&0===m.length&&0===d.length?n:n.replace(o,function(e,t,n){return"D"===t?'new Date("'+d[n].toISOString()+'")':"R"===t?m[n].toString():function(e){var t=e.toString();if(a.test(t))throw new TypeError("Serializing native function: "+e.name);if(i.test(t))return t;var n=t.indexOf("("),r=t.substr(0,n).trim().split(" ").filter(function(e){return e.length>0});return r.filter(function(e){return-1===l.indexOf(e)}).length>0?(r.indexOf("async")>-1?"async ":"")+"function"+(r.join("").indexOf("*")>-1?"*":"")+t.substr(n):t}(c[n])}))}},"./src/components/audio/AudioPlayback.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),l=n.n(s),c=n("./node_modules/react/index.js"),u=n.n(c),m=n("./node_modules/graphql-tag/src/index.js"),d=n.n(m);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var f=u.a.createElement("g",{strokeLinecap:"round",strokeLinejoin:"round"},u.a.createElement("path",{d:"M17.4 7s2.64 3.56 0 6.88M15 8.56s1.6 2.38 0 4.4"})),g=u.a.createElement("path",{d:"M11.9 3.01a.19.19 0 0 0-.19.04L6.47 7.7H3.2c-.09 0-.21.06-.21.14v5.28c0 .08.12.3.21.3h3.14L11.72 18h.18a.17.17 0 0 0 .1-.15V3.14a.14.14 0 0 0-.1-.14z"}),b=function(e){return u.a.createElement("svg",p({width:21,height:21},e),f,g)},h=n("./src/components/style/index.js"),v=n("./src/framework/design-system/components/index.js"),x=n("./src/framework/design-system/type/index.js"),E=n("./src/framework/reporter/index.js"),y=n("./src/framework/source/index.js"),j=n("./src/styles/font.js");function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _=u.a.createElement("path",{d:"M7 4v17.03a.5.5 0 0 0 .8.4l11.1-8.1a1 1 0 0 0 0-1.62L7.8 3.6A.5.5 0 0 0 7 4z"}),I=function(e){return u.a.createElement("svg",w({width:25,height:25},e),_)};function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var C=u.a.createElement("g",{transform:"translate(5 4)",fillRule:"evenodd"},u.a.createElement("rect",{width:6,height:17,rx:2}),u.a.createElement("rect",{x:9,width:6,height:17,rx:2})),P=function(e){return u.a.createElement("svg",k({width:25,height:25},e),C)},O=n("./src/components/session/RequireFlag.jsx"),S=n("./src/components/session/WithViewer.jsx"),M=n("./src/framework/track/UpsellPresentationTracker.jsx"),T=n("./src/components/upsell/UpsellClickable.jsx");function L(){var e=o()(["\n  fragment AudioPlayback_post on Post {\n    id\n    audioVersionUrl\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    ...UpsellClickable_post\n  }\n  ","\n"]);return L=function(){return e},e}n.d(t,"a",function(){return F}),n.d(t,"b",function(){return V});var R={duration:0,elapsed:0,playing:!1},B=function(e,t){switch(t.type){case"load":return l()({},e,{duration:t.duration});case"play":return l()({},e,{playing:!0});case"pause":return l()({},e,{playing:!1});case"seek":return l()({},e,{elapsed:t.clickedTime});case"progress":return l()({},e,{elapsed:t.elapsed});case"end":return l()({},e,{playing:!1});default:return e}},A=function(e){var t=e.postId,n=e.audioVersionUrl,r=c.useReducer(B,R),o=i()(r,2),a=o[0],s=o[1],l=a.duration,u=a.elapsed,m=a.playing,d=Object(E.c)();c.useEffect(function(){var e=document.getElementById("audio-player");function t(){s({type:"load",duration:e.duration})}function n(){s({type:"progress",elapsed:e.currentTime})}function r(){s({type:"end"})}return e.addEventListener("canplay",t),e.addEventListener("timeupdate",n),e.addEventListener("ended",r),function(){e.removeEventListener("canplay",t),e.removeEventListener("timeupdate",n),e.removeEventListener("ended",r)}},[]),c.useEffect(function(){var e=document.getElementById("audio-player");m?e.play():e.pause()},[m]),c.useEffect(function(){var e=document.getElementById("audio-player");Math.round(u)!==Math.round(e.currentTime)&&(e.currentTime=u)},[u]);var p=function(e){var t=e.children,n=e.onClick,r=function(e){return{borderRadius:"4px",padding:"8px",borderWidth:"1px",borderStyle:"solid",boxSizing:"border-box",display:"inline-block",textDecoration:"none",":focus":{outline:"none"},color:e.baseColor.text.normal,fill:e.baseColor.fill.normal,background:0,borderColor:e.baseColor.border.dark,":hover":{cursor:"pointer",color:e.baseColor.text.darker,fill:e.baseColor.fill.darker,borderColor:e.baseColor.border.darker}}};return c.createElement(v.K,null,function(e){return c.createElement("button",{onMouseUp:n,className:e(r)},t)})};return c.createElement(v.b,{display:"flex",justifyContent:"center",margin:"20px 0"},c.createElement("audio",{id:"audio-player"},c.createElement("source",{src:n})),c.createElement(v.b,{display:"flex",alignItems:"center",flexGrow:"1"},c.createElement(v.b,{marginRight:"16px"},c.createElement(function(e){var n=e.playing,r=c.useCallback(function(){n?(d.event("audio.end",{postId:t}),s({type:"pause"})):(d.event("audio.start",{postId:t}),s({type:"play"}))},[n]);return c.createElement(p,{onClick:r},n?c.createElement(P,null):c.createElement(I,null))},{playing:m})),c.createElement(v.b,{display:"flex",flexDirection:"column",flexGrow:"1"},c.createElement(x.a,{scale:"M",color:"DARKER"},"Listen to this story"),c.createElement(function(e){var t=e.elapsed,n=e.duration,r=e.onTimeUpdate,o=t&&n?Math.max(0,Math.min(t/n*100,100)):0;function a(e){var t=~~(e%60);return[~~(e/60),t<10?"0"+t:t].join(":")}function i(e){var t=e.pageX,r=document.getElementById("audio-player-progress-bar"),o=t-(r.getBoundingClientRect().left+window.scrollX);return n/r.offsetWidth*o}function s(e){function t(e){r(i(e))}r(i(e)),document.addEventListener("mousemove",t),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",t)})}return c.createElement(v.M,null,function(e){return c.createElement(v.b,{display:"flex",alignItems:"center"},c.createElement(v.b,{width:"28px",marginRight:"12px",textAlign:"left"},c.createElement(x.a,{scale:"M"},t?a(t):"--:--")),c.createElement("div",{id:"audio-player-progress-bar",style:{background:"linear-gradient(to right, ".concat(e.baseColor.fill.normal," ").concat(o,"%, ").concat(e.baseColor.background.normal," 0)"),display:"flex",justifyContent:"flex-start",alignItems:"center",flexGrow:1,height:"2px",cursor:"pointer"},onMouseDown:s},c.createElement("div",{style:{backgroundColor:e.baseColor.fill.normal,position:"relative",marginLeft:"0",height:"10px",width:"10px",borderRadius:"50%",left:"".concat(o,"%"),cursor:"pointer"}})),c.createElement(v.b,{width:"28px",marginLeft:"12px",textAlign:"right"},c.createElement(x.a,{scale:"M"},n?a(n):"--:--")))})},{elapsed:u,duration:l,onTimeUpdate:function(e){return s({type:"seek",clickedTime:Math.max(0,Math.min(e,l))})}}))))},U=Object(h.b)(b,function(e){return{fill:e.theme.baseColor.fill.light,marginLeft:"15px",marginRight:"15px"}}),D=function(e){return{color:e.baseColor.text.light,fontSize:"14px"}},N=function(){return c.createElement(v.l,{display:"flex",flexShrink:"0",justifyContent:"center"},c.createElement(v.l,{columns:8,display:"flex",flexShrink:"0",margin:"30px 0",padding:"15px 0",backgroundColor:"BASE_LIGHT"},c.createElement(U,null),c.createElement(v.K,null,function(e){return c.createElement(v.d,{className:e([Object(j.g)(),D])},"Psst... there’s an audio version of this story. Upgrade to listen.")})))};function F(e){var t=e.post,n=t.id,r=t.audioVersionUrl,o=(t.content||{}).isLockedPreviewOnly;return c.createElement(O.a,{name:"enable_lite_audio_upsells"},c.createElement(S.a,null,function(e){return e&&!!e.mediumMemberAt||!o?c.createElement(A,{postId:n,audioVersionUrl:r}):c.createElement(y.b,{source:{dimension:"audio_exclusive",name:"upgrade_membership",postId:n}},c.createElement(M.a,null,c.createElement(T.a,{post:t},c.createElement(N,null))))}))}var V=d()(L(),T.b)},"./src/components/collection/CollectionFollowButton.jsx":function(e,t,n){"use strict";n.d(t,"c",function(){return L}),n.d(t,"b",function(){return R}),n.d(t,"a",function(){return $});var r=n("./node_modules/@babel/runtime/helpers/extends.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(s),c=n("./node_modules/react/index.js"),u=n("./node_modules/graphql-tag/src/index.js"),m=n.n(u),d=n("./node_modules/react-apollo/react-apollo.esm.js"),p=n("./node_modules/react-redux/es/index.js"),f=n("./src/framework/design-system/type/index.js"),g=n("./src/framework/design-system/components/index.js"),b=n("./src/svg/arrow-down-21px.svg"),h=n("./src/framework/design-system/components/portal/ui/Toast.jsx"),v=n("./src/util/routes.js"),x=n("./src/components/session/WithViewer.jsx"),E=n("./src/framework/reporter/index.js"),y=n("./src/framework/source/index.js"),j=n("./src/framework/track/DomMonitorContext.js"),w=n("./src/components/susi/SusiClickable.jsx");function _(){var e=l()(["\n      fragment CollectionIsUserSubscribedToMediumNewsletter on Collection {\n        __typename\n        isUserSubscribedToMediumNewsletter\n      }\n    "]);return _=function(){return e},e}function I(){var e=l()(["\n  mutation unsubscribeMediumNewsletterMutation($mediumNewsletterId: ID!) {\n    unsubscribeMediumNewsletter(mediumNewsletterId: $mediumNewsletterId)\n  }\n"]);return I=function(){return e},e}function k(){var e=l()(["\n  mutation subscribeMediumNewsletterMutation($mediumNewsletterId: ID!) {\n    subscribeMediumNewsletter(mediumNewsletterId: $mediumNewsletterId)\n  }\n"]);return k=function(){return e},e}function C(){var e=l()(["\n  mutation unsubscribeCollectionLettersMutation($id: ID!) {\n    unsubscribeCollectionLetters(targetCollectionId: $id) {\n      ...CollectionFollowButton_collection\n    }\n  }\n  ","\n"]);return C=function(){return e},e}function P(){var e=l()(["\n  mutation subscribeCollectionLettersMutation($id: ID!) {\n    subscribeCollectionLetters(targetCollectionId: $id) {\n      ...CollectionFollowButton_collection\n    }\n  }\n  ","\n"]);return P=function(){return e},e}function O(){var e=l()(["\n  mutation unfollowCollectionMutation($id: ID!) {\n    unfollowCollection(targetCollectionId: $id) {\n      ...CollectionFollowButton_collection\n    }\n  }\n  ","\n"]);return O=function(){return e},e}function S(){var e=l()(["\n  mutation followCollectionMutation($id: ID!) {\n    followCollection(targetCollectionId: $id) {\n      ...CollectionFollowButton_collection\n    }\n  }\n  ","\n"]);return S=function(){return e},e}function M(){var e=l()(["\n  fragment CollectionFollowButton_collection on Collection {\n    __typename\n    id\n    viewerIsFollowing\n    name\n    viewerIsSubscribedToLetters\n    slug\n    mediumNewsletterId\n    isUserSubscribedToMediumNewsletter\n    ...collectionUrl_collection\n    ...SusiClickable_collection\n  }\n  ","\n  ","\n"]);return M=function(){return e},e}function T(){var e=l()(["\n  fragment CollectionFollowButton_post on Post {\n    __typename\n    id\n  }\n"]);return T=function(){return e},e}var L=m()(T()),R=m()(M(),v.w,w.b),B=function(e){var t=e.children,n=e.extraTopPadding,r=e.extraBottomPadding,o=e.padding,a=e.margin,i=e.borderTop;return c.createElement(g.b,{padding:o||"".concat(n?"20px":"5px"," 20px ").concat(r?"20px":"5px"," 20px"),margin:a,borderTop:i?"BASE_LIGHTER":"NONE"},t)},A=m()(S(),R),U=m()(O(),R),D=m()(P(),R),N=m()(C(),R),F=m()(k()),V=m()(I()),q={position:"relative",left:"6px"},W=function(e,t,n){t.writeFragment({id:"Collection:"+e.collection.id,fragment:m()(_()),variables:{collectionId:e.collection.id},data:{__typename:"Collection",isUserSubscribedToMediumNewsletter:n}})},H=Object(d.d)(Object(d.f)(A,{name:"followCollectionMutation",props:function(e){var t=e.ownProps,n=e.followCollectionMutation;return{followCollectionMutation:function(){n({variables:{id:t.collection.id},optimisticResponse:{__typename:"Mutation",followCollection:{__typename:"Collection",viewerIsFollowing:!0,viewerIsSubscribedToLetters:t.collection.viewerIsSubscribedToLetters,id:t.collection.id,name:t.collection.name}}})}}}}),Object(d.f)(U,{name:"unfollowCollectionMutation",props:function(e){var t=e.ownProps,n=e.unfollowCollectionMutation;return{unfollowCollectionMutation:function(){return n({variables:{id:t.collection.id},optimisticResponse:{__typename:"Mutation",unfollowCollection:{__typename:"Collection",viewerIsFollowing:!1,viewerIsSubscribedToLetters:t.collection.viewerIsSubscribedToLetters,id:t.collection.id,name:t.collection.name}}})}}}}),Object(d.f)(D,{name:"subscribeCollectionLettersMutation",props:function(e){var t=e.ownProps,n=e.subscribeCollectionLettersMutation;return{subscribeCollectionLettersMutation:function(){return n({variables:{id:t.collection.id},optimisticResponse:{__typename:"Mutation",subscribeCollectionLetters:{__typename:"Collection",viewerIsFollowing:t.collection.viewerIsFollowing,viewerIsSubscribedToLetters:!0,id:t.collection.id,name:t.collection.name}}})}}}}),Object(d.f)(N,{name:"unsubscribeCollectionLettersMutation",props:function(e){var t=e.ownProps,n=e.unsubscribeCollectionLettersMutation;return{unsubscribeCollectionLettersMutation:function(){return n({variables:{id:t.collection.id},optimisticResponse:{__typename:"Mutation",unsubscribeCollectionLetters:{__typename:"Collection",viewerIsFollowing:t.collection.viewerIsFollowing,viewerIsSubscribedToLetters:!1,id:t.collection.id,name:t.collection.name}}})}}}}),Object(d.f)(F,{name:"subscribeMediumNewsletterMutation",props:function(e){var t=e.ownProps,n=e.subscribeMediumNewsletterMutation;return{subscribeMediumNewsletterMutation:function(){return n({variables:{mediumNewsletterId:t.collection.mediumNewsletterId},optimisticResponse:{subscribeMediumNewsletter:!0},update:function(e){return W(t,e,!0)}})}}}}),Object(d.f)(V,{name:"unsubscribeMediumNewsletterMutation",props:function(e){var t=e.ownProps,n=e.unsubscribeMediumNewsletterMutation;return{unsubscribeMediumNewsletterMutation:function(){return n({variables:{mediumNewsletterId:t.collection.mediumNewsletterId},optimisticResponse:{unsubscribeMediumNewsletter:!0},update:function(e){return W(t,e,!1)}})}}}}))(function(e){var t=e.collection,n=e.currentLocation,r=e.post,a=t.name||"",s=Object(E.c)(),l=Object(y.c)(),u=Object(j.b)(),m=c.useState(!!e.isPopoverVisible),d=i()(m,2),p=d[0],_=d[1],I=c.useState(!!e.isToastVisible),k=i()(I,2),C=k[0],P=k[1],O=c.useCallback(function(){_(!1)},[]);c.useEffect(function(){return u.on("scroll",O),function(){u.off("scroll",O)}},[O]);var S=c.useCallback(function(){t.viewerIsFollowing||(e.followCollectionMutation&&e.followCollectionMutation(),s.event("collection.followed",{collectionId:t.id,followSource:l})),_(!0)},[t]),M=c.useCallback(function(){s.event("collection.unfollowed",{collectionId:t.id,followSource:l}),e.unfollowCollectionMutation&&e.unfollowCollectionMutation(),_(!1)},[]),T=c.useCallback(function(){_(!1)},[]),L=c.useCallback(function(t){s.event("client.action",{action:"toggle-subscribe-letters",eventType:"click",classAttribute:"checkbox"}),t.target.checked?e.subscribeCollectionLettersMutation&&e.subscribeCollectionLettersMutation():e.unsubscribeCollectionLettersMutation&&e.unsubscribeCollectionLettersMutation(),P(!0)}),R=c.useCallback(function(t){s.event("client.action",{action:"toggle-subscribe-medium-newsletter",eventType:"click",classAttribute:"checkbox"}),t.target.checked?e.subscribeMediumNewsletterMutation&&e.subscribeMediumNewsletterMutation():e.unsubscribeMediumNewsletterMutation&&e.unsubscribeMediumNewsletterMutation(),P(!0)}),A=c.useCallback(function(){P(!1)}),U=function(e){var n=t.slug&&(r&&r.id?Object(v.lb)(t.slug,r.id):Object(v.kb)(t.slug));return c.createElement(x.a,null,function(r){return r?c.createElement(g.c,o()({size:"SMALL",onClick:S},e),e.children):c.createElement(w.a,o()({collection:t,isObvious:!0,isButton:!0,buttonSize:"SMALL",susiEntry:"follow_sidebar",operation:"register",actionUrl:n},e),e.children)})},D=t.mediumNewsletterId?R:L,N=t.mediumNewsletterId?t.isUserSubscribedToMediumNewsletter:t.viewerIsSubscribedToLetters;return c.createElement(g.K,null,function(e){return c.createElement(c.Fragment,null,c.createElement(g.x,{isVisible:!!p,hide:T,popoverRenderFn:function(){return c.createElement(g.b,{width:"280px",display:"flex",flexDirection:"column"},c.createElement(B,{extraTopPadding:!0},c.createElement(f.b,{scale:"XS"},"You‘re following ",a)),c.createElement(B,null,c.createElement(g.d,null,"You‘ll now see more stories from ",a," across Medium.")),c.createElement(B,null,c.createElement(g.d,null,c.createElement("label",null,c.createElement(g.b,{display:"inline",marginRight:"5px"},c.createElement("input",{type:"checkbox",onChange:D,checked:N})),"Receive emails from this publication"))),c.createElement(B,{borderTop:!0,margin:"10px 0 0 0",padding:"15px 20px 5px 20px"},c.createElement(g.d,null,c.createElement(g.v,{href:Object(v.v)(t,n)},"View Publication"))),c.createElement(B,{extraBottomPadding:!0},c.createElement(g.d,null,c.createElement(g.v,{onClick:M},"Unfollow publication"))))}},c.createElement(U,{buttonStyle:t.viewerIsFollowing?"STRONG":"OBVIOUS"},t.viewerIsFollowing?"Following":"Follow",t.viewerIsFollowing&&c.createElement("span",{className:e(q)},c.createElement(b.a,null)))),c.createElement(h.a,{isVisible:!!C,hide:A,duration:2e3},c.createElement(g.d,null,N?"You‘ll now receive emails from ".concat(a,"."):"You‘ll no longer receive emails from ".concat(a,"."))))})}),$=Object(p.b)(function(e){return{currentLocation:e.navigation.currentLocation}})(H)},"./src/components/meter/ContentWall.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n("./node_modules/react/index.js"),o=n("./src/framework/design-system/components/index.js"),a=n("./src/styles/colors.js");function i(e){var t=e.children;return r.createElement(r.Fragment,null,r.createElement(o.b,{marginTop:"-150px",background:"linear-gradient(".concat(Object(a.u)(0),", ").concat(Object(a.u)(1),")"),height:"150px",position:"relative",width:"100%",marginBottom:"10px"}),r.createElement(o.b,{margin:"auto",borderRadius:"4px",boxShadow:"0 2px 10px ".concat(Object(a.r)(.15)),maxWidth:"760px",sm:{margin:"0 18px 0"}},t))}},"./src/components/meter/MeterController.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/typeof.js"),l=n.n(s),c=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),u=n.n(c),m=n("./node_modules/react/index.js"),d=n.n(m),p=n("./node_modules/react-redux/es/index.js"),f=n("./node_modules/graphql-tag/src/index.js"),g=n.n(f);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=d.a.createElement("path",{d:"M3.9 6.77l5.2 5.76.43.47.43-.47 5.15-5.7-.85-.77-4.73 5.25L4.75 6z",fillRule:"evenodd"}),v=function(e){return d.a.createElement("svg",b({width:19,height:19},e),h)},x=n("./src/framework/design-system/components/index.js"),E=n("./src/styles/theme.js"),y=n("./src/styles/colors.js"),j=n("./src/styles/zIndex.js"),w=function(){return{"0%":{transform:"translateY(100%)"},"90%":{transform:"translateY(-5%)"},"100%":{transform:"translateY(0%)"}}},_=function(){return{"0%":{transform:"translateY(0%)",opacity:1},"10%":{transform:"translateY(-5%)",opacity:1},"100%":{transform:"translateY(100%)",opacity:0}}},I=function(e,t){return function(n){return{position:"fixed",bottom:"0",width:"100%",transform:t?"translateY(0%)":"translateY(100%)",transition:"max-height 800ms ease-in",animation:"".concat(e," ").concat(t?800:550,"ms ease-in-out"),zIndex:j.a.metabarCenter}}},k=function(e){var t=e.children,n=e.hide,r=e.isVisible,o=e.responsiveRules,a=e.timeOut,i=e.width,s=m.useState(!1),l=u()(s,2),c=l[0],d=l[1],p=m.useState(null),f=u()(p,2),g=f[0],b=f[1];return a&&!g?b(setTimeout(n,a)):a||clearTimeout(g),r||setTimeout(function(){d(!0)},800),c?null:m.createElement(x.G,{theme:E.a},m.createElement(x.K,null,function(e){return m.createElement(x.L,{keyframes:{shiftUp:w,shiftDown:_}},function(n){var a=n.shiftUp,s=n.shiftDown;return m.createElement("div",{className:e(r?[I(a,r)]:[I(s,r)])},m.createElement(x.b,{boxShadow:"0px 2px 10px ".concat(E.a.baseColor.border.lighter),width:i||"100%",background:y.w,borderRadius:"4px 4px 0 0",position:"relative",margin:"0 auto",sm:{margin:"0 8px 8px 8px",width:"initial",borderRadius:"4px"},md:o&&o.md||{}},t))})}))},C=n("./src/components/session/WithViewer.jsx"),P=n("./src/framework/design-system/util/style/responsiveStyles.js"),O=n("./src/framework/design-system/type/index.js"),S=n("./src/styles/breakpoints.js"),M=n("./node_modules/pluralize/pluralize.js"),T=n.n(M),L=n("./src/util/numbers.js"),R=function(e){return e<1||e>9?e:Object(L.c)(e)},B=function(e,t){switch(e){case 1:case 6:return"Smart stories. New ideas. No ads. $5/month.";case 2:case 7:case 11:return"Read smarter, not harder.";case 3:case 8:return"Some thoughts are worth more than a penny.";case 4:case 9:return"Know more. Upgrade today.";case 5:case 10:default:return"This is the only ad on ".concat(t,". You can make it go away.")}},A=function(e,t,n){var r=t-e,o=R(r),a=T()("story",r);switch(e){case 1:return{lg:"Members get unlimited access to the best stories on ".concat(n," — but you can read ").concat(R(t)," for free this month. Upgrade for $5/month."),sm:"Welcome to your free member preview for this month. Upgrade for unlimited access."};case 5:case 10:return{lg:"We’ve built a better place on the internet for readers, not advertisers. You have ".concat(o," ").concat(a," left in your free member preview this month, so upgrade today for more big ideas and insightful stories."),sm:"We’ve built a better place on the internet for readers, not advertisers. You have ".concat(o," ").concat(a," left in your free member preview this month.")};default:return{lg:"You have ".concat(o," ").concat(a," remaining in your free member preview for this month. Unlock the best of ").concat(n," when you upgrade for $5/month."),sm:"You have ".concat(o," ").concat(a," remaining in your free member preview this month.")}}},U=function(){return{marginTop:"1px",fontStyle:"normal",fontWeight:500,fontFamily:E.a.font.marketing.family,display:"flex",justifyContent:"center",height:"100px",flexDirection:"column",textAlign:"center"}},D=function(){return{height:"100px",overflow:"hidden",position:"relative",":after":{position:"absolute",bottom:"0",height:"100%",width:"100%",content:'""',background:"linear-gradient(to bottom, ".concat(y.w," 0%, ").concat(Object(y.u)(0)," 25%, ").concat(Object(y.u)(0)," 75%, ").concat(y.w," 100% )")}}},N=function(){return{"25%":{opacity:"1.0"},"50%":{opacity:"0.2"},"75%":{opacity:"1.0"},"100%":{transform:"translateY(calc(-100% + 100px))"}}},F=function(e){var t=e.maxNumber,n=e.minNumber;return m.createElement(x.K,null,function(e){return m.createElement(x.L,{keyframes:{rollUp:N}},function(r){var o,a=r.rollUp;return m.createElement("div",{className:e(D)},m.createElement("div",{className:e((o=a,function(e){return{fontSize:"42px",color:E.a.accentColor.fill.normal,fill:E.a.accentColor.fill.normal,animation:"".concat(o," 1.5s cubic-bezier(.68, 0, .15,1) forwards 800ms")}}))},function(e){for(var r=[],o=0;o<t-n+1;o++)r.push(m.createElement("div",{className:e(U),key:"number".concat(t-o)},t-o));return r}(e)))})})},V=n("./src/framework/source/index.js"),q=n("./src/components/upsell/UpsellClickable.jsx"),W=n("./src/framework/track/UpsellPresentationTracker.jsx");function H(){var e=o()(["\n  fragment LIMeterBanner_post on Post {\n    id\n    ...UpsellClickable_post\n  }\n  ","\n"]);return H=function(){return e},e}var $=function(e){return 1===e?null:{md:{width:"740px"}}},G=function(e){return function(t){var n=e?"solid 1px ".concat(t.baseColor.border.lighter):"none";return Object(P.a)(t,{maxHeight:e?"200px":0,overflow:"hidden",animationDelay:"200ms",transition:"max-height 250ms ease-in",borderTop:{xs:n,sm:n,md:"none",lg:"none",xl:"none"},paddingTop:{xs:e?"12px":"0",sm:e?"12px":"0",md:"0",lg:"0",xl:"0"}})}},z=function(e){return function(t){var n=e?"none":"block",r="block";return Object(P.a)(t,{visibility:e?"hidden":"visible",fill:E.a.baseColor.text.lighter,":hover":{fill:E.a.baseColor.text.normal},display:{xs:n,sm:n,md:r,lg:r,xl:r}})}},K=Object(p.b)(function(e){return{productName:e.config.productName}})(function(e){var t=e.meterCount,n=e.meterLimit,r=e.post,o=e.productName,a=m.useState(!1),i=u()(a,2),s=i[0],l=i[1],c=function(e,t,n){var r=e>1||document.body.offsetWidth<=Object(S.createBreakpointMaxWidths)(E.a).sm;return{headlineCopy:B(e,n),isTimer:r,microCopy:A(e,t,n)}}(t,n,o),d=c.headlineCopy,p=c.microCopy,f=c.isTimer,g=function(){return m.createElement(V.b,{source:{name:"upgrade_membership",dimension:"post_counter"}},m.createElement(W.a,null,m.createElement(x.b,{marginTop:"28px",paddingBottom:"36px",sm:{display:"none"},display:"inline-block",textAlign:"center"},m.createElement(q.a,{width:"170px",isButton:!0,buttonStyle:"BRAND",buttonSize:"REGULAR",post:r},m.createElement(C.a,null,function(e){return e&&e.hasPastMemberships?"Resume membership":"Upgrade"}))),m.createElement(x.b,{display:"none",paddingBottom:"20px",sm:{margin:"12px 0 0",display:"block"},textAlign:"center"},m.createElement(q.a,{width:"170px",isButton:!0,buttonStyle:"BRAND",buttonSize:"SMALL",post:r},m.createElement(C.a,null,function(e){return e&&e.hasPastMemberships?"Resume membership":"Upgrade"})))))};return m.createElement(x.J,{initialVisibility:!0},function(e){var r=e.isVisible,o=e.hide;return m.createElement(k,{hide:o,isVisible:r,timeOut:f&&!s?6e3:null,width:t>1?"1024px":"100%",responsiveRules:$(t)},m.createElement(x.K,null,function(e){return m.createElement(x.b,{display:"flex",flexDirection:"column",justifyContent:"center",padding:"0 40px",maxWidth:"1040px",margin:"0 auto",sm:{padding:"0"}},m.createElement(x.b,{display:"flex"},m.createElement(x.b,{sm:{padding:"0 20px"}},m.createElement(F,{minNumber:n-t,maxNumber:n})),m.createElement(x.b,{display:"flex",flexDirection:"column",paddingLeft:"40px",flexShrink:"1",flexGrow:"1",sm:{padding:"0",margin:"0",justifyContent:"center"},marginTop:"34px"},m.createElement(x.b,{paddingBottom:"16px",sm:{paddingBottom:"0"}},m.createElement(O.b,{scale:{xs:"XS",sm:"XS",md:"M",lg:"M",xl:"M"},roleAndWeight:"MARKETING"},d)),m.createElement(x.b,{sm:{display:"none"}},m.createElement("div",{className:e(G(s))},m.createElement(O.a,{scale:"L"},p.lg),m.createElement(g,null)))),m.createElement(x.b,{display:"flex",flexDirection:"column",justifyContent:s?"flex-start":"center",marginTop:s?"33px":"0",sm:{justifyContent:"center",margin:"0"}},m.createElement(x.b,{display:"flex",justifyContent:"center",padding:"12px"},m.createElement("div",{className:e(z(!!s))},m.createElement(O.a,{scale:"M"},m.createElement(x.v,{onClick:function(){return l(!0)},linkStyle:"SUBTLE"},m.createElement(x.b,{display:"inline",md:{display:"none",marginRight:"0"},marginRight:"4px"},"Details"),m.createElement(x.b,{display:"inline",sm:{margin:"0",display:"block"}},m.createElement(v,null))))),m.createElement(x.b,{marginLeft:"24px",sm:{display:s?"block":"none",margin:"0"}},f&&!s?m.createElement(x.j,{delay:800,duration:5200,radius:8,strokeWidth:4}):m.createElement(x.g,{onClick:o,isPositionAbsolute:!1,size:"SMALL"}))))),m.createElement(x.b,{display:"none",sm:{padding:"0 12px",textAlign:"center",display:"block"}},m.createElement("div",{className:e(G(s))},m.createElement(O.a,{scale:"L"},p.sm),m.createElement(g,null))))}))})}),Y=g()(H(),q.b),J=n("./src/components/susi/oauth-buttons/FacebookSusiButton.jsx"),X=n("./src/components/susi/oauth-buttons/GoogleSusiButton.jsx"),Q=n("./src/components/susi/SusiClickable.jsx"),Z=n("./src/util/miroImage.js");function ee(){var e=o()(["\n  fragment LOMeterBanner_post on Post {\n    id\n  }\n"]);return ee=function(){return e},e}var te=function(){var e=Object(Z.a)({miroId:"1*LyzKW5k0VC763U3vP6udTQ.png",height:128,width:227,strategy:"RESAMPLE"}),t="url(".concat(e,")");return m.createElement(x.b,{display:"flex",maxWidth:"227px",flexBasis:"227px",backgroundImage:t,backgroundPosition:"right center",backgroundSize:"cover",md:{display:"none"}})},ne=function(){var e={operation:"register"};return m.createElement(x.b,{display:"flex",marginTop:"12px",textAlign:"center",sm:{flexDirection:"column",marginBottom:"12px"}},m.createElement(x.b,{marginRight:"12px",sm:{marginRight:"0px",marginBottom:"12px"}},m.createElement(X.a,e)),m.createElement(J.a,e))},re=function(e){var t=e.post;return m.createElement(x.J,{initialVisibility:!0},function(e){var n=e.isVisible,r=e.hide;return m.createElement(k,{hide:r,isVisible:n},m.createElement(x.b,{marginLeft:"12px",marginRight:"12px",display:"flex",flexDirection:"row",md:{marginLeft:"36px",marginRight:"36px",paddingTop:"10px",paddingBottom:"20px"},sm:{marginLeft:"12px",marginRight:"12px",flexDirection:"column"}},m.createElement(te,null),m.createElement(V.b,{source:{susiEntry:"smart_meter",postId:t.id}},m.createElement(x.b,{display:"flex",flexDirection:"column",marginTop:"20px",marginBottom:"20px",marginLeft:"56px",flexGrow:"1",flexShrink:"1",md:{marginLeft:"0px"},sm:{marginTop:"0px",marginBottom:"0px",marginLeft:"0px"}},m.createElement(x.b,{display:"flex",flexDirection:"row-reverse",sm:{flexDirection:"column"}},m.createElement(x.b,{position:"relative",right:"0",marginBottom:"12px",marginRight:"12px",marginTop:"-12px",marginLeft:"12px",md:{marginRight:"0px"},sm:{width:"100%",textAlign:"right",marginBottom:"8px",marginRight:"0px",marginTop:"0px",marginLeft:"0px"}},m.createElement(x.g,{onClick:r,isPositionAbsolute:!1,size:"LARGE"})),m.createElement(x.b,{marginRight:"56px",flexGrow:"1",flexShrink:"1",sm:{textAlign:"center",marginRight:"0"}},m.createElement(O.b,{scale:{xs:"XS",sm:"XS",md:"M",lg:"M",xl:"M"},roleAndWeight:"MARKETING"},"Get one more story in your member preview when you sign up. It’s free."))),m.createElement(x.b,{display:"flex",flexDirection:"row",alignItems:"center",sm:{flexDirection:"column",paddingTop:"4px"}},m.createElement(ne,null),m.createElement(x.b,{display:"flex",textAlign:"left",marginTop:"12px",sm:{textAlign:"center",marginLeft:"0px",marginTop:"0px"},marginLeft:"12px",flexShrink:"1"},m.createElement(O.a,{scale:"L"},"Already have an account?"," ",m.createElement(Q.a,{isObvious:!0,operation:"login",susiEntry:"smart_meter"},"Sign in"))))))))})},oe=g()(ee()),ae=n("./src/components/susi/susi-modal/SusiModal.jsx"),ie=n("./src/framework/reporter/index.js"),se=n("./src/store/actions/googleOneTap.js");function le(){var e=o()(["\n  fragment MeterController_meteringInfo on MeteringInfo {\n    postIds\n    maxUnlockCount\n  }\n"]);return le=function(){return e},e}function ce(){var e=o()(["\n  fragment MeterController_post on Post {\n    creator {\n      id\n    }\n    isLocked\n    lockedSource\n    ...LIMeterBanner_post\n    ...LOMeterBanner_post\n    ...SusiModal_post\n  }\n  ","\n  ","\n  ","\n"]);return ce=function(){return e},e}n.d(t,"b",function(){return me}),n.d(t,"a",function(){return de});var ue={hideGoogleOneTap:se.b},me=(t.c=Object(p.b)(null,ue)(function(e){var t=e.meteringInfo,n=e.post,r=e.hideGoogleOneTap,o=Object(ie.c)(),a=t.postIds.length,s={postId:n.id,unlockCount:a},c=m.useState(!1),d=u()(c,2),p=d[0],f=d[1];m.useEffect(function(){void 0!==("undefined"==typeof document?"undefined":l()(document))&&f(!0)},[]);var g=function(e){return m.createElement(ae.a,{initialVisibility:!0,operation:"register",post:n,susiEntry:e})},b=function(e){return e?function(e){var r=t.maxUnlockCount||3;return a<=r?(o.event("meter.showMeterBanner",i()({},s,{userId:e&&e.id||void 0,type:1})),m.createElement(K,{meterCount:a,meterLimit:r,post:n})):null}(e):function(e){var t=i()({},s,{userId:e&&e.id||void 0});switch(a){case 1:return o.event("meter.showMeterBanner",i()({},t,{type:"3"})),m.createElement(re,{post:n});case 2:return r(),o.event("meter.showMeterBanner",i()({},t,{type:"2"})),g("metered_view_2");case 3:return r(),o.event("meter.showMeterBanner",i()({},t,{type:"2"})),g("metered_view_3");default:return null}}(e)};return m.createElement(C.a,null,function(e){return m.createElement(m.Fragment,null,!function(e){var r=e&&e.mediumMemberAt||void 0,o=n&&n.creator&&n.creator.id||void 0,a=e&&e.id||void 0,i=e?r||o===a:"LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource;return!p||!n.isLocked||!t.postIds.includes(n.id)||i}(e)&&b(e))})}),g()(ce(),Y,oe,ae.b)),de=g()(le())},"./src/components/meter/PayWall.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return w}),n.d(t,"a",function(){return _});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/graphql-tag/src/index.js"),l=n.n(s),c=n("./src/framework/design-system/components/index.js"),u=n("./src/framework/design-system/type/index.js"),m=n("./src/framework/design-system/type/Detail.js"),d=n("./src/components/meter/ContentWall.jsx"),p=n("./src/components/upsell/UpsellClickable.jsx"),f=n("./src/components/ui/image/index.js"),g=n("./src/framework/source/index.js"),b=n("./src/framework/track/UpsellPresentationTracker.jsx"),h=n("./src/components/session/WithViewer.jsx"),v=n("./src/framework/style/components/ThemeProvider.js"),x=n("./src/styles/theme.js");function E(){var e=o()(["\n  fragment PayWall_post on Post {\n    id\n  }\n"]);return E=function(){return e},e}var y=a.createElement(c.b,{sm:{display:"none"}},a.createElement(f.b,{alt:"",height:260,width:114,miroId:"0*GLFDRIpcedGcmuSg",strategy:"RESAMPLE",rules:{paddingBottom:"16px"}})),j=a.createElement(c.b,{display:"none",sm:{display:"block"}},a.createElement(f.b,{alt:"",height:60,width:300,miroId:"1*K4MHnSAfehAx3IJQxj7tfg.png",strategy:"RESAMPLE"})),w=l()(E()),_=Object(i.b)(function(e){return{productName:e.config.productName}})(function(e){var t=e.post,n=e.productName;return a.createElement(v.a,{theme:x.a},a.createElement(d.a,null,a.createElement(c.b,{display:"flex",sm:{flexDirection:"column",textAlign:"center"}},y,a.createElement(c.b,{display:"flex",flexDirection:"column",padding:"48px 56px",sm:{padding:"28px 16px 32px",textAlign:"center"}},a.createElement(u.b,{scale:"L",roleAndWeight:"MARKETING"},"You read a lot. We like that."," "),a.createElement(m.a,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},a.createElement(c.b,{marginTop:"8px",marginBottom:"28px",sm:{display:"none"}},function(e){return"You’ve reached the end of your free member preview for this month. \n  Become a member now for $5/month to read this story and get unlimited access to all of the best stories on ".concat(e,".")}(n)),a.createElement(c.b,{marginTop:"8px",marginBottom:"28px",display:"none",sm:{display:"inline-block"},maxWidth:"400px"},"You’ve reached the end of your free member preview for this month. Upgrade for unlimited access.")),a.createElement(g.b,{source:{dimension:"post_limit",name:"upgrade_membership",postId:t.id}},a.createElement(b.a,null,a.createElement(c.b,{display:"inline-block",textAlign:"center"},a.createElement(p.a,{isButton:!0,buttonStyle:"BRAND",width:"182px"},a.createElement(h.a,null,function(e){return e&&e.hasPastMemberships?"Resume membership":"Upgrade"})))))),j)))})},"./src/components/meter/RegWall.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"c",function(){return I}),n.d(t,"a",function(){return k});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/graphql-tag/src/index.js"),l=n.n(s),c=n("./src/framework/design-system/components/index.js"),u=n("./src/framework/design-system/type/Detail.js"),m=n("./src/components/meter/ContentWall.jsx"),d=n("./src/components/susi/SusiClickable.jsx"),p=n("./src/components/susi/oauth-buttons/FacebookSusiButton.jsx"),f=n("./src/components/susi/oauth-buttons/GoogleSusiButton.jsx"),g=n("./src/components/ui/image/index.js"),b=n("./src/framework/source/index.js"),h=n("./src/styles/theme.js"),v=n("./src/framework/style/components/ThemeProvider.js");function x(){var e=o()(["\n  fragment RegWall_post on Post {\n    id\n    lockedSource\n    ...SusiClickable_post\n  }\n  ","\n"]);return x=function(){return e},e}function E(){var e=o()(["\n  fragment RegWall_collection on Collection {\n    name\n  }\n"]);return E=function(){return e},e}var y=a.createElement(c.b,{sm:{display:"none"}},a.createElement(g.b,{alt:"",height:310,width:114,miroId:"0*GLFDRIpcedGcmuSg",strategy:"RESAMPLE",rules:{paddingBottom:"16px"}})),j=a.createElement(c.b,{display:"none",sm:{display:"block"}},a.createElement(g.b,{alt:"",height:60,width:300,miroId:"1*K4MHnSAfehAx3IJQxj7tfg.png",strategy:"RESAMPLE"})),w=function(){var e={operation:"register"};return a.createElement(c.b,{display:"flex",margin:"28px 0",sm:{flexDirection:"column"}},a.createElement(c.b,{marginRight:"12px",sm:{marginRight:"0",marginBottom:"12px"}},a.createElement(f.a,e)),a.createElement(c.b,null,a.createElement(p.a,e)))},_=l()(E()),I=l()(x(),d.c),k=Object(i.b)(function(e){return{productName:e.config.productName}})(function(e){var t=e.collection,n=e.post,r=e.productName,o="LOCKED_POST_SOURCE_SYNDICATED"===n.lockedSource;return a.createElement(v.a,{theme:h.a},a.createElement(b.b,{source:{susiEntry:"post_regwall",postId:n.id}},a.createElement(m.a,null,a.createElement(c.b,{display:"flex",sm:{flexDirection:"column",textAlign:"center"}},y,a.createElement(c.b,{padding:"48px 56px",sm:{padding:"28px 16px 12px"}},a.createElement(c.t,{size:"h3",smSize:"h4"},function(e){return e?"This story is just a click away.":"Keep the story going. Sign up for an extra free read."}(o)),a.createElement(u.a,{scale:{xs:"M",sm:"M",md:"L",lg:"L",xl:"L"}},a.createElement(c.b,{marginTop:"8px"},function(e,t,n){var r=e&&e.name||n;return t?"Sign up for a free ".concat(n," account to read this story from ").concat(r,". Plus, get one more story in your member preview this month."):"You've completed your member preview for this month, but when you sign up for a free ".concat(n," account, you get one more story. ")}(t,o,r)),a.createElement(w,null),"Already have an account?"," ",a.createElement(d.a,{isObvious:!0,operation:"login",post:n},"Sign in"))),j))))})},"./src/components/mutations/UserBlockMutation.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-apollo/react-apollo.esm.js"),s=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),u=n("./src/store/actions/navigation.js");function m(){var e=o()(["\n  mutation UserBlockMutation($targetUserId: ID!, $userId: ID!) {\n    blockUser(userId: $userId, targetUserId: $targetUserId) {\n      id\n      isBlocking\n    }\n  }\n"]);return m=function(){return e},e}var d=c()(m());t.a=Object(s.b)()(function(e){var t=e.children,n=e.dispatch,r=e.targetUserId,o=e.viewerId,s=e.onCompleted;return a.createElement(i.b,{mutation:d,onCompleted:function(e){n(Object(u.i)({message:"Successfully blocked user."})),s&&s()},variables:{targetUserId:r,userId:o},optimisticResponse:{__typename:"Mutation",blockUser:{__typename:"User",id:r,isBlocking:!0}}},function(e){return t({mutate:e})})})},"./src/components/mutations/UserUnblockMutation.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-apollo/react-apollo.esm.js"),s=n("./node_modules/react-redux/es/index.js"),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),u=n("./src/store/actions/navigation.js");function m(){var e=o()(["\n  mutation UserUnblockMutation($targetUserId: ID!, $userId: ID!) {\n    unblockUser(userId: $userId, targetUserId: $targetUserId) {\n      id\n      isBlocking\n    }\n  }\n"]);return m=function(){return e},e}var d=c()(m());t.a=Object(s.b)()(function(e){var t=e.children,n=e.dispatch,r=e.targetUserId,o=e.viewerId,s=e.onCompleted;return a.createElement(i.b,{mutation:d,onCompleted:function(e){n(Object(u.i)({message:"Successfully unblocked user."})),s&&s()},variables:{targetUserId:r,userId:o},optimisticResponse:{__typename:"Mutation",unblockUser:{__typename:"User",id:r,isBlocking:!1}}},function(e){return t({mutate:e})})})},"./src/components/post-listing/PostListingItemRecirc.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/graphql-tag/src/index.js"),s=n.n(i),l=n("./node_modules/react-redux/es/index.js"),c=n("./src/components/post/bookmark/index.js"),u=n("./src/components/post/multivote/MultiVote.jsx"),m=n("./src/components/session/RequireFlag.jsx"),d=n("./src/components/session/WithFlag.jsx"),p=n("./src/components/ui/image/FocusableMiroImage.js"),f=n("./src/framework/design-system/components/index.js"),g=n("./src/framework/design-system/type/Detail.js"),b=n("./src/framework/source/index.js"),h=n("./src/framework/track/index.js"),v=n("./src/components/post/PostByline.jsx"),x=n("./src/util/routes.js");function E(){var e=o()(["\n  fragment PostListingItemRecirc_post on Post {\n    __typename\n    id\n    title\n    isLocked\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n    }\n    ...PostByline_post\n    ...PostPresentationTracker_post\n    ...BookmarkButton_post\n    ...MultiVote_post\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return E=function(){return e},e}var y=s()(E(),v.a,h.c,c.b,u.b),j=function(e){var t=e.height,n=e.width;return function(e){return{paddingBottom:"".concat(t/n*100,"%"),position:"relative"}}},w=function(e){return{height:"100%",position:"absolute",width:"100%"}},_=function(e){var t=e.title,n=e.url;return a.createElement(f.f,{href:n},a.createElement(f.s,{size:"h4",tag:"h3"},t))};t.b=Object(l.b)(function(e){return{productName:e.config.productName}})(function(e){var t,n,r=e.post,o=e.productName;"SuggestedPost"===r.__typename?(t=function(e,t){var n,r,o,a;switch(e&&e[0]&&e[0].reason){case"TOP_SIMILAR_TO_POST":case"CF_POST_SIMILAR_TO_POST":return"Related reads";case"TOP_IN_TOPIC":return a=e[0].topics?e[0].topics[0].name:"topic","Popular in ".concat(a);case"POSTS_SHARING_AUTHOR":return n=e[0].users?e[0].users[0].name:"author","More from ".concat(n);case"POSTS_SHARING_TAGS":return(o=e[0].tags&&e[0].tags[0].name)?"Also tagged ".concat(o):"";case"TOP_IN_COLLECTION":return r=e[0].collections?e[0].collections[0].name:"publication","More from ".concat(r);case"TOP_FOR_THE_DAY_GLOBALLY":return"Top on ".concat(t);case"POSTS_SHARING_COLLECTION_AND_TAGS":return o=e[0].tags&&e[0].tags[0].name,r=e[0].collections?e[0].collections[0].name:"publication",o?"More on ".concat(o," from ").concat(r):"";case"RECOMMENDED_BY_AUTHOR":return(n=e[0].users&&e[0].users[0].name)?"Applause from ".concat(n):"";case"TOP_FOR_THE_DAY":return"Trending on ".concat(t);default:return"Picked for you"}}(r.postSuggestionReasons,o),n=r.post):n=r;var i,s,l,E,y,I,k,C,P=n.previewImage?n.previewImage.id:"",O=n.title?n.title:"",S=(i={id:P||"1*hn4v1tCaJy7cWMyb0bpNpQ.png",width:328,height:218,title:O,focusPercentX:n.previewImage?n.previewImage.focusPercentX:null,focusPercentY:n.previewImage?n.previewImage.focusPercentY:null},l=i.id,E=i.width,y=i.height,I=i.title,k=i.focusPercentX,C=i.focusPercentY,l?(s="number"==typeof k&&"number"==typeof C?[k,C]:[50,50],a.createElement(f.K,null,function(e){return a.createElement("div",{className:e(j({height:y,width:E}))},a.createElement("div",{className:e(w)},a.createElement(p.a,{miroId:l,alt:I,imgHeight:y,imgWidth:E,width:"100%",height:"100%",freezeGifs:!1,focusPercent:s})))})):null);return a.createElement(h.b,{post:n,presentationContext:"PLACEMENT"},a.createElement(f.b,{display:"flex",flexDirection:"column",marginBottom:"32px"},t&&a.createElement(f.b,{marginBottom:"12px"},a.createElement(g.a,{scale:"M"},t)),S&&a.createElement(f.b,{marginBottom:"16px"},a.createElement(f.v,{display:"block",href:Object(x.U)(n)},S)),a.createElement(f.b,{marginBottom:"16px"},a.createElement(_,{title:n.title?n.title:"",url:Object(x.U)(n)})),a.createElement(f.b,{display:"flex",alignItems:"center",justifyContent:"space-between"},a.createElement(f.b,{flexShrink:"1",marginRight:"10px"},a.createElement(d.a,{name:"remove_stars_ui"},function(e){return a.createElement(v.b,{post:n,showBio:!1,scale:"S",showStar:!e&&!!n.isLocked})})),a.createElement(f.b,{display:"flex",alignItems:"center"},a.createElement(m.a,{name:"enable_lite_claps"},a.createElement(b.b,{source:{susiEntry:"clap_preview"},extendSource:!0},a.createElement(u.a,{post:n,buttonStyle:"SUBTLE",isAccentColor:!1})),a.createElement(f.b,{borderRight:"BASE_LIGHTER",marginLeft:"12px",marginRight:"10px",height:"20px",width:"1px"})),a.createElement(c.a,{post:n})))))})},"./src/components/post/InResponseToPostPreview.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n.n(a),s=n("./node_modules/graphql-tag/src/index.js"),l=n.n(s),c=n("./src/components/post/paragraph/TextParagraph.jsx"),u=n("./src/components/ui/Card.jsx"),m=n("./src/framework/design-system/components/index.js"),d=n("./src/util/routes.js"),p=n("./src/util/numbers.js");function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var g=i.a.createElement("g",{fillRule:"evenodd"},i.a.createElement("path",{d:"M6.93 15.34l-2.06-2.06c-2.16-2.16-3.53-3.15-2.9-3.79.33-.32.8-.39 1.2 0l2.13 2.2c.08.08.16.07.38.13.21.05.36-.05.54-.23.17-.16.07-.6-.09-.77L3.5 8.2c-.37-.36-.5-1-.1-1.39.37-.37.8-.19 1.14.15.39.38 2.7 2.76 2.7 2.76a.42.42 0 0 0 .3.13.54.54 0 0 0 .33-.16c.17-.16.25-.46.09-.63 0 0-1.34-1.4-1.82-1.88-.71-.72-.77-1.22-.46-1.54.45-.44 1.05-.3 1.86.62l3.58 3.89-.75-1.95s-.47-1.25 0-1.5.84.4 1.17.9l1.86 3.34c1.01 1.65.69 3.8-.73 5.19-1.87 1.87-4.07.87-5.73-.78zM10.26.04H8.73l.77 3.3zM13.93 1.2L12.5.7l-.4 3.36zM6.5.57l-1.44.52L6.9 3.93z"}),i.a.createElement("path",{d:"M14.3 7.03c-.34-.5-.9-.52-1.25-.24-.25.19-.21.6-.2.9l1.51 2.64c1.17 1.9 1.33 3.66 0 5.45.4-.19.52-.23.9-.61 1.52-1.52 1.86-3.32.85-4.96l-1.8-3.18z"})),b=function(e){return i.a.createElement("svg",f({width:19,height:19,viewBox:"0 0 19 19"},e),g)};function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=i.a.createElement("path",{d:"M16.19 9.42c0 1.67-.72 2.84-2.03 4l-.1.09v.13a4.3 4.3 0 0 0 .15.85c.17.6.46 1.2.86 1.8a4.94 4.94 0 0 1-2.46-.84c-.26-.17-.33-.2-.54-.4l-.13-.12-.16.05c-.68.2-2.75.46-4.88-.16a5.9 5.9 0 0 1-4.1-5.4c0-3.37 3-6.12 6.7-6.12s6.69 2.75 6.69 6.12z",fillRule:"evenodd"}),x=function(e){return i.a.createElement("svg",h({width:19,height:19,viewBox:"0 0 19 19"},e),v)},E=n("./src/util/quote.js"),y=n("./src/components/stream/Quote.jsx");function j(){var e=o()(["\n  fragment InResponseToPostPreview_mediaResource on Post {\n    inResponseToMediaResource {\n      mediumQuote {\n        ...Quote_quote\n      }\n    }\n  }\n  ","\n"]);return j=function(){return e},e}function w(){var e=o()(["\n  fragment InResponseToPostPreview_postResult on PostResult {\n    __typename\n    ... on Post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        name\n      }\n      clapCount\n      responsesCount\n    }\n  }\n"]);return w=function(){return e},e}n.d(t,"a",function(){return _}),n.d(t,"c",function(){return I}),n.d(t,"b",function(){return k});var _=function(e){var t,n=e.inResponseToPostResult,r=e.inResponseToMediaResource,o=e.padding;if(n)switch(n.__typename){case"Post":t=n}if(!t)return null;var i=t.title,s=t.creator&&t.creator.name,l=parseInt(t.clapCount,10),f=parseInt(t.responsesCount,10),g=r&&r.mediumQuote&&Object(E.a)(r.mediumQuote),h=g&&g.type,v=a.createElement(m.f,{href:Object(d.U)(t)},a.createElement(u.a,null,a.createElement(m.B,{ui:"REGULAR"},a.createElement(m.b,{paddingLeft:"20px",paddingRight:"20px"},g&&h&&a.createElement(m.b,{paddingBottom:"20px"},a.createElement(c.c,{paragraph:g,paragraphStyle:h,spaceTop:10,richTextStyle:"STREAM"})),a.createElement(m.b,{display:"flex"},a.createElement(m.b,{display:"flex",flexGrow:"1",alignItems:"center"},a.createElement(m.d,{strong:!0,clamp:1},i)),a.createElement(m.d,null,a.createElement(m.b,{display:"flex",flexGrow:"0",alignItems:"center"},l>0?a.createElement(m.b,{display:"flex",alignItems:"center"},a.createElement(m.b,{tag:b,marginRight:"4px"}),a.createElement("div",null,Object(p.b)(l))):null,f>0?a.createElement(m.b,{display:"flex",alignItems:"center"},a.createElement(m.b,{tag:x,marginLeft:"8px",marginRight:"4px"}),a.createElement("div",null,Object(p.b)(f))):null))),a.createElement(m.d,null,s)))));return o?a.createElement(m.b,{padding:o},v):v},I=l()(w()),k=l()(j(),y.a)},"./src/components/post/MaybeRedirectToEditor.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/graphql-tag/src/index.js"),l=n.n(s),c=n("./src/util/routes.js"),u=n("./src/components/navigation/Redirect.jsx"),m=n("./src/components/session/WithViewer.jsx");function d(){var e=o()(["\n  fragment MaybeRedirectToEditor_post on Post {\n    id\n    isPublished\n    collection {\n      id\n      viewerCanEditOwnPosts\n      viewerCanEditPosts\n      viewerCanManage\n    }\n    creator {\n      id\n    }\n  }\n"]);return d=function(){return e},e}var p=l()(d()),f=Object(i.b)(function(e){return{authDomain:e.config.authDomain}})(function(e){var t=e.authDomain,n=e.post,r=e.children;return a.createElement(m.a,null,function(e){return function(e,t){var n=e.collection,r=e.creator&&t&&e.creator.id===t.id,o=r&&n&&n.viewerCanEditOwnPosts||n&&(n.viewerCanManage||n.viewerCanEditPosts);return(!e||!e.isPublished)&&(n?o:r)}(n,e)?a.createElement(u.a,{to:Object(c.T)(t,n.id)}):r})})},"./src/components/post/NormalizePostBodyModel.js":function(e,t,n){"use strict";n.d(t,"d",function(){return u}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return d}),n.d(t,"a",function(){return p});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/graphql-tag/src/index.js"),i=n.n(a),s=n("./src/util/string.js");function l(){var e=o()(["\n  fragment GetFeaturedImageIndex_bodyModel on RichText {\n    paragraphs {\n      type\n      text\n      metadata {\n        isFeatured\n      }\n    }\n  }\n"]);return l=function(){return e},e}function c(){var e=o()(["\n  fragment GetTitleIndexMap_bodyModel on RichText {\n    paragraphs {\n      type\n      text\n    }\n  }\n"]);return c=function(){return e},e}var u=function(e){for(var t=null,n=null,r=null,o=0;o<=e.length;o++){var a=e[o];if(!a)break;if(null!=t){"H4"===a.type&&(n=o);break}if("H3"===a.type||"H2"===a.type)t=o;else{if(null!=r)break;if("H4"!==a.type){if("IMG"===a.type||"IFRAME"===a.type||"P"===a.type&&"string"==typeof a.text&&Object(s.a)(a.text))continue;break}r=o}}return{titleIndex:t,subtitleIndex:n}},m=i()(c()),d=function(e){for(var t=null,n=0;n<e.length;n++)if("IMG"===e[n].type){if(e[n].metadata&&e[n].metadata.isFeatured)return n;null===t&&(t=n)}return t},p=i()(l())},"./src/components/post/PostCanonicalizer.js":function(e,t,n){"use strict";n.d(t,"b",function(){return b}),n.d(t,"a",function(){return h});var r=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),i=n.n(a),s=n("./node_modules/react/index.js"),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),u=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/url/url.js"),d=n.n(m),p=n("./src/components/navigation/Redirect.jsx"),f=n("./src/util/navigation.js");function g(){var e=i()(["\n  fragment PostCanonicalizer_post on Post {\n    mediumUrl\n  }\n"]);return g=function(){return e},e}var b=c()(g()),h=Object(u.b)(function(e){return{currentHost:e.navigation.host,shareKey:e.navigation.shareKey,source:e.navigation.referrerSource}})(function(e){var t=e.post,n=e.matchedPath,r=e.children,a=e.currentHost,i=e.shareKey,l=e.source,c=t.mediumUrl;if(!c)return r;var u=d.a.parse(decodeURIComponent(c)),m=o()({},l?{source:l}:{},i?{sk:i}:{});return a!==u.host?s.createElement(p.a,{to:Object(f.a)(c,m)}):u.path&&n!==u.path?s.createElement(p.a,{to:Object(f.a)(u.path,m)}):r})},"./src/components/post/PostMetadata.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/graphql-tag/src/index.js"),s=n.n(i),l=n("./node_modules/react-redux/es/index.js"),c=n("./src/metadata/Helmet.jsx"),u=n("./src/util/routes.js"),m=n("./src/util/miroImage.js"),d=n("./node_modules/serialize-javascript/index.js"),p=n.n(d),f=n("./src/util/navigation.js");function g(){var e=o()(["\n  fragment PostJsonLd_post on Post {\n    id\n    title\n    mediumUrl\n    creator {\n      name\n      username\n    }\n    collection {\n      id\n      name\n      domain\n      slug\n      logo {\n        id\n        originalWidth\n        originalHeight\n      }\n    }\n    previewImage {\n      id\n      originalWidth\n      originalHeight\n    }\n    firstPublishedAt\n    updatedAt\n    tags {\n      displayTitle\n    }\n    topics {\n      name\n      slug\n    }\n    sequence {\n      slug\n    }\n    lockedSource\n    layerCake\n  }\n"]);return g=function(){return e},e}var b={TAG:"Tag",TOPIC:"Topic",PUBLICATION:"Publication",SEQUENCE:"Sequence",LOCKED_POST_SOURCE:"LockedPostSource",ELEVATED:"Elevated",LAYER_CAKE:"LayerCake",LITE:"Lite"},h={id:"1*OMF3fSqH8t4xBJ9-6oZDZw.png",originalWidth:545,originalHeight:106};function v(e){var t=e.id,n=e.originalWidth,r=e.originalHeight;if(!t||!n||!r)return null;var o=Math.min(n,1920),a=o/n;return{"@type":"ImageObject",width:o,height:Math.floor(r*a),url:Object(m.a)({miroId:t,width:o,strategy:"RESAMPLE"})}}function x(e,t){return"".concat(e,":").concat(t)}var E=Object(l.b)(function(e){var t=e.config.productName,n=e.navigation;return{currentLocation:n.currentLocation,host:n.host,productName:t}})(function(e){var t=e.currentLocation,n=e.host,r=e.post,o=e.productName,i=r.collection,s=r.creator,l=r.id,m=r.mediumUrl,d=r.title,g=r.previewImage,E=r.firstPublishedAt,y=r.updatedAt,j=r.tags,w=r.topics,_=r.sequence,I=r.lockedSource,k=r.layerCake,C=i&&i.logo&&i.logo.id?i.logo:h,P=i?{"@type":"Organization",name:i.name,url:i.domain||Object(f.b)(n,Object(u.v)(i,t)),logo:v(C)}:{"@type":"Organization",name:o,url:Object(f.b)(n,"/"),logo:v(C)},O=[x(b.LITE,"true")];j&&j.forEach(function(e){e.displayTitle&&O.push(x(b.TAG,e.displayTitle))}),w&&w.forEach(function(e){e.name?O.push(x(b.TOPIC,e.name)):e.slug&&O.push(x(b.TOPIC,e.slug))}),i&&i.slug&&O.push(x(b.PUBLICATION,i.slug)),O.push(x(b.ELEVATED,(!!_).toString())),_&&_.slug&&O.push(x(b.SEQUENCE,_.slug)),I&&O.push(x(b.LOCKED_POST_SOURCE,I)),null!=k&&O.push(x(b.LAYER_CAKE,k.toString()));var S=g&&g.id?v(g):null,M={"@context":"http://schema.org","@type":"NewsArticle",image:S,thumbnailUrl:S?S.url:null,url:m,dateCreated:E&&new Date(E).toISOString(),datePublished:E&&new Date(E).toISOString(),dateModified:y&&new Date(y).toISOString(),headline:d,name:d,articleId:l,keywords:O.length?O:null,author:s&&s.name&&s.username?{"@type":"Person",name:s.name||s.username,url:Object(f.b)(n,Object(u.Eb)(s.username))}:null,creator:s&&[s.name],publisher:P,mainEntityOfPage:m};return a.createElement(c.a,null,a.createElement("script",{type:"application/ld+json"},p()(M,{isJSON:!0})))}),y=s()(g()),j=n("./src/util/numbers.js"),w=n("./src/util/string.js"),_=n("./src/store/actions/metadata.js");function I(){var e=o()(["\n  fragment PostMetadata_post on Post {\n    id\n    title\n    socialTitle\n    socialDek\n    canonicalUrl\n    mediumUrl\n    metaDescription\n    firstPublishedAt\n    latestPublishedAt\n    visibility\n    readingTime\n    creator {\n      name\n      username\n      twitterScreenName\n    }\n    sequence {\n      title\n    }\n    collection {\n      ampEnabled\n      domain\n      twitterUsername\n      facebookPageId\n      favicon {\n        id\n      }\n    }\n    previewContent {\n      subtitle\n    }\n    previewImage {\n      id\n      focusPercentX\n      focusPercentY\n      originalHeight\n      originalWidth\n    }\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          type\n          text\n        }\n      }\n    }\n    ...PostJsonLd_post\n  }\n  ","\n"]);return I=function(){return e},e}function k(e,t){var n=e.metaDescription,r=e.title||"";if(n)return n;var o=function(e){var t="";if(e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs){for(var n=e.content.bodyModel.paragraphs,r=0;r<n.length;r++){var o=n[r];if("P"===o.type&&o.text&&o.text.length>100&&(t+=" ".concat(o.text)),t.length>250)break}return Object(w.b)(t,200)}return t}(e);if(o.length>150)return o;var a=(e.previewContent&&e.previewContent.subtitle||"")+".";if(a.length>140)return a;var i=r+". "+a;if(i.length>140)return i;var s="“".concat(r,"” is published");return e.creator&&e.creator.name&&(s+=" by ".concat(e.creator.name)),e.collection&&e.collection.name&&(s+=" in ".concat(e.collection.name)),"".concat(a," ").concat(s,".")}n.d(t,"a",function(){return P});var C={setFaviconImageId:_.b},P=(t.b=Object(l.b)(function(e){return{iTunesAppId:e.config.iTunesAppId,productName:e.config.productName}},C)(function(e){var t,n,r=e.isAmp,o=e.iTunesAppId,i=e.productName,s=e.post,l=e.setFaviconImageId,d=s.canonicalUrl,p=s.collection,f=s.creator,g=s.firstPublishedAt,b=s.id,h=s.latestPublishedAt,v=s.mediumUrl,x=s.previewContent,y=s.socialTitle,w=s.socialDek,_=s.visibility,I=p&&p.ampEnabled,C=f&&f.name,P=function(e,t){var n=e.title||"";return n.length>50?n:(e.sequence&&e.sequence.title?n+=" - ".concat(e.sequence.title):e.collection&&e.collection.name?n+=" - ".concat(e.collection.name):e.creator&&e.creator.name&&(n+=" - ".concat(e.creator.name)),e.collection&&e.collection.domain?n:"".concat(n," - ").concat(t))}(s,i).trim(),O=k(s).trim(),S=w||x&&x.subtitle||O;if(s&&s.previewImage&&s.previewImage.id){var M=s.previewImage,T="number"==typeof M.focusPercentX&&"number"==typeof M.focusPercentY,L=M.originalWidth&&M.originalHeight&&1.9*M.originalHeight>M.originalWidth;if(T&&L){var R=M.originalWidth?Math.min(M.originalWidth,1200):1200;t=Object(m.a)({focusPercentX:M.focusPercentX,focusPercentY:M.focusPercentY,height:Math.round(R/1.9),ignorePixelRatio:!0,miroId:M.id,strategy:"CROP",width:R})}else t=Object(m.a)({miroId:M.id,strategy:"RESAMPLE",width:1200,ignorePixelRatio:!0})}f&&f.username&&(n=Object(u.Eb)(f.username));var B=Object(u.g)(b),A=!g||"PUBLIC"!==_&&"LOCKED"!==_,U=h&&new Date(h).toISOString(),D=Object(j.d)(s.readingTime||0),N=f&&f.twitterScreenName,F=p&&p.twitterUsername||"Medium",V=p&&p.facebookPageId;a.useEffect(function(){return p&&p.domain&&p.favicon&&l(p.favicon.id),function(){l(null)}},[]);var q=a.useMemo(function(){return a.createElement(c.a,{htmlAttributes:r?{amp:void 0}:{}},a.createElement("meta",{property:"og:type",content:"article"}),U&&a.createElement("meta",{property:"article:published_time",content:U}),I&&!r?a.createElement("link",{rel:"amphtml",href:Object(u.c)(b)}):null,a.createElement("title",null,P),a.createElement("meta",{name:"title",content:P}),a.createElement("meta",{property:"og:title",content:y||P}),a.createElement("meta",{property:"twitter:title",content:y||P}),V&&a.createElement("meta",{property:"fb:pages",content:V}),a.createElement("meta",{name:"twitter:site",content:"@".concat(F)}),a.createElement("meta",{name:"twitter:app:url:iphone",content:B}),a.createElement("meta",{property:"al:android:url",content:B}),a.createElement("meta",{property:"al:ios:url",content:B}),a.createElement("meta",{name:"apple-itunes-app",content:"app-id=".concat(o,",app-argument=").concat(B)}),a.createElement("meta",{property:"al:android:app_name",content:"Medium"}),O&&a.createElement("meta",{name:"description",content:O}),S&&a.createElement("meta",{property:"og:description",content:S}),S&&a.createElement("meta",{property:"twitter:description",content:S}),a.createElement("meta",{property:"og:url",content:v}),a.createElement("meta",{property:"al:web:url",content:v}),t&&a.createElement("meta",{property:"og:image",content:t}),t&&a.createElement("meta",{name:"twitter:image:src",content:t}),a.createElement("meta",{name:"twitter:card",content:t?"summary_large_image":"summary"}),n&&a.createElement("meta",{property:"article:author",content:n}),n&&a.createElement("link",{rel:"author",href:n}),N&&a.createElement("meta",{name:"twitter:creator",content:"@".concat(N)}),C&&a.createElement("meta",{name:"author",content:C}),a.createElement("link",{rel:"canonical",href:d||v}),a.createElement("meta",{name:"robots",content:"".concat(A?"noindex":"index",",follow")}),a.createElement("meta",{name:"referrer",content:"UNLISTED"!==_?"unsafe-url":"origin"}),r?null:a.createElement("meta",{name:"twitter:label1",value:"Reading time"}),r?null:a.createElement("meta",{name:"twitter:data1",value:"".concat(D," min read")}))},[r,P,d,v,t,I,b,y,O,n,C,N,B,A,U]);return a.createElement(a.Fragment,null,q,a.createElement(E,{post:s}))}),s()(I(),y))},"./src/components/post/PostPaywallAlert.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return x}),n.d(t,"b",function(){return E});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/graphql-tag/src/index.js"),s=n.n(i),l=n("./src/framework/design-system/components/index.js"),c=n("./src/framework/design-system/type/Detail.js"),u=n("./src/components/session/WithViewer.jsx"),m=n("./src/util/routes.js");function d(){var e=o()(["\n  fragment PostPaywallAlert_post on Post {\n    visibility\n    lockedSource\n    curationEligibleAt\n    collection {\n      isEnrolledInHightower\n      viewerCanManage\n    }\n    creator {\n      id\n      isPartnerProgramEnrolled\n    }\n  }\n"]);return d=function(){return e},e}var p=function(){return a.createElement(l.v,{href:Object(m.A)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more")},f=function(){return a.createElement(l.v,{href:Object(m.z)(),target:"_blank",inline:!0,linkStyle:"OBVIOUS"},"Learn more")},g=function(){return a.createElement(a.Fragment,null,"This story is not part of the metered paywall. ",a.createElement(p,null))},b={LOCKED:function(){return a.createElement(a.Fragment,null,"This story is eligible to be part of the metered paywall. ",a.createElement(f,null))},PUBLIC:g,UNLISTED:g},h={LOCKED:function(){return a.createElement(a.Fragment,null,"This story is eligible to earn money through the Partner Program. It may be shown as part of the metered paywall. ",a.createElement(f,null))},PUBLIC:function(){return a.createElement(a.Fragment,null,"This story is not eligible to earn money through the Partner Program. It is not part of the metered paywall. ",a.createElement(p,null))},UNLISTED:g};function v(e){var t=e.post,n=e.viewer,r=t.collection,o=t.lockedSource,i=t.creator,s=t.visibility,u=t.curationEligibleAt,m=!(!n||!t.creator||n.id!==t.creator.id),d=!(!t.collection||!t.collection.viewerCanManage);if(!m&&!d)return null;var p=r&&r.isEnrolledInHightower,f="LOCKED_POST_SOURCE_UGC"===o,g=m&&i&&i.isPartnerProgramEnrolled,v=f&&(d&&p||g&&!p)?h:b,x=!!(u&&u>0)?v.LOCKED:v[s];return a.createElement(l.J,{initialVisibility:!0},function(e){var t=e.hide;return e.isVisible&&a.createElement(l.b,{border:"BASE_LIGHT",borderRadius:"4px",position:"relative",marginTop:"20px"},a.createElement(l.g,{onClick:t,size:"LARGE"}),a.createElement(l.b,{padding:"20px"},a.createElement(l.b,{marginBottom:"8px"},a.createElement("i",null,a.createElement(c.a,{scale:"S"},"Only you can see this message"))),a.createElement(c.a,{scale:"M",color:"DARKER"},a.createElement(x,null))))})}function x(e){var t=e.post;return a.createElement(u.a,null,function(e){return a.createElement(v,{post:t,viewer:e})})}var E=s()(d())},"./src/components/post/PostPublishedDialog.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return O}),n.d(t,"b",function(){return S});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/extends.js"),l=n.n(s),c=n("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js"),u=n.n(c),m=n("./node_modules/react/index.js"),d=n("./node_modules/graphql-tag/src/index.js"),p=n.n(d),f=n("./node_modules/react-redux/es/index.js"),g=n("./src/framework/design-system/components/index.js"),b=n("./src/framework/design-system/type/index.js"),h=n("./src/framework/design-system/util/type/headingSizeRule.js"),v=n("./src/styles/colors.js"),x=n("./src/util/navigation.js"),E=n("./src/util/routes.js"),y=n("./src/components/session/WithViewer.jsx"),j=n("./src/svg/facebook-filled-21px.svg"),w=n("./src/svg/twitter-filled-21px.svg");function _(){var e=o()(["\n  fragment PostPublishedDialog_post on Post {\n    id\n    visibility\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    creator {\n      id\n    }\n    collection {\n      id\n      viewerCanManage\n    }\n  }\n"]);return _=function(){return e},e}var I=function(e){var t=e.children,n=u()(e,["children"]);return m.createElement(g.b,{marginBottom:"8px"},m.createElement(g.c,l()({buttonStyle:"SOCIAL",size:"REGULAR",width:"212px"},n),m.createElement(g.b,{display:"flex",alignItems:"center",justifyContent:"center"},t)))},k=function(e){var t=e.url,n=e.label,r=m.useState(!1),o=i()(r,2),a=o[0],s=o[1],l=m.useState(null),c=i()(l,2),u=c[0],d=c[1],p=m.useRef(null);m.useEffect(function(){return function(){clearTimeout(u)}},[]);var f=m.useCallback(function(){var e=p.current;e&&(e.disabled=!1,e.select(),document.execCommand("copy"),e.disabled=!0,s(!0),clearTimeout(u),d(setTimeout(function(){return s(!1)},2e3)))});return m.createElement(m.Fragment,null,m.createElement("input",{disabled:!0,readOnly:!0,type:"text",ref:p,value:t,style:{position:"absolute",top:"-100vh"}}),m.createElement(I,{onClick:f},a?"Copied!":n))},C=function(e){var t=e.postId,n=e.isUnlisted,r=e.postPath,o=e.authDomain;return m.createElement(g.b,{display:"flex",flexDirection:"column",alignItems:"center"},m.createElement(b.a,{color:"DARKER",scale:"L",tag:"p"},function(e){return e?"Share your story outside Medium.":"Share your story with the world."}(n)),m.createElement(g.b,{marginTop:"20px"},m.createElement(I,{href:Object(E.C)(o,t)},m.createElement(j.a,{style:{marginRight:"8px",fill:"#3b5998"}}),"Share with Facebook"),m.createElement(I,{href:Object(E.sb)(o,t)},m.createElement(w.a,{style:{marginRight:"8px",fill:"#38a1f3"}}),"Share with Twitter"),m.createElement(k,{url:r,label:"Copy story link"})))},P=function(e){var t=e.isVisible,n=e.hide,r=e.post,o=e.authDomain,a=r.id,i=r.visibility,s=r.curationEligibleAt,l=r.mediumUrl,c=r.shareKey,u="UNLISTED"===i,d=!!s,p=Object(h.b)("h3");return m.createElement(g.k,{isVisible:t,hide:n,withAnimation:!0,withCloseButton:!1},m.createElement(g.K,null,function(e){return m.createElement(g.b,{background:v.w,borderRadius:"4px",boxShadow:"0 2px 10px ".concat(Object(v.r)(.15)),position:"relative",width:"900px",textAlign:"center",md:{width:"600px"},sm:{width:"calc(100vw - 128px)"}},m.createElement(g.g,{onClick:n,size:"LARGE"}),m.createElement(g.b,{padding:"56px"},m.createElement(g.b,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},m.createElement("h3",{className:e(p)},"Your story is published!"),m.createElement(g.b,{maxWidth:"520px",marginTop:"20px"},m.createElement(b.a,{color:"DARKER",scale:"L",tag:"p"},function(e,t){return e?"Your unlisted story will not appear publicly on Medium, but you can still share it.":t?"If our curators recommend your story to readers by adding it to relevant topics, we will email you to let you know. Recommended stories are part of Medium's metered paywall, and you can use the custom Friend Link below to give anyone who clicks it free access to your story.":"You chose not to make this story eligible for review by curators and distribution through Medium topics. Your story will only be shared on Medium with readers who follow you."}(u,d))),m.createElement(g.b,{paddingTop:"20px"},d&&!u&&l&&c&&m.createElement(k,{url:Object(x.a)(Object(E.U)(r),{sk:c}),label:"Copy Friend Link"})),m.createElement(g.b,{borderBottom:"BASE_LIGHTER",width:"100%",margin:"20px 0"})),a&&l&&m.createElement(C,{postId:a,isUnlisted:u,postPath:Object(E.U)(r),authDomain:o})))}))},O=Object(f.b)(function(e){return{authDomain:e.config.authDomain}})(function(e){var t=e.post;return m.createElement(y.a,null,function(n){return n&&n.id&&(n.id===(t.creator&&t.creator.id)||t.collection&&t.collection.viewerCanManage)?m.createElement(P,e):null})}),S=p()(_())},"./src/components/post/PostSidebar.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return P}),n.d(t,"a",function(){return O});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/defineProperty.js"),l=n.n(s),c=n("./node_modules/react/index.js"),u=n("./node_modules/graphql-tag/src/index.js"),m=n.n(u),d=n("./node_modules/react-redux/es/index.js"),p=n("./src/util/routes.js"),f=n("./src/components/collection/CollectionFollowButton.jsx"),g=n("./src/components/post/multivote/MultiVote.jsx"),b=n("./src/components/post/bookmark/index.js"),h=n("./src/framework/track/DomMonitorContext.js"),v=n("./src/framework/design-system/components/index.js"),x=n("./src/framework/design-system/type/index.js"),E=n("./src/styles/breakpoints.js"),y=n("./src/util/dom.js"),j=n("./src/WatchBounds.js"),w=n("./src/framework/source/index.js");function _(){var e=o()(["\n  fragment PostSidebar_post on Post {\n    id\n    clapCount\n    collection {\n      id\n      description\n      ...CollectionFollowButton_collection\n      ...collectionUrl_collection\n    }\n    ...BookmarkButton_post\n    ...CollectionFollowButton_post\n    ...MultiVote_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return _=function(){return e},e}var I=function(e){return function(t){return l()({opacity:e?1:0,pointerEvents:e?"auto":"none",willChange:"opacity",position:"fixed",transition:"opacity 200ms",width:"131px",left:"50%",transform:"translateX(-516px)",top:"calc(65px + 54px + 40px)"},E.lg(t),{display:"none"})}};var k=function(e,t){return function(){var n=new IntersectionObserver(function(n){var r=e.get("ghost-track");if(r){var o=n.find(function(e){return e.target===r.ref.current});o&&t(o.isIntersecting)}else t(!1)});return e.forEach(function(e){e.ref.current&&n.observe(e.ref.current)}),function(){n.disconnect()}}},C=function(e,t){return function(){return e.on("scroll_throttled",t),e.on("scroll_end",t),e.on("resize_throttled",t),function(){e.off("scroll_throttled",t),e.off("scroll_end",t),e.off("resize_throttled",t)}}};var P=m()(_(),f.c,p.w,f.b,b.b,g.b),O=Object(d.b)(function(e){return{currentLocation:e.navigation.currentLocation}})(function(e){var t=e.currentLocation,n=e.isClearOfBounds,r=e.isOnPage,o=e.post,a=c.useContext(j.b).watchedBounds,s=c.useState(r||!1),l=i()(s,2),u=l[0],m=l[1],d=c.useState(n||!1),E=i()(d,2),_=E[0],P=E[1],O=c.useRef(),S=o.collection,M=Object(h.b)();c.useEffect(k(a,m),[a]);var T=c.useCallback(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(){var o=e.current;if(o){var a=r.threshold||10,i=["image","bgimage","footer","byline","title","header"],s=Array.from(t.values()).filter(function(e){var t=e.ref,n=e.opts;return i.includes(n.type)&&!!t.current}).map(function(e){var t=e.ref,n=e.opts,r=n&&n.offset,o=Object(y.a)(t.current);return Object(y.h)(o,r)}),l=Object(y.a)(o),c=!s.some(function(e){return Object(y.f)(e,l,a)});n(c)}}}(O,a,P,{threshold:10}),[a,P]);c.useEffect(C(M,T),[M,T]);var L=u&&_;return c.createElement(w.b,{source:{susiEntry:"post_sidebar",name:"post_sidebar"}},c.createElement(v.K,null,function(e){return c.createElement("div",{className:e(I(L)),ref:O,"data-test-id":"post-sidebar"},c.createElement(v.b,{display:"flex",flexDirection:"column"},S&&c.createElement(v.b,{paddingBottom:"28px",borderBottom:"BASE_LIGHTER"},S.name&&c.createElement(v.v,{href:Object(p.v)(S,t)},c.createElement(x.b,{scale:"XS"},S.name)),S.description&&c.createElement(v.b,{paddingTop:"2px",paddingBottom:"20px"},c.createElement(x.a,{scale:"M",clamp:6},S.description)),c.createElement(f.a,{collection:S,post:o})),c.createElement(w.b,{source:{susiEntry:"clap_sidebar"},extendSource:!0},c.createElement(v.b,{display:"flex",marginBottom:"19px",marginLeft:"-5px",paddingTop:"28px"},c.createElement(g.a,{post:o,buttonStyle:"SUBTLE_PADDED",hasDialog:!0}))),c.createElement(b.a,{post:o})))}))})},"./src/components/post/body/InteractivePostBody.js":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/extends.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),l=n.n(s),c=n("./node_modules/react/index.js"),u=n("./node_modules/graphql-tag/src/index.js"),m=n.n(u),d=n("./node_modules/react-apollo/react-apollo.esm.js"),p=n("./src/components/post/body/PostBody.jsx"),f=n("./src/components/post/body/ActivePrivateNoteContext.js"),g=n("./src/components/post/body/ActiveSelectionContext.js"),b=n("./src/components/post/markups/HighlightSegmentsContext.js");function h(){var e=l()(["\n  fragment NormalizeHighlights_paragraph on Paragraph {\n    name\n    text\n  }\n"]);return h=function(){return e},e}function v(){var e=l()(["\n  fragment NormalizeHighlights_highlight on Quote {\n    endOffset\n    startOffset\n    paragraphs {\n      name\n      text\n    }\n  }\n"]);return v=function(){return e},e}function x(e,t,n){if(!e||"number"!=typeof t||"number"!=typeof n)return null;var r=t,o=n;return e.substr(r,o-r)}var E=m()(v()),y=m()(h()),j=n("./src/components/post/body/ParagraphRefsMapContext.js"),w=n("./src/components/session/WithFlag.jsx"),_=n("./src/components/session/WithViewer.jsx");function I(){var e=l()(["\n  query InteractivePostBodyQuery($postId: ID!, $showHighlights: Boolean!, $showNotes: Boolean!) {\n    post(id: $postId) {\n      id\n      highlights @include(if: $showHighlights) {\n        id\n        ...ActiveSelectionContext_highlight\n        ...HighlighSegmentContext_highlight\n        ...NormalizeHighlights_highlight\n        ...PostBody_highlight\n      }\n      privateNotes @include(if: $showNotes) {\n        ...PostBody_privateNote\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return I=function(){return e},e}function k(){var e=l()(["\n  fragment InteractivePostBody_post on Post {\n    id\n    # please note that the postMeteringOptions is defined in handlers that use InteractivePostBody\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n      bodyModel {\n        ...PostBody_bodyModel\n        paragraphs {\n          ...HighlighSegmentContext_paragraph\n          ...NormalizeHighlights_paragraph\n        }\n      }\n    }\n    highlights {\n      id\n      ...PostBody_highlight\n    }\n    creator {\n      id\n      allowNotes\n      ...PostBody_creator\n    }\n    ...ActiveSelectionContext_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return k=function(){return e},e}n.d(t,"a",function(){return C});var C=m()(k(),g.c,b.b,y,p.a,p.c,p.b),P=m()(I(),g.b,b.a,p.c,p.d,E),O=c.forwardRef(function(e,t){var n=e.post,r=e.postBodyInserts,a=n.content,s=n.latestPublishedVersion;if(!a)throw new Error("Expected post to have content.");var l={bodyModel:a.bodyModel,creator:n.creator,postBodyInserts:r,ref:t,richTextStyle:"FULL_PAGE"},u=n&&n.creator&&n.creator.allowNotes||!1;return c.createElement(w.a,{name:"enable_lite_post_highlights_view_only",nonBlocking:!0},function(e){return c.createElement(w.a,{name:"enable_lite_private_notes",nonBlocking:!0},function(t){var r=!!t;return e||r?c.createElement(d.c,{notifyOnNetworkStatusChange:!0,ssr:!1,query:P,variables:{postId:n.id,showHighlights:e,showNotes:r&&u}},function(e){e.loading,e.error;var t=e.data,r=(t=void 0===t?{}:t).post,u=a.bodyModel&&a.bodyModel.paragraphs,m=function(e,t){return e&&t?e.map(function(e){var n=e.endOffset,r=e.startOffset,a=e.paragraphs&&e.paragraphs[0],i=function(e,t){return e?t.find(function(t){var n=t.name;return e===n}):null}(a.name,t);if(!a||!i)return null;var s=x(a.text,r,n),l=x(i.text,r,n);if(!s||!l)return null;if(s===l)return e;var c=i.text?i.text.indexOf(s):null;if("number"!=typeof c||c<0)return null;var u=c+s.length;return o()({},e,{endOffset:u,startOffset:c})}).filter(Boolean):e}(r&&r.highlights||null,u),d=r&&r.privateNotes||null;return c.createElement(j.b,null,c.createElement(w.a,{name:"enable_lite_post_highlights",nonBlocking:!0},function(e){var t=c.createElement(p.e,i()({},l,{highlights:m,privateNotes:d}));return e?c.createElement(f.a,null,c.createElement(g.d,{interactivePost:o()({},n,{latestPublishedVersion:s}),highlights:m},c.createElement(_.a,{nonBlocking:!0},function(e){return c.createElement(b.d,{highlights:m,paragraphs:u,viewer:e},t)}))):t}))}):c.createElement(p.e,l)})})});t.b=O},"./src/components/post/footer/PostFooter.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/graphql-tag/src/index.js"),i=n.n(a),s=n("./node_modules/react/index.js"),l=n.n(s),c=n("./node_modules/react-redux/es/index.js"),u=n("./src/framework/design-system/components/index.js"),m=n("./src/framework/design-system/type/index.js"),d=n("./src/components/style/index.js"),p=n("./src/styles/flex.js"),f=n("./src/util/post/claps.js"),g=n("./node_modules/@babel/runtime/helpers/extends.js"),b=n.n(g),h=n("./node_modules/react-apollo/react-apollo.esm.js"),v=n("./src/framework/source/SourceContext.jsx"),x=n("./src/components/ui/PopoverMenu.jsx"),E=n("./src/components/susi/SusiClickable.jsx"),y=n("./src/components/session/WithViewer.jsx"),j=n("./src/util/routes.js"),w=n("./src/components/session/WithFlag.jsx"),_=n("./src/components/post/bookmark/index.js"),I=n("./src/svg/facebook-filled-21px.svg"),k=n("./src/svg/twitter-filled-21px.svg");function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=l.a.createElement("g",{fillRule:"evenodd"},l.a.createElement("path",{d:"M15.6 5a.42.42 0 0 0 .17-.3.42.42 0 0 0-.12-.33l-2.8-2.79a.5.5 0 0 0-.7 0l-2.8 2.8a.4.4 0 0 0-.1.32c0 .12.07.23.16.3h.02a.45.45 0 0 0 .57-.04l2-2V10c0 .28.23.5.5.5s.5-.22.5-.5V2.93l2.02 2.02c.08.07.18.12.3.13.11.01.21-.02.3-.08v.01"}),l.a.createElement("path",{d:"M18 7h-1.5a.5.5 0 0 0 0 1h1.6c.5 0 .9.4.9.9v10.2c0 .5-.4.9-.9.9H6.9a.9.9 0 0 1-.9-.9V8.9c0-.5.4-.9.9-.9h1.6a.5.5 0 0 0 .35-.15A.5.5 0 0 0 9 7.5a.5.5 0 0 0-.15-.35A.5.5 0 0 0 8.5 7H7a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h11a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2"})),O=function(e){return l.a.createElement("svg",C({width:25,height:25},e),P)};function S(){var e=o()(["\n  fragment PostFooterSocialPopover_post on Post {\n    id\n  }\n"]);return S=function(){return e},e}function M(e){return{fill:e.baseColor.fill.normal}}function T(e){return{fill:e.baseColor.fill.lighter}}function L(){return s.createElement(u.K,null,function(e){return s.createElement(I.a,{className:e(T)})})}function R(){return s.createElement(u.K,null,function(e){return s.createElement(k.a,{className:e(T)})})}function B(){return s.createElement(u.K,null,function(e){return s.createElement(O,{className:e(M)})})}var A=Object(c.b)(function(e){return{authDomain:e.config.authDomain}})(function(e){var t=e.post,n=e.authDomain,r=t.id;return s.createElement(u.J,null,function(e){var t=e.isVisible,o=e.toggle,a=e.hide;return s.createElement(u.x,{isVisible:t,hide:a,popoverRenderFn:function(){return s.createElement(x.a,null,s.createElement(x.b,null,s.createElement(u.b,{marginTop:"-4px",marginBottom:"12px"},s.createElement(u.v,{href:Object(j.sb)(n,r)},s.createElement(R,null),s.createElement(u.b,{display:"inline",marginLeft:"8px",marginTop:"2px"},s.createElement(m.a,{scale:"S",tag:"span"},"Share on Twitter")))),s.createElement(u.b,{marginBottom:"-3px"},s.createElement(u.v,{href:Object(j.C)(n,r)},s.createElement(L,null),s.createElement(u.b,{display:"inline",marginLeft:"8px",marginTop:"2px"},s.createElement(m.a,{scale:"S",tag:"span"},"Share on Facebook"))))))}},s.createElement(u.v,{onClick:o},s.createElement(B,null)))})}),U=i()(S()),D=n("./src/components/post/multivote/MultiVote.jsx"),N=n("./src/components/mutations/UserBlockMutation.jsx"),F=n("./src/store/actions/navigation.js");function V(){var e=o()(["\n  mutation UserReportStoryMutation(\n    $targetPostId: ID!\n    $targetAuthorId: ID!\n    $alsoBlockAuthor: Boolean!\n    $reason: String!\n  ) {\n    reportStoryAndMaybeBlockAuthor(\n      targetPostId: $targetPostId\n      targetAuthorId: $targetAuthorId\n      alsoBlockAuthor: $alsoBlockAuthor\n      reason: $reason\n    ) {\n      id\n      isBlocking\n    }\n  }\n"]);return V=function(){return e},e}var q=i()(V()),W=Object(c.b)()(function(e){var t=e.targetAuthorId,n=e.targetPostId,r=e.dispatch,o=e.children,a=e.onOptimisticComplete,i=e.isBlocking;return s.createElement(h.b,{mutation:q,onCompleted:function(){r(Object(F.i)({message:"Successfully reported post."}))}},function(e){return o({mutate:function(r,o){var s=e({variables:{targetAuthorId:t,targetPostId:n,alsoBlockAuthor:r,reason:o},optimisticResponse:{__typename:"Mutation",reportStoryAndMaybeBlockAuthor:{__typename:"User",id:t,isBlocking:i||r}}});return a&&a(),s}})})}),H=n("./src/components/mutations/UserUnblockMutation.jsx"),$=n("./src/components/user/UserBlockConfirmDialog.jsx"),G=n("./src/styles/theme.js"),z=n("./src/framework/style/components/ThemeProvider.js"),K=function(e){var t=e.isVisible,n=e.hide,r=e.onSubmit,o=!1,a="spam";return s.createElement(z.a,{theme:G.a},s.createElement(u.k,{isVisible:t,hide:n},s.createElement(u.b,{display:"flex",margin:"auto",flexDirection:"column",alignItems:"center",width:"100%",height:"100%"},s.createElement(m.b,{scale:"M"},"Report Story"),s.createElement(u.b,{display:"flex",flexDirection:"column",width:"100%",paddingRight:"5px",marginBottom:"30px"},s.createElement(u.b,{marginTop:"25px",marginBottom:"30px",padding:"5px 0"},s.createElement(u.z,{onChange:function(e){a=e},options:[{name:"Spam",value:"Spam"},{name:"Harassment",value:"Harassment"},{name:"Other",value:"Rules Violation"}]})),s.createElement(u.e,{onChange:function(){o=!o}},"Also block the author of this story")),s.createElement(u.b,{display:"flex",justifyContent:"center",marginBottom:"10px"},s.createElement(u.b,{marginRight:"8px"},s.createElement(u.c,{buttonStyle:"OBVIOUS",onClick:function(){r(o,a),n()}},"Report")),s.createElement(u.c,{onClick:n},"Cancel")),s.createElement(u.b,{marginTop:"50px",textAlign:"center"},s.createElement(u.d,null,"Report"," ",s.createElement(u.v,{href:"https://medium.com/policy/mediums-copyright-and-dmca-policy-d126f73695",linkStyle:"OBVIOUS",inline:!0},"copyright infringement")," ","or"," ",s.createElement(u.v,{href:"https://medium.com/policy/mediums-trademark-policy-e3bb53df59a7",linkStyle:"OBVIOUS",inline:!0},"trademark infringement"),".",s.createElement("br",null),"Read"," ",s.createElement(u.v,{href:"https://medium.com/policy/medium-rules-30e5502c4eb4",linkStyle:"OBVIOUS",inline:!0},"our rules"),".")))))};function Y(){return(Y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var J=l.a.createElement("path",{d:"M23.2 5H5.8a.8.8 0 0 0-.8.8V23.2c0 .44.35.8.8.8h9.3v-7.13h-2.38V13.9h2.38v-2.38c0-2.45 1.55-3.66 3.74-3.66 1.05 0 1.95.08 2.2.11v2.57h-1.5c-1.2 0-1.48.57-1.48 1.4v1.96h2.97l-.6 2.97h-2.37l.05 7.12h5.1a.8.8 0 0 0 .79-.8V5.8a.8.8 0 0 0-.8-.79"}),X=function(e){return l.a.createElement("svg",Y({width:29,height:29},e),J)};function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Z=l.a.createElement("path",{d:"M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"}),ee=function(e){return l.a.createElement("svg",Q({width:25,height:25,viewBox:"-480.5 272.5 21 21"},e),Z)};function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ne=l.a.createElement("path",{d:"M22.05 7.54a4.47 4.47 0 0 0-3.3-1.46 4.53 4.53 0 0 0-4.53 4.53c0 .35.04.7.08 1.05A12.9 12.9 0 0 1 5 6.89a5.1 5.1 0 0 0-.65 2.26c.03 1.6.83 2.99 2.02 3.79a4.3 4.3 0 0 1-2.02-.57v.08a4.55 4.55 0 0 0 3.63 4.44c-.4.08-.8.13-1.21.16l-.81-.08a4.54 4.54 0 0 0 4.2 3.15 9.56 9.56 0 0 1-5.66 1.94l-1.05-.08c2 1.27 4.38 2.02 6.94 2.02 8.3 0 12.86-6.9 12.84-12.85.02-.24 0-.43 0-.65a8.68 8.68 0 0 0 2.26-2.34c-.82.38-1.7.62-2.6.72a4.37 4.37 0 0 0 1.95-2.51c-.84.53-1.81.9-2.83 1.13z"}),re=function(e){return l.a.createElement("svg",te({width:29,height:29},e),ne)};function oe(){var e=o()(["\n  fragment PostFooterActionsBar_post on Post {\n    id\n    isPublished\n    viewerClapCount\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    creator {\n      isBlocking\n    }\n    ...BookmarkButton_post\n    ...MultiVote_post\n    ...SusiClickable_post\n    ...PostFooterSocialPopover_post\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return oe=function(){return e},e}function ae(e){e.theme;return{marginTop:"15px"}}function ie(e){return{fill:e.baseColor.fill.normal}}function se(){return s.createElement(u.K,null,function(e){return s.createElement(X,{className:e(ie)})})}function le(){return s.createElement(u.K,null,function(e){return s.createElement(ee,{className:e(ie)})})}function ce(){return s.createElement(u.K,null,function(e){return s.createElement(re,{className:e(ie)})})}var ue=Object(c.b)(function(e){return{authDomain:e.config.authDomain}})(function(e){var t=e.post,n=e.viewerId,r=e.submitClaps,o=e.clapsForPost,a=e.setClapCountsForPost,i=e.authDomain,l=t.id,c=t.isPublished,m=t.content,f=t.creator,g=o.clapCount,b=o.viewerClapCount,h=(m||{}).isLockedPreviewOnly;return s.createElement(d.a,{rules:[p.a,ae],"style-justifyContent":"space-between"},s.createElement(w.a,{name:"enable_lite_claps"},function(e){return e&&h?s.createElement(u.b,null):s.createElement(v.b,{source:{name:"post_actions_footer",susiEntry:"clap_footer"}},s.createElement(D.a,{post:t,buttonStyle:"OBVIOUS",hasDialog:!0}))}),s.createElement(u.b,{display:"flex",alignItems:"center"},c&&s.createElement(s.Fragment,null,s.createElement(u.b,{sm:{display:"none"},flexGrow:"0",paddingRight:"8px"},s.createElement(u.v,{href:Object(j.sb)(i,l)},s.createElement(ce,null))),s.createElement(u.b,{sm:{display:"none"},flexGrow:"0",paddingRight:"8px"},s.createElement(u.v,{href:Object(j.C)(i,l)},s.createElement(se,null))),s.createElement(u.b,{display:"none",sm:{display:"block"},paddingRight:"8px"},s.createElement(A,{post:{id:t.id}})),s.createElement(u.b,{flexGrow:"0",paddingRight:"8px"},s.createElement(v.b,{source:{name:"post_actions_footer",susiEntry:"bookmark_footer"}},s.createElement(_.a,{post:t})))),f&&s.createElement(u.J,null,function(e){var o=e.isVisible,i=e.toggle,c=e.hide;return s.createElement(u.J,null,function(e){var m=e.isVisible,d=e.show,p=e.hide;return s.createElement(u.J,null,function(e){var h=e.isVisible,v=e.show,y=e.hide;return s.createElement(N.a,{targetUserId:f.id,viewerId:n,onCompleted:p},function(e){var j=e.mutate;return s.createElement(H.a,{targetUserId:f.id,viewerId:n},function(e){var w=e.mutate;return s.createElement(W,{targetAuthorId:f.id,targetPostId:t.id,isBlocking:f.isBlocking},function(e){var _=e.mutate;return s.createElement(s.Fragment,null,s.createElement(u.x,{isVisible:o,hide:c,popoverRenderFn:function(){return s.createElement(x.a,null,n&&g&&b&&b>0?s.createElement(x.b,null,s.createElement(u.v,{onClick:function(){r(-b),a({postId:l,clapCount:g-b,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),c()}},"Undo applause for this post")):null,s.createElement(x.b,null,n?s.createElement(u.v,{onClick:function(){v(),c()}},"Report story"):s.createElement(E.a,{operation:"register",post:t,susiEntry:"report_footer"},"Report story")),n?s.createElement(x.b,null,s.createElement(u.v,{onClick:function(){f.isBlocking?w():d(),c()}},f.isBlocking?"Unblock author":"Block author")):null)}},s.createElement(u.b,{flexGrow:"0"},s.createElement(u.v,{onClick:i},s.createElement(le,null)))),s.createElement($.a,{onConfirm:j,isVisible:m,hide:p}),s.createElement(K,{onSubmit:_,isVisible:h,hide:y}))})})})})})})))}),me=Object(h.f)(D.c,{props:D.d})(ue),de=function(e){return s.createElement(y.a,null,function(t){return s.createElement(me,b()({},e,{viewerId:t&&t.id}))})},pe=i()(oe(),_.b,D.b,E.c,U),fe=n("./src/components/collection/CollectionAvatar.jsx"),ge=n("./src/components/collection/CollectionFollowButton.jsx"),be=n("./src/components/user/UserFollowButton.jsx"),he=n("./src/components/user/UserUnblockButton.jsx"),ve=n("./src/components/user/UserAvatar.jsx");function xe(){var e=o()(["\n  fragment PostFooterByline_post on Post {\n    id\n    creator {\n      name\n      username\n      bio\n      id\n      isBlocking\n      ...UserAvatar_user\n      ...UserFollowButton_user\n    }\n    collection {\n      name\n      description\n      ...CollectionAvatar_collection\n      ...CollectionFollowButton_collection\n      ...collectionUrl_collection\n    }\n    ...UserFollowButton_post\n    ...CollectionFollowButton_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return xe=function(){return e},e}var Ee=ve.b.XL,ye=ve.b.XL+22,je=function(e){var t=e.theme;return{marginTop:"25px",marginBottom:"25px",paddingTop:"32px",borderTop:"solid 1px ".concat(t.baseColor.border.lighter)}},we=function(e){var t=e.creator,n=e.post,r=t.name,o=t.username,a=t.bio,i=void 0===a?"":a,l=t.id,c=t.isBlocking;return r&&o?s.createElement(y.a,null,function(e){return s.createElement(s.Fragment,null,s.createElement(u.K,null,function(a){return s.createElement(u.b,{marginBottom:"32px",position:"relative",minHeight:"".concat(Ee,"px")},s.createElement(u.b,{tag:"span",sm:{display:"flex",alignItems:"center",marginBottom:"24px"}},s.createElement(u.b,{position:"absolute",sm:{position:"relative",width:"".concat(ye,"px")}},s.createElement(ve.c,{user:t,scale:"XL",link:!0})),s.createElement(u.b,{tag:"span"},s.createElement(u.b,{paddingLeft:"".concat(ye,"px"),sm:{paddingLeft:"0"}},s.createElement(m.c,null,"Written by")),s.createElement(u.b,{paddingLeft:"".concat(ye,"px"),display:"flex",marginBottom:"6px",sm:{paddingLeft:"0"}},s.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},s.createElement(m.b,{scale:"M"},s.createElement(u.v,{href:Object(j.Eb)(o)},r||o)),s.createElement(u.b,{sm:{display:"none"}},e&&c?s.createElement(he.a,{targetUserId:l}):s.createElement(be.c,{buttonSize:"SMALL",post:n,user:t})))))),s.createElement(u.b,{maxWidth:"555px",paddingLeft:"".concat(ye,"px"),sm:{display:"block",paddingLeft:"0"}},s.createElement(u.b,{maxWidth:"450px"},s.createElement(m.a,{scale:"L"},i)),s.createElement(u.b,{display:"none",sm:{display:"block",marginTop:"24px"}},s.createElement(be.c,{buttonSize:"SMALL",post:n,user:t}))))}))}):null},_e=function(e){var t=e.collection,n=e.currentLocation,r=e.post,o=t.name,a=t.description,i=void 0===a?"":a;return s.createElement(u.K,null,function(e){return s.createElement(u.b,{marginBottom:"32px",position:"relative",minHeight:"".concat(Ee,"px")},s.createElement(u.b,{tag:"span",sm:{display:"flex",alignItems:"center",marginBottom:"24px"}},s.createElement(u.b,{position:"absolute",sm:{position:"relative",width:"".concat(ye,"px")}},s.createElement(fe.a,{collection:t,size:Ee,link:!0})),s.createElement(u.b,{tag:"span"},s.createElement(u.b,{paddingLeft:"".concat(ye,"px"),display:"flex",marginBottom:"6px",sm:{paddingLeft:"0"}},s.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},s.createElement(m.b,{scale:"M"},s.createElement(u.v,{href:Object(j.v)(t,n)},o)),s.createElement(u.b,{sm:{display:"none"}},s.createElement(ge.a,{collection:t,post:r})))))),s.createElement(u.b,{maxWidth:"550px",paddingLeft:"".concat(ye,"px"),sm:{display:"block",paddingLeft:"0"}},s.createElement(u.b,{maxWidth:"450px"},s.createElement(m.a,{scale:"L"},i)),s.createElement(u.b,{display:"none",sm:{display:"block",marginTop:"24px"}},s.createElement(ge.a,{collection:t,post:r}))))})};var Ie=i()(xe(),fe.b,ge.b,ge.c,j.w,ve.a,be.a,be.b),ke=Object(c.b)(function(e){return{currentLocation:e.navigation.currentLocation}})(function(e){var t=e.currentLocation,n=e.post,r=n.creator,o=n.collection;return r?s.createElement(d.a,{rules:je},s.createElement(we,{creator:r,post:n}),o&&s.createElement(s.Fragment,null,s.createElement(u.b,{paddingTop:"32px"}),s.createElement(_e,{collection:o,currentLocation:t,post:n}))):null}),Ce=n("./node_modules/@babel/runtime/helpers/objectSpread.js"),Pe=n.n(Ce),Oe=n("./src/components/session/RequireFlag.jsx");function Se(){var e=o()(["\n  fragment ThanksTo_post on Post {\n    id\n    creator {\n      id\n    }\n    collaborators {\n      id\n      user {\n        id\n        name\n      }\n      state\n    }\n  }\n"]);return Se=function(){return e},e}function Me(){var e=o()(["\n  mutation setCollaboratorState($postId: ID!, $collaboratorId: ID!, $isVisible: Boolean!) {\n    setCollaboratorState(postId: $postId, collaboratorId: $collaboratorId, isVisible: $isVisible)\n  }\n"]);return Me=function(){return e},e}var Te=i()(Me()),Le=i()(Se()),Re=function(e){var t=e.viewer,n=e.post,r=e.collaborator,o=r.user,a=n.creator;return o&&t&&a&&(t.id===a.id||t.id===o.id)?s.createElement(h.b,{mutation:Te,optimisticResponse:{__typename:"Mutation",setCollaboratorState:!0},update:function(e,t){var o=e.readFragment({id:"Post:".concat(n.id),fragment:Le});e.writeFragment({id:"Post:".concat(n.id),fragment:Le,data:Pe()({},o,{collaborators:o.collaborators.map(function(e){return e.id===r.id?Pe()({},e,{state:"visible"===e.state?"hidden":"visible"}):e})})})}},function(e){return"hidden-collab"===r.state&&a.id===t.id?"(declined)":s.createElement(s.Fragment,null,"(",s.createElement(u.v,{onClick:function(t){e({variables:{postId:n.id,collaboratorId:o.id,isVisible:"visible"!==r.state}})}},"visible"===r.state?"hide":"show"),")")}):null},Be=function(e){var t=e.index,n=e.total;return t===n-1?"":n>=3?t===n-2?", and ":", ":" and "},Ae=function(e){var t=e.post,n=t.collaborators,r=t.creator;return r&&n&&n.length?s.createElement(Oe.a,{name:"enable_lite_thanks_to"},s.createElement(y.a,null,function(e){return s.createElement(u.b,{paddingTop:"5px",paddingBottom:"20px"},s.createElement(m.a,{scale:"S"},"Thanks to ",n.map(function(o,a){var i=o.user;return i?s.createElement(s.Fragment,{key:o.id},i.name,function(e,t,n){return e&&(e.id===t.id||n&&e.id===n.id)}(e,r,i)&&s.createElement(s.Fragment,null," ",s.createElement(Re,{viewer:e,post:t,collaborator:o})),s.createElement(Be,{index:a,total:n.length})):null}),"."))})):null};function Ue(){var e=o()(["\n  fragment PostFooterResponsesButton_post on Post {\n    id\n    responsesCount\n  }\n"]);return Ue=function(){return e},e}var De=i()(Ue()),Ne=Object(c.b)(function(e){return{authDomain:e.config.authDomain}})(function(e){var t=e.authDomain,n=e.post,r=n.id,o=n.responsesCount,a=o&&o>0;return s.createElement(u.v,{href:Object(j.fb)(t,r)},s.createElement(u.b,{sm:{display:a?"block":"none"},border:"ACCENT_NORMAL",borderRadius:"3px",padding:"20px",textAlign:"center"},s.createElement(u.K,null,function(e){return s.createElement("span",{className:e(function(e){return{color:e.accentColor.text.normal}})},a?"See responses (".concat(o||0,")"):"Write the first response")})))}),Fe=n("./src/components/post-listing/PostListingItemRecirc.jsx"),Ve=n("./src/framework/source/index.js"),qe=n("./src/framework/design-system/type/Heading.js");function We(){var e=o()(["\n  query PostRecircQuery($postId: ID!, $pagingOptions: PagingOptions) {\n    post(id: $postId) {\n      ... on Post {\n        id\n      }\n      recirc(paging: $pagingOptions) {\n        items {\n          __typename\n          ... on Post {\n            ...PostListingItemRecirc_post\n          }\n          ... on SuggestedPost {\n            post {\n              __typename\n              ...PostListingItemRecirc_post\n            }\n            postSuggestionReasons {\n              reason\n              users {\n                name\n              }\n              topics {\n                name\n              }\n              collections {\n                name\n              }\n              tags {\n                name\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return We=function(){return e},e}var He=i()(We(),Fe.a);function $e(e){var t=e.posts,n=e.sourceName;return s.createElement(u.l,{display:"flex",marginTop:"32px",justifyContent:"space-between",gutter:!1},s.createElement(u.l,{marginBottom:"32px",centered:!0,gutter:!1},s.createElement(u.b,{marginBottom:"32px",borderBottom:"BASE_LIGHTER",paddingBottom:"8px"},s.createElement(qe.a,{scale:"S"},"More From Medium")),s.createElement(u.b,{display:"flex",sm:{flexWrap:"wrap"}},t.map(function(e,r){var o=r===t.length-1;return s.createElement(u.b,{key:"recirc-".concat(r),marginRight:o?"0px":"24px",display:"block",flexGrow:"1",width:"calc(33.333% - 16px)",sm:{width:"100%"}},s.createElement(Ve.b,{source:{name:n,index:r}},s.createElement(Fe.b,{post:e})))}))))}function Ge(e){var t=e.postId;return s.createElement(h.c,{ssr:!1,query:He,variables:{postId:t,pagingOptions:{limit:3}}},function(e){var t=e.loading,n=e.error,r=e.data,o=(r=void 0===r?{}:r).post;return!t&&!n&&o&&o.recirc&&o.recirc.items?s.createElement($e,{posts:o.recirc.items,sourceName:"post_recirc"}):null})}var ze=n("./src/components/sequence/SequenceCoverImage.jsx");function Ke(){var e=o()(["\n  fragment SequencePreview_sequence on Sequence {\n    sequenceId\n    ...SequenceCoverImage_sequence\n    description\n    eyebrow\n    slug\n    tabletImage {\n      id\n    }\n    title\n    hideIndex\n  }\n  ","\n"]);return Ke=function(){return e},e}var Ye=function(e){return{textTransform:"uppercase"}};function Je(e){var t=e.sequence;return s.createElement(u.b,{display:"flex",flexDirection:"column",marginBottom:"56px"},s.createElement(u.b,{display:"flex",marginTop:"48px",xs:{marginTop:"32px",display:"flex"}},s.createElement(u.b,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",md:{display:"none"}},s.createElement(ze.b,{sequence:t,width:200,height:265})),s.createElement(u.b,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",display:"none",md:{display:"block"},xs:{display:"none !important"}},s.createElement(ze.b,{sequence:t,width:180,height:238})),s.createElement(u.b,{flexShrink:"0",borderRadius:"4px",overflow:"hidden",display:"none",xs:{display:"block"}},s.createElement(ze.b,{sequence:t,width:98,height:130})),s.createElement(u.b,{display:"flex",flexDirection:"column",marginLeft:"32px",justifyContent:"center",xs:{marginLeft:"20px",display:"flex"}},s.createElement(u.K,null,function(e){return s.createElement("div",{className:e(Ye)},s.createElement(m.c,null,"About this ",t.eyebrow||"Collection"))}),t.title&&t.slug&&s.createElement(u.f,{href:Object(j.ab)(t.slug)},s.createElement(u.b,null,s.createElement(m.e,{scale:"M"},t.title))),t.description&&s.createElement(u.b,{marginTop:"14px",xs:{display:"none"},maxWidth:"680px"},s.createElement(m.a,{scale:"L"},t.description)))),t.description&&s.createElement(u.b,{display:"none",marginTop:"29px",xs:{display:"block"}},s.createElement(m.a,{scale:"M"},t.description)))}var Xe=i()(Ke(),ze.a);function Qe(){var e=o()(["\n  query SequencePostRecircQuery($postId: ID!, $pagingOptions: PagingOptions) {\n    post(id: $postId) {\n      id\n      elevateRecirc(paging: $pagingOptions) {\n        items {\n          __typename\n          ... on Post {\n            ...PostListingItemRecirc_post\n          }\n        }\n      }\n    }\n  }\n  ","\n"]);return Qe=function(){return e},e}var Ze=i()(Qe(),Fe.a);function et(e){var t=e.postId;return s.createElement(h.c,{ssr:!1,query:Ze,variables:{postId:t,pagingOptions:{limit:3}}},function(e){var t=e.loading,n=e.error,r=e.data,o=(r=void 0===r?{}:r).post;return!t&&!n&&o&&o.elevateRecirc&&o.elevateRecirc.items?s.createElement($e,{posts:o.elevateRecirc.items,sourceName:"elevate_recirc",query:Ze}):null})}var tt=n("./src/store/actions/multiVote.js"),nt=n("./src/styles/font.js");function rt(){var e=o()(["\n  fragment TagList_tags on Tag {\n    id\n    displayTitle\n  }\n"]);return rt=function(){return e},e}var ot={padding:0,margin:0},at={display:"inline-block",listStyleType:"none",marginRight:"8px",marginBottom:"8px"},it=function(e){return{borderRadius:"3px",padding:"5px 10px",textDecoration:"none",color:e.baseColor.text.lighter,display:"block",background:e.baseColor.background.normal,lineHeight:"22px"}};function st(e){var t=e.tags;return t?s.createElement(u.K,null,function(e){return s.createElement("ul",{className:e(ot)},t.map(function(t){return t.id?s.createElement("li",{key:t.id,className:e(at)},s.createElement("a",{href:Object(j.ob)(t.id),className:e([it,Object(nt.s)({fontSize:15})])},t.displayTitle)):null}))}):null}var lt=i()(rt()),ct=n("./src/svg/unlisted-19px.svg"),ut=n("./src/WatchBounds.js");function mt(){var e=o()(["\n  fragment PostFooter_post on Post {\n    id\n    visibility\n    isPublished\n    collection {\n      name\n      description\n    }\n    sequence {\n      sequenceId\n      ...SequencePreview_sequence\n    }\n    tags {\n      ...TagList_tags\n    }\n    viewerClapCount\n    ...PostFooterActionsBar_post\n    ...PostFooterByline_post\n    ...PostFooterResponsesButton_post\n    ...ThanksTo_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return mt=function(){return e},e}n.d(t,"a",function(){return gt});var dt=function(e){return{color:e.baseColor.text.normal}},pt=function(){return{marginTop:"40px",clear:"both"}},ft={setClapCountsForPost:tt.d},gt=(t.b=Object(c.b)(function(e){return{clapsPerPost:e.multiVote.clapsPerPost,isAmp:e.config.isAmp}},ft)(function(e){var t=e.post,n=e.isAmp,r=e.clapsPerPost,o=e.setClapCountsForPost,a=t.id,i=t.tags,l=t.sequence,c=t.visibility,g=t.isPublished,b=s.useRef(null),h=s.useContext(ut.b);return s.useEffect(function(){h.updateWatchedBounds("footer",b,{type:"footer"})},[]),s.createElement("div",{ref:b},s.createElement(v.b,{source:{susiEntry:"follow_footer",name:"follow_footer"}},s.createElement(d.a,{rules:[pt,p.a],"style-flexDirection":"column","style-justifyContent":"center"},s.createElement(u.l,{columns:8},s.createElement(Ae,{post:t}),"UNLISTED"===c&&s.createElement(u.K,null,function(e){return s.createElement(m.a,{scale:"S"},s.createElement(ct.a,null)," ",s.createElement("span",{className:e(dt)},"Unlisted"))}),i&&s.createElement(st,{tags:i}),!n&&s.createElement(de,{post:t,clapsForPost:Object(f.a)(t,r),setClapCountsForPost:o}),g&&s.createElement(s.Fragment,null,s.createElement(ke,{post:t}),s.createElement(u.b,{borderTop:"BASE_LIGHTER",paddingTop:"25px"},s.createElement(Ne,{post:t})))),g&&s.createElement(u.b,{backgroundColor:"BASE_LIGHT",marginTop:"64px"},s.createElement(u.l,null,l&&!l.hideIndex&&s.createElement(Je,{sequence:l}),l?s.createElement(et,{postId:a}):s.createElement(Ge,{postId:a}))))))}),i()(mt(),pe,Ie,De,Xe,lt,Le))},"./src/components/sequence/SequenceCoverImage.jsx":function(e,t,n){"use strict";n.d(t,"b",function(){return u}),n.d(t,"a",function(){return m});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/graphql-tag/src/index.js"),s=n.n(i),l=n("./src/components/ui/image/index.js");function c(){var e=o()(["\n  fragment SequenceCoverImage_sequence on Sequence {\n    title\n    coverImage {\n      id\n    }\n  }\n"]);return c=function(){return e},e}function u(e){var t=e.sequence,n=e.width,r=e.height,o=t.title,i=t.coverImage;return i?a.createElement("div",null,a.createElement(l.b,{miroId:i.id,alt:o||"Collection on Medium",width:n,height:r,strategy:"RESAMPLE",freezeGifs:!1})):null}var m=s()(c())},"./src/components/stream/Quote.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/createClass.js"),l=n.n(s),c=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),u=n.n(c),m=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),d=n.n(m),p=n("./node_modules/@babel/runtime/helpers/inherits.js"),f=n.n(p),g=n("./node_modules/react/index.js"),b=n("./node_modules/graphql-tag/src/index.js"),h=n.n(b),v=n("./src/framework/design-system/components/index.js"),x=n("./src/util/routes.js"),E=n("./src/components/post/paragraph/TextParagraph.jsx"),y=n("./src/util/quote.js");function j(){var e=o()(["\n  fragment Quote_quote on Quote {\n    quoteId\n    userId\n    post {\n      id\n      title\n      mediumUrl\n      creator {\n        id\n        username\n        name\n      }\n    }\n    startOffset\n    endOffset\n    paragraphs {\n      text\n      type\n      markups {\n        anchorType\n        end\n        href\n        rel\n        start\n        title\n        type\n        userId\n      }\n      ...TextParagraph_paragraph\n    }\n  }\n  ","\n"]);return j=function(){return e},e}var w=function(e){function t(){return i()(this,t),u()(this,d()(t).apply(this,arguments))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.quote;if(!e||null==e.startOffset||null==e.endOffset||!e.post||!e.post.id)return null;var t=e.post.title,n=e.post.creator&&e.post.creator.name,r=e.post.creator&&e.post.creator.username;if(!n||!r)return null;var o=Object(y.a)(e),a=o&&o.type;return o&&a?g.createElement(v.b,{paddingLeft:"20px",paddingRight:"20px"},g.createElement(v.B,{ui:"REGULAR"},g.createElement(v.d,null,"From"," ",g.createElement(v.v,{href:Object(x.U)(e.post),inline:!0},t)," ","by"," ",g.createElement(v.v,{href:Object(x.Eb)(r),inline:!0},n))),g.createElement(v.f,{href:Object(x.U)(e.post)},g.createElement(E.c,{paragraph:o,paragraphStyle:a,spaceTop:30,richTextStyle:"STREAM"}))):null}}]),t}(g.Component);t.b=w;var _=h()(j(),E.c.fragments.paragraph)},"./src/components/susi/FreePostSusiController.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return _});var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/react/index.js"),l=n("./node_modules/graphql-tag/src/index.js"),c=n.n(l),u=n("./node_modules/react-redux/es/index.js"),m=n("./node_modules/date-fns/index.js"),d=n("./src/framework/reporter/index.js"),p=n("./src/components/susi/susi-modal/SusiModal.jsx"),f=n("./src/screens/helpers/visits.js"),g=n("./src/styles/breakpoints.js"),b=n("./src/util/referrers.js"),h=n("./src/components/session/WithViewer.jsx"),v=n("./src/store/actions/googleOneTap.js"),x=n("./src/framework/style/components/WithTheme.js");function E(){var e=o()(["\n  fragment FreePostSusiController_post on Post {\n    visibility\n    latestPublishedVersion\n    collection {\n      id\n      domain\n      slug\n    }\n    ...SusiModal_post\n  }\n  ","\n"]);return E=function(){return e},e}var y=function(e,t,n){var r="UNLISTED"===e.visibility||!e.latestPublishedVersion,o=e.collection,a=n&&!t.includes(o&&o.id),i=!(!o||!o.slug||"policy"!==o.slug);return r||a||i};function j(e){var t=e.post,n=e.referrer,r=(e.source,e.isBot),o=e.isCustomDomain,a=e.signInWallCustomDomainCollectionIds,l=e.hideGoogleOneTap,c=e.theme,u=Object(d.c)(),v=s.useState(!1),x=i()(v,2),E=x[0],j=x[1];s.useEffect(function(){(function(e,t,n,r,o,a){return!(Object(f.c)()<1||t||document.body.offsetWidth<Object(g.createBreakpointMaxWidths)(a).md||Object(b.a)(e)||Object(m.addDays)(Object(f.b)(),1)>Date.now()||y(r,o,n))})(n,r,o,t,a,c)&&(j(!0),Object(f.f)(),l(),u.event("signInWall.eligible"))},[t.id]);var w=o?"post_custom_domain":"post_free";return s.createElement(h.a,null,function(e){return!e&&E?s.createElement(p.a,{initialVisibility:!0,operation:"register",post:t,susiEntry:w}):null})}var w={hideGoogleOneTap:v.b};t.b=Object(u.b)(function(e){return{referrer:e.navigation.referrer,isBot:e.client.isBot,signInWallCustomDomainCollectionIds:e.config.signInWallCustomDomainCollectionIds,isCustomDomain:e.client.isCustomDomain}},w)(function(e){var t=e.post,n=e.referrer,r=e.source,o=e.isBot,a=e.isCustomDomain,i=e.signInWallCustomDomainCollectionIds,l=e.hideGoogleOneTap;return s.createElement(x.a,null,function(e){return s.createElement(j,{post:t,referrer:n,source:r,isBot:o,isCustomDomain:a,signInWallCustomDomainCollectionIds:i,hideGoogleOneTap:l,theme:e})})});var _=c()(E(),p.b)},"./src/components/ui/Card.jsx":function(e,t,n){"use strict";var r=n("./src/components/style/index.js"),o=Object(r.b)("div",function(e){var t=e.theme;return{backgroundColor:t.backgroundColor,border:"1px solid ".concat(t.baseColor.border.lighter),borderRadius:"5px",boxShadow:"0 1px 4px ".concat(t.baseColor.border.lighter),marginBottom:"24px",padding:"23px 0"}});t.a=o},"./src/components/user/UserBlockConfirmDialog.jsx":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./node_modules/react/index.js"),o=n("./src/framework/design-system/components/index.js");function a(e){var t=e.onConfirm,n=e.isVisible,a=e.hide;return r.createElement(o.i,{onConfirm:t,isVisible:n,hide:a,titleText:"Block this user?",cancelText:"Cancel",confirmText:"Block"},"They will no longer be able to follow you or view your content."," ",r.createElement(o.v,{inline:!0,linkStyle:"OBVIOUS",href:"https://help.medium.com/hc/en-us/articles/214994577-Block-this-user"},"Learn more about blocking"),".")}},"./src/components/user/UserUnblockButton.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/createClass.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),l=n.n(s),c=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),u=n.n(c),m=n("./node_modules/@babel/runtime/helpers/inherits.js"),d=n.n(m),p=n("./node_modules/react/index.js"),f=n("./src/framework/design-system/components/index.js"),g=n("./src/components/session/WithViewer.jsx"),b=n("./src/components/mutations/UserUnblockMutation.jsx"),h=function(e){function t(e){var n;return o()(this,t),(n=l()(this,u()(t).call(this,e))).state={isHovering:!1},n}return d()(t,e),i()(t,[{key:"handleMouseEnter",value:function(){this.setState({isHovering:!0})}},{key:"handleMouseLeave",value:function(){this.setState({isHovering:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.buttonSize,r=t.targetUserId,o=this.state.isHovering;return p.createElement(g.a,null,function(t){return p.createElement(b.a,{targetUserId:r,viewerId:t&&t.id},function(t){var r=t.mutate;return p.createElement(f.c,{buttonStyle:o?"SUBTLE":"ERROR",onClick:r,size:n||"REGULAR",onMouseEnter:function(){return e.handleMouseEnter()},onMouseLeave:function(){return e.handleMouseLeave()}},o?"Unblock":"Blocked")})})}}]),t}(p.Component);t.a=h},"./src/framework/error/ErrorTypes.js":function(e,t,n){"use strict";n.d(t,"a",function(){return d});var r=n("./node_modules/@babel/runtime/helpers/classCallCheck.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js"),i=n.n(a),s=n("./node_modules/@babel/runtime/helpers/getPrototypeOf.js"),l=n.n(s),c=n("./node_modules/@babel/runtime/helpers/inherits.js"),u=n.n(c),m=n("./node_modules/@babel/runtime/helpers/wrapNativeSuper.js"),d=function(e){function t(){return o()(this,t),i()(this,l()(t).call(this,"Expected postResult to exist.\n       For more detail, try checking for GraphQL server errors with the same x-request-id."))}return u()(t,e),t}(n.n(m)()(Error))},"./src/handlers/PostHandler.jsx":function(e,t,n){"use strict";n.r(t);var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/react/index.js"),i=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/graphql-tag/src/index.js"),l=n.n(s),c=n("./node_modules/react-apollo/react-apollo.esm.js"),u=n("./src/screens/ErrorScreen.jsx"),m=n("./src/screens/LoadingScreen.jsx"),d=n("./src/components/meter/MeterController.jsx"),p=n("./src/components/susi/FreePostSusiController.jsx"),f=n("./src/screens/NotFoundScreen.jsx"),g=n("./src/components/post/PostCanonicalizer.js"),b=n("./src/framework/error/ErrorTypes.js"),h=n("./src/screens/PostScreen.jsx"),v=n("./src/components/session/WithViewer.jsx");function x(){var e=o()(["\n  query PostHandler($postId: ID!, $postMeteringOptions: PostMeteringOptions) {\n    meterPost(postId: $postId, postMeteringOptions: $postMeteringOptions) {\n      __typename\n      ... on MeteringInfo {\n        ...PostScreen_meteringInfo\n        ...MeterController_meteringInfo\n      }\n    }\n    postResult(id: $postId) {\n      __typename\n      ... on Post {\n        ...MeterController_post\n        ...PostScreen_post\n        ...PostCanonicalizer_post\n        ...FreePostSusiController_post\n      }\n    }\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return x=function(){return e},e}var E=l()(x(),d.a,d.b,h.b,h.a,g.b,p.a);t.default=Object(i.b)(function(e){return{source:e.navigation.referrerSource||void 0,referrer:e.navigation.referrer,shareKey:e.navigation.shareKey}})(function(e){var t=e.match,n=e.source,r=e.referrer,o=e.shareKey,i=t.params.postIdOrSlug||t.params.postSlug||t.params.postId;if(!i)return a.createElement(f.a,null);var s=/^(?:[^\/]*-)?([0-9a-f]+)$/.exec(i||""),l=s&&s[1];return l?a.createElement(c.c,{query:E,variables:{postId:l,postMeteringOptions:{source:n,referrer:r,sk:o}}},function(e){var n=e.loading,r=e.error,o=e.data,i=(o=void 0===o?{}:o).meterPost,s=o.postResult;if(n)return a.createElement(m.a,null);if(r)return a.createElement(u.a,{error:r});if(!s)return a.createElement(u.a,{error:new b.a});switch(s.__typename){case"Post":var c=a.createElement(p.b,{post:s}),x=a.createElement(d.c,{meteringInfo:i,post:s});return a.createElement(g.a,{post:s,matchedPath:t.url,key:l},s.isLocked?x:c,a.createElement(v.a,null,function(e){var t=!!e;return a.createElement(h.c,{post:s,isLoggedIn:t})}));case"NotFound":return a.createElement(f.a,null);default:return a.createElement(u.a,{error:new Error("Unsupported postResult: ".concat(s.__typename))})}}):a.createElement(f.a,null)})},"./src/screens/PostScreen.jsx":function(e,t,n){"use strict";var r=n("./node_modules/@babel/runtime/helpers/taggedTemplateLiteral.js"),o=n.n(r),a=n("./node_modules/@babel/runtime/helpers/slicedToArray.js"),i=n.n(a),s=n("./node_modules/react/index.js"),l=n("./node_modules/serialize-javascript/index.js"),c=n.n(l);function u(e){var t={__html:'<script type="application/json">'.concat(c()(e.json,{isJSON:!0}),"<\/script>")};return s.createElement("amp-analytics",{id:"medium-analytics",dangerouslySetInnerHTML:t})}var m=n("./node_modules/graphql-tag/src/index.js"),d=n.n(m),p=n("./node_modules/react-redux/es/index.js"),f=n("./src/components/meter/RegWall.jsx"),g=n("./src/framework/design-system/components/index.js"),b=n("./src/components/metabar/Metabar.jsx"),h=n("./src/components/meter/PayWall.jsx"),v=n("./src/components/post/body/InteractivePostBody.js"),x=n("./node_modules/@babel/runtime/helpers/extends.js"),E=n.n(x),y=n("./node_modules/react-apollo/react-apollo.esm.js"),j=n("./src/components/session/WithViewer.jsx");function w(){var e=o()(["\n  mutation addCollaborator($postId: ID!) {\n    addCollaborator(postId: $postId)\n  }\n"]);return w=function(){return e},e}function _(){var e=o()(["\n  fragment AddCollaborator_post on Post {\n    isPublished\n    id\n  }\n"]);return _=function(){return e},e}var I=d()(_()),k=d()(w()),C=Object(y.d)(Object(y.f)(k,{name:"AddCollaborator_mutation",props:function(e){var t=e.ownProps,n=e.AddCollaborator_mutation;return{addCollaborator:function(){!t.post.isPublished&&t.viewerId&&n({variables:{postId:t.post.id}})}}}}))(function(e){var t=e.addCollaborator;return s.useEffect(t,[]),null}),P=function(e){return s.createElement(j.a,null,function(t){return s.createElement(C,E()({viewerId:t?t.id:""},e))})},O=n("./src/components/session/RequireFlag.jsx"),S=n("./src/components/audio/AudioPlayback.jsx"),M=n("./src/components/post/InResponseToPostPreview.jsx"),T=n("./src/components/post/PostPaywallAlert.jsx");function L(){var e=o()(["\n  fragment PostHeader_post on Post {\n    inResponseToPostResult {\n      ... on PostResult {\n        ...InResponseToPostPreview_postResult\n      }\n    }\n    ...InResponseToPostPreview_mediaResource\n    ...PostPaywallAlert_post\n    ...AudioPlayback_post\n  }\n  ","\n  ","\n  ","\n  ","\n"]);return L=function(){return e},e}function R(e){var t=e.post;return s.createElement(g.b,{paddingBottom:"1px",marginTop:"40px"},s.createElement(g.l,{columns:8},s.createElement(M.a,{inResponseToPostResult:t.inResponseToPostResult,inResponseToMediaResource:t.inResponseToMediaResource,padding:"10px 0 0"}),s.createElement(O.a,{name:"enable_lite_paywall_alert"},!t.inResponseToPostResult&&s.createElement(T.a,{post:t})),t.audioVersionUrl&&s.createElement(S.a,{post:t})))}var B=d()(L(),M.c,M.b,T.b,S.b),A=n("./src/components/post/footer/PostFooter.jsx"),U=n("./src/components/post/PostMetadata.jsx"),D=n("./src/components/post/PostPublishedDialog.jsx"),N=n("./src/WatchBounds.js"),F=n("./src/components/post/PostByline.jsx"),V=n("./src/components/post/NormalizePostBodyModel.js");function q(){var e=o()(["\n  fragment PostBodyInserts_post on Post {\n    # please note that the postMeteringOptions is defined in handlers that use PostBodyInserts\n    # (PostHandler and SequencePostHandler)\n    content(postMeteringOptions: $postMeteringOptions) {\n      bodyModel {\n        paragraphs {\n          name\n          text\n          type\n        }\n      }\n    }\n    ...PostByline_post\n  }\n  ","\n"]);return q=function(){return e},e}function W(e,t,n){return function(r){var o=n.subtitleIndex||n.titleIndex||0,a=t[o]&&t[o].name,i="number"==typeof n.titleIndex,l={marginTop:"32px"};return a&&(r[a]={order:0!==o||i?"after":"before",component:s.createElement(g.K,null,function(t){return s.createElement(N.a,{className:t(l),name:"byline",type:"byline",offset:{left:-600}},s.createElement(F.b,{scale:"M",post:e,showBio:!1,hideCollection:!0}))})}),r}}var H=d()(q(),F.a),$=n("./src/components/post/MaybeRedirectToEditor.jsx"),G=n("./src/components/post/PostSidebar.jsx"),z=n("./src/framework/reporter/index.js"),K=n("./src/framework/track/index.js"),Y=n("./src/screens/helpers/visits.js"),J=n("./src/components/post/helpers/loggedOutHistory.js"),X=n("./src/util/routes.js"),Q=n("./src/util/theme.js"),Z=n("./src/components/branch-banner/helpers/index.js"),ee=n("./src/store/actions/branch.js"),te=n("./src/styles/breakpoints.js"),ne=(n("./src/store/reducers/navigation.js"),n("./src/store/actions/navigation.js"));function re(){var e=o()(["\n  fragment PostScreen_post on Post {\n    id\n    firstPublishedAt\n    isPublished\n    title\n    canonicalUrl\n    layerCake\n    primaryTopic {\n      name\n      slug\n    }\n    collection {\n      id\n      slug\n      domain\n      ...Metabar_collection\n      ...RegWall_collection\n      ...ThemeUtilAccent_collection\n    }\n    # please note that the postMeteringOptions are defined in the postHandler file\n    content(postMeteringOptions: $postMeteringOptions) {\n      isLockedPreviewOnly\n    }\n    ...AddCollaborator_post\n    ...InteractivePostBody_post\n    ...MaybeRedirectToEditor_post\n    ...Metabar_post\n    ...PayWall_post\n    ...PostBodyInserts_post\n    ...PostFooter_post\n    ...PostHeader_post\n    ...PostMetadata_post\n    ...PostPublishedDialog_post\n    ...PostReadTracker_post\n    ...PostScrollTracker_post\n    ...PostSidebar_post\n    ...RegWall_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return re=function(){return e},e}function oe(){var e=o()(["\n  fragment PostScreen_meteringInfo on MeteringInfo {\n    __typename\n    postIds\n    maxUnlockCount\n    unlocksRemaining\n  }\n"]);return oe=function(){return e},e}function ae(e,t){return"undefined"!=typeof window&&window.innerWidth<Object(te.getTabletBreakpoint)(e)||t}n.d(t,"a",function(){return ie}),n.d(t,"b",function(){return se});t.c=Object(p.b)(function(e){var t=e.client,n=e.config.authDomain,r=e.theme,o=e.navigation;return{authDomain:n,theme:r,isDnt:t.isDnt,postPublishedType:o.postPublishedType}})(function(e){var t=e.authDomain,n=e.isAmp,r=void 0!==n&&n,o=e.isDnt,a=e.isLoggedIn,l=e.post,c=(e.theme,e.dispatch),m=e.postPublishedType,d=s.useState(!1),p=i()(d,2),x=p[0],E=p[1],y=s.useRef(),j=Object(z.c)();Object(K.i)(y,l),Object(K.h)(o,a,y,l);var w=l.id,_=l.isPublished,I=l.content,k=l.layerCake,C=l.primaryTopic,O=l.collection,S=l.canonicalUrl,M=O||{},T=M.id,L=M.slug,B=M.colorPalette,F=(I||{}).isLockedPreviewOnly,q=function(e){var t=e&&e.content&&e.content.bodyModel&&e.content.bodyModel.paragraphs||void 0;if(t)return[W(e,t,Object(V.d)(t))].reduce(function(e,t){return t(e)},{})}(l),H=k&&(1===k||2===k||3===k),te=H?C:null;s.useEffect(function(){if(_){var e={};O&&O.domain&&(e.data={$canonical_url:Object(X.V)(t,w)}),Object(Z.c)(e),c(Object(ee.f)()),o||a||Object(Y.e)(),j.event("post.clientViewed",{postId:w,collectionId:T,collectionSlug:L,context:1})}else j.event("post.draftViewed",{postId:w});switch(o||a||Object(J.b)(w),m){case"initial":E(!0),c(Object(ne.g)());break;case"repub":c(Object(ne.i)({duration:3e3,message:"Your changes have been published."})),c(Object(ne.g)())}},[w,_]);var re=function(e){if(B){var t=B.defaultBackgroundSpectrum,n=B.highlightSpectrum;return Object(Q.c)(t,n)}return e},oe=F&&(a?s.createElement(h.a,{post:l}):s.createElement(f.a,{post:l,collection:O}));return s.createElement(s.Fragment,null,s.createElement(P,{post:l}),s.createElement($.a,{post:l},s.createElement(U.b,{isAmp:r,post:l}),s.createElement(g.M,null,function(e){return s.createElement(g.G,{theme:re(e)},s.createElement(b.a,{isFixed:!0,post:l,collection:O,isAmp:r,isDraft:!_,topic:te,isMonogramOnly:!H,marginBottom:0,marginBottomSm:0,behavior:ae(e,a)?"aggressive":"none"}),s.createElement(N.c,null,s.createElement("article",null,s.createElement(R,{post:l}),s.createElement(v.b,{post:l,postBodyInserts:q,ref:y})),!F&&!!_&&s.createElement(G.a,{post:l}),oe,s.createElement(A.b,{post:l})),s.createElement(D.a,{post:l,isVisible:x,hide:function(){return E(!1)}}))}),r?s.createElement(u,{json:{requests:{base:Object(X.e)(t),pageview:Object(X.b)(t),scrollPing:Object(X.d)(t)},vars:{postId:w,collectionId:T,canonicalUrl:S},triggers:{defaultPageview:{on:"visible",request:"pageview"},scrollDepths:{on:"scroll",scrollSpec:{verticalBoundaries:[0,5,10,15,20,25,30,35,40,45,50,55,60,65,70,75,80,85,90,95,100]},request:"scrollPing"}},transport:{beacon:!1,xhrpost:!1,image:!0}}}):""))});var ie=d()(oe()),se=d()(re(),I,b.b,Q.a,f.b,v.a,$.b,b.c,h.b,H,A.a,B,U.a,D.b,K.d,K.e,G.b,f.c)},"./src/svg/facebook-filled-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=o.a.createElement("path",{d:"M18.26 10.55c0-4.3-3.47-7.79-7.75-7.79a7.77 7.77 0 0 0-7.75 7.79 7.77 7.77 0 0 0 6.54 7.68v-5.49H7.4v-2.2h1.9V8.92c0-1.88 1.14-2.9 2.8-2.9.8 0 1.49.06 1.69.08v1.97h-1.15c-.91 0-1.1.43-1.1 1.07v1.4h2.17l-.28 2.2h-1.88v5.52a7.77 7.77 0 0 0 6.7-7.71"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21,viewBox:"0 0 21 21"},e),i)}},"./src/svg/twitter-filled-21px.svg":function(e,t,n){"use strict";var r=n("./node_modules/react/index.js"),o=n.n(r);function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var i=o.a.createElement("path",{d:"M18.5 4.43a6.9 6.9 0 0 1-2.18.88 3.45 3.45 0 0 0-2.55-1.12 3.49 3.49 0 0 0-3.49 3.48c0 .28.03.55.07.81a9.91 9.91 0 0 1-7.17-3.67 3.9 3.9 0 0 0-.5 1.74 3.6 3.6 0 0 0 1.56 2.92 3.36 3.36 0 0 1-1.55-.44.15.15 0 0 0 0 .06c0 1.67 1.2 3.08 2.8 3.42-.3.06-.6.1-.94.12l-.62-.06A3.5 3.5 0 0 0 7.17 15a7.33 7.33 0 0 1-4.36 1.49L2 16.44A9.96 9.96 0 0 0 7.36 18c6.4 0 9.91-5.32 9.9-9.9v-.5A6.55 6.55 0 0 0 19 5.79a6.18 6.18 0 0 1-2 .56 3.33 3.33 0 0 0 1.5-1.93"});t.a=function(e){return o.a.createElement("svg",a({width:21,height:21,viewBox:"0 0 21 21"},e),i)}},"./src/util/quote.js":function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=n("./node_modules/lodash/cloneDeep.js"),o=n.n(r);function a(e){if(1!==e.paragraphs.length)return null;var t=o()(e.paragraphs[0]),n=t.text||"",r=0,a=e.startOffset||0,i=e.endOffset||n.length;if(n.length-i>100&&(n=n.substring(0,i+100)+"…"),a>100){var s=a-100;n="…"+n.substring(s),r=s-1}t.text=n,t.type="P",t.markups.unshift({anchorType:null,end:i,href:null,rel:null,linkMetadata:null,start:a,title:null,type:"HIGHLIGHT",userId:null});var l=!0,c=!1,u=void 0;try{for(var m,d=t.markups[Symbol.iterator]();!(l=(m=d.next()).done);l=!0){var p=m.value;p.start-=r,p.end-=r}}catch(e){c=!0,u=e}finally{try{l||null==d.return||d.return()}finally{if(c)throw u}}return t}},"./src/util/string.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o});var r=function(e){return/^[\s\xa0]*$/.test(e)},o=function(e,t){if(e.length<t)return e;var n=e.substr(0,t),r=n.charCodeAt(n.length-1),o=n.charCodeAt(n.length-2);return r>=55296&&r<=57343&&!(o>=55296&&o<=57343)&&(n=n.substr(0,n.length-1)),(n=(n=n.replace(/(\s+\S+|\s+)$/,"")).replace(/[.,:;?!-]+$/,""))+"…"}}}]);
//# sourceMappingURL=screen.post.05f253a9.chunk.js.map