jQuery(window).on("msg_preinit.icegram",function(){function a(a){Icegram_Message_Type.apply(this,arguments)}"undefined"!=typeof Icegram_Message_Type&&(a.prototype=Object.create(Icegram_Message_Type.prototype),a.prototype.constructor=a,a.prototype.post_render=function(){var a=this;if("undefined"!=typeof a.data.add_alt_cta&&"yes"==a.data.add_alt_cta&&a.el.find(".ig_cta_wrapper").length<1){if("undefined"==typeof a.data.alt_label||""==a.data.alt_label)return;var b="ig_cta_wrapper ig_clear_fix";a.el.addClass("ig_has_alt_cta");var c=jQuery('<a class="ig_cta_alt">'+a.data.alt_label+"</a>");"button"!=a.data.alt_display_options||"undefined"!=typeof a.data.use_form&&"yes"===a.data.use_form||(c=jQuery('<div class="ig_cta_alt">'+a.data.alt_label+"</div>"),b+=" ig_cta_alt_button");var d="yes"==a.data.use_form?jQuery("form .ig_button"):jQuery(".ig_button");void 0!=a.data.use_theme_defaults&&"yes"==a.data.use_theme_defaults||(void 0!=a.data.alt_cta_bg_color&&""!=a.data.alt_cta_bg_color&&c.css("background-color",a.data.alt_cta_bg_color),void 0!=a.data.alt_cta_text_color&&""!=a.data.alt_cta_text_color&&c.css("color",a.data.alt_cta_text_color)),d.each(function(){var d=jQuery('<div class="'+b+'"></div>').append(c.clone());jQuery(this).addClass("ig_cta_primary"),"yes"===a.data.use_form?d.appendTo(jQuery(this).parents(".ig_embed_form_container")):d.insertAfter(this).prepend(jQuery(this).detach())}),a.el.on("click",{self:this},function(a){a.data=a.data||{self:this},(jQuery(a.target).filter(".ig_cta_alt").length||jQuery(a.target).parents(".ig_cta_alt").length)&&(a.data.self.track("alt_cta"),"alt_url"===a.data.self.data.alt_cta&&""!=a.data.self.data.alt_link&&("yes"===a.data.self.data.alt_cta_option_new_window?window.open(a.data.self.data.alt_link):window.location.href=a.data.self.data.alt_link),a.data.self.hide())})}},Icegram_Message_Type.prototype.post_render=function(){"undefined"!=typeof Icegram_Message_Type_Plus&&Icegram_Message_Type_Plus.prototype.post_render.apply(this,arguments),"undefined"!=typeof a&&a.prototype.post_render.apply(this,arguments),"undefined"!=typeof Icegram_Message_Type_Max&&Icegram_Message_Type_Max.prototype.post_render.apply(this,arguments)})}),jQuery(window).on("init.icegram",function(){"undefined"!=typeof Icegram_Message_Type&&(Icegram_Message_Type.prototype.on_cta_click=function(a){function b(a){var a=a||"";jQuery('<div class="ig_cta_overlay"></div>').append("<style>.ig_cta_overlay{width: 100%; height: 100%; top: 0; left: 0; background: #E6E6E6; z-index: 1000000; position: fixed; opacity: 0.5; } .ig_cta_spinner{background : url("+a+") no-repeat no-repeat center; height: 100%; } </style>").append('<div class="ig_cta_spinner"></div>').appendTo("body")}if(a.data=a.data||{self:this},jQuery(a.target).closest(".icegram").find("form").length){var c=jQuery(a.target).closest(".icegram").find("form:visible").first();if("undefined"!=typeof jQuery(c)[0]&&0==jQuery(c)[0].checkValidity())return;if(jQuery(c).find(".ig_form_required_field").length&&""!==jQuery(c).find(".ig_form_required_field").val())return a.preventDefault(),void a.data.self.hide();a.data.self.data.cta="form_via_ajax"!==a.data.self.data.cta?"form":a.data.self.data.cta}if(a.data.self.track("clicked"),"form"!==a.data.self.data.cta&&"form_via_ajax"!==a.data.self.data.cta||"undefined"==typeof c)if("cta_another_message"===a.data.self.data.cta){var d=icegram.get_message_by_id(a.data.self.data.cta_linked_message_id);if("overlay"==d.data.type&&"yes"===d.data.display_as)return;setTimeout(function(){d.show()},10)}else"url"===a.data.self.data.cta&&""!=a.data.self.data.link?("yes"===a.data.self.data.cta_option_new_window?window.open(a.data.self.data.link):window.location.href=a.data.self.data.link,a.data.self.hide()):a.data.self.data.hide!==!1&&a.data.self.hide();else if(!jQuery(c).hasClass("ig_form_init_done")&&!jQuery(c).closest(".rainmaker_form").hasClass("rm_init_done")&&"undefined"==typeof jQuery(c).data("es_form_id")||jQuery(c).closest(".rainmaker_form").hasClass("rm_custom")){var e=jQuery(c).attr("action")?(jQuery(c).attr("action").trim().match(/^([^#]+)/)||[])[1]||"":"";if("form"===a.data.self.data.cta)"yes"===a.data.self.data.cta_option_form_new_window&&jQuery(c).attr("target","_blank"),jQuery(c).attr("action",e).submit(function(a){jQuery(c).hasClass("ig_form_init_done")&&a.preventDefault()});else if("form_via_ajax"===a.data.self.data.cta){a.preventDefault(),jQuery(c).trigger("form_submit.ig_cta",[jQuery(c),a.data.self]);var f=document.createElement("a");f.href=e,!e||-1!==f.href.indexOf(window.location.host)&&"remote"!=window.icegram.mode||(/^https?:\/\//i.test(e)||(e=(/^\/\//i.test(e)?"http:":"http://")+e),e=window.icegram.data.ajax_url+"?action=ig_cta_actions_proxy&ig_orig_action="+encodeURIComponent(e)),b(a.data.self.data.cta_loader_img);var g=jQuery(c).serialize();g+="&cta_proxy_nonce="+window.icegram.data.cta_proxy_nonce,g+="&ig_mode="+window.icegram.mode,g+="&ig_remote_url="+window.location.href,g+="&ig_message_id="+a.data.self.data.id,g+="&ig_campaign_id="+a.data.self.data.campaign_id,jQuery.ajax({url:e,data:g,type:"POST",dataType:"json",success:function(b){jQuery(".ig_cta_overlay").hide(),"success"===b.status&&jQuery(a.data.self.el).trigger("form_success.ig_cta",[a.data.self,b.data])},error:function(b,c,d){jQuery(".ig_cta_overlay").hide(),jQuery(a.target).closest(".icegram").find(".ig_message").append(b)},complete:function(b,c){var d=b.getResponseHeader("content-type")||"";d.indexOf("html")>-1&&200==b.status&&"parsererror"==c&&""!=b.responseText&&(jQuery(".ig_cta_overlay").hide(),jQuery(a.data.self.el).trigger("form_success.ig_cta",[a.data.self,b.responseText]))}})}}jQuery(window).off("form_success.ig_cta"),jQuery(window).on("form_success.ig_cta",function(a,b,c){if(b){response_text=b.data.response_text||jQuery(c).filter(".klawoo-subscribed-response").html()||c||"";var d=1e3;if("yes"==b.data.show_response&&""!==response_text){response_text='<div class="ig_form_response_text">'+response_text+"</div>",b.el.find(".ig_form_container").fadeOut(),b.el.find(".ig_message, .ig_headline").hide();var e=b.el.filter(".ig_container");-1!==jQuery.inArray(b.data.type,["interstitial","messenger"])?(e=b.el.find(".ig_message"),e.show(),b.el.find(".ig_headline").text("").show()):"tab"===b.data.type&&(e=b.el.find(".ig_data"),b.el.find(".ig_headline").show());try{e.append(response_text)}catch(f){console.log(f)}d=3500}"do_nothing"!==b.data.cta_option_form_via_ajax&&setTimeout(function(){"redirect_to_link"==b.data.cta_option_form_via_ajax&&("string"!=typeof b.data.redirect_to_link||""==b.data.redirect_to_link||/^tel:/i.test(b.data.redirect_to_link)||(/^https?:\/\//i.test(b.data.redirect_to_link)||(b.data.redirect_to_link="http://"+b.data.redirect_to_link),window.location.href=b.data.redirect_to_link)),b.hide()},d)}})})}),jQuery(window).on("preinit.icegram",function(){function a(a){"undefined"!=typeof icegram_trigger_based_messages&&void 0!==icegram_trigger_based_messages[a]&&icegram_trigger_based_messages[a].length>0&&jQuery.each(icegram_trigger_based_messages[a],function(a,b){jQuery.inArray(b,icegram_triggered_messages)<=-1&&void 0!==icegram.get_message_by_id(b)&&(icegram.get_message_by_id(b).show(),icegram_triggered_messages.push(b))})}function b(a){clearTimeout(jQuery.data(document,"exitIntentTimer"))}function c(c){if("undefined"!=typeof icegram&&"remote"==icegram.mode)var f=document.body.clientWidth,g=document.body.clientHeight;else var f=jQuery(window).width(),g=jQuery(window).height();var h=d(),i=e(),j=c.relatedTarget||c.toElement,k=!1;(c.pageX<0||c.pageY<0||c.clientX<0||c.clientY<0||c.pageY==g&&!i||c.pageX==f&&!h||!j||"HTML"==j.nodeName)&&(k=!0,!j&&"blur"==c.type&&c.target instanceof window.constructor&&("IFRAME"==document.activeElement.nodeName||navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"BODY"==document.activeElement.nodeName)&&(k=!1),!j&&"mouseleave"==c.type&&(c.clientX>=f&&h||c.clientY>=g&&i)&&(k=!1),!j&&"blur"==c.type&&jQuery("body").hasClass("ig_mobile")&&"IFRAME"!=document.activeElement.nodeName&&(k=!0),j||"blur"!=c.type||"A"!=document.activeElement.nodeName&&"BUTTON"!=document.activeElement.nodeName&&"INPUT"!=document.activeElement.nodeName||(k=!1),k&&(b(c),jQuery.data(document,"exitIntentTimer",setTimeout(function(){a("exit_intent")},250))))}function d(){return document.body.scrollHeight!==document.body.clientHeight}function e(){return document.body.scrollWidth!==document.body.clientWidth}function f(b){jQuery(window).scrollTop()+jQuery(window).height()>=.97*jQuery(document).height()?a("scroll_to_bottom"):jQuery(window).scrollTop()+jQuery(window).height()>=jQuery(document).height()-jQuery(document).height()/2&&a("scroll_to_middle")}function g(a){var b=a.data.triggers.user_inactive_for;i+=1,i>b&&(clearTimeout(j),a.show())}if("undefined"!=typeof icegram_data&&void 0!==icegram_data.messages_to_show_after_trigger&&(window.icegram_trigger_based_messages=icegram_data.messages_to_show_after_trigger,window.icegram_triggered_messages=[]),jQuery(window).on("track.icegram",function(a,b,c){if(void 0!==b&&""!==b&&"shown"==b&&c.hasOwnProperty("message_id")){var d=icegram.get_message_by_id(c.message_id);void 0!==d.data.triggers&&"undefined"!=typeof d.data.triggers.when_to_hide&&"toast"===d.type&&d.sticky===!1&&(d.sticky=!0),void 0===d.data.triggers||"time_delay"!=d.data.triggers.when_to_hide||""===d.data.triggers.hide_time||isNaN(d.data.triggers.hide_time)||setTimeout(function(){d.hide()},1e3*d.data.triggers.hide_time),void 0!==icegram_data.hide_me_after_any_message_shown&&icegram_data.hide_me_after_any_message_shown.length>0&&jQuery.each(icegram_data.hide_me_after_any_message_shown,function(a,b){var d=icegram.get_message_by_id(b);b!==c.message_id&&void 0!==d&&d.hide()});var e=d.data.type;void 0!==icegram_data.hide_me_after&&void 0!==icegram_data.hide_me_after[e]&&icegram_data.hide_me_after[e].length>0&&jQuery.each(icegram_data.hide_me_after[e],function(a,b){var d=icegram.get_message_by_id(b);b!==c.message_id&&void 0!==d&&d.hide()})}}),jQuery(document).on("mouseleave",c),jQuery(document).on("mouseenter",b),jQuery(window).on("blur",c),jQuery(window).on("focusin",b),jQuery(window).on("keydown",function(a){a.metaKey&&76===a.keyCode&&c(a)}),jQuery(window).on("scroll",function(a){clearTimeout(jQuery.data(this,"scrollTimer")),jQuery.data(this,"scrollTimer",setTimeout(f,500))}),"undefined"!=typeof icegram_trigger_based_messages&&icegram_trigger_based_messages.hasOwnProperty("user_inactivity")){var h,i=0,j=setInterval(function(){h=icegram.get_message_by_id(icegram_trigger_based_messages.user_inactivity[0]),g(h)},1e3);jQuery(document).mousemove(function(a){i=0}),jQuery(document).keypress(function(a){i=0}),jQuery(document).scroll(function(a){i=0})}});